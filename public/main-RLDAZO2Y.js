var AM=Object.defineProperty,RM=Object.defineProperties;var xM=Object.getOwnPropertyDescriptors;var BE=Object.getOwnPropertySymbols,NM=Object.getPrototypeOf,MM=Object.prototype.hasOwnProperty,PM=Object.prototype.propertyIsEnumerable,OM=Reflect.get;var $E=(t,e,n)=>e in t?AM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})MM.call(e,n)&&$E(t,n,e[n]);if(BE)for(var n of BE(e))PM.call(e,n)&&$E(t,n,e[n]);return t},Ie=(t,e)=>RM(t,xM(e));var xr=(t,e,n)=>OM(NM(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var HE=null;var tp=1,np=Symbol("SIGNAL");function ye(t){let e=HE;return HE=t,e}var qE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kM(t){if(!(sp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tp)){if(!t.producerMustRecompute(t)&&!rp(t)){t.dirty=!1,t.lastCleanEpoch=tp;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tp}}function GE(t){return t&&(t.nextProducerIndex=0),ye(t)}function WE(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ip(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rp(t){ju(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(kM(n),r!==n.version))return!0}return!1}function zE(t){if(ju(t),sp(t))for(let e=0;e<t.producerNode.length;e++)ip(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ip(t,e){if(FM(t),ju(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)ip(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ju(i),i.producerIndexOfThis[r]=e}}function sp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ju(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function FM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function LM(){throw new Error}var VM=LM;function KE(t){VM=t}function Y(t){return typeof t=="function"}function Cs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bu=Cs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(s){e=s instanceof Bu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{QE(s)}catch(o){e=e??[],o instanceof Bu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Bu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)QE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vi(n,e)}remove(e){let{_finalizers:n}=this;n&&vi(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var op=Fe.EMPTY;function $u(t){return t instanceof Fe||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function QE(t){Y(t)?t():t.unsubscribe()}var pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bs={setTimeout(t,e,...n){let{delegate:r}=bs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Hu(t){bs.setTimeout(()=>{let{onUnhandledError:e}=pn;if(e)e(t);else throw t})}function Da(){}var YE=ap("C",void 0,void 0);function JE(t){return ap("E",void 0,t)}function XE(t){return ap("N",t,void 0)}function ap(t,e,n){return{kind:t,value:e,error:n}}var wi=null;function Ts(t){if(pn.useDeprecatedSynchronousErrorHandling){let e=!wi;if(e&&(wi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wi;if(wi=null,n)throw r}}else t()}function ZE(t){pn.useDeprecatedSynchronousErrorHandling&&wi&&(wi.errorThrown=!0,wi.error=t)}var Ii=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$u(e)&&e.add(this)):this.destination=BM}static create(e,n,r){return new Ds(e,n,r)}next(e){this.isStopped?up(XE(e),this):this._next(e)}error(e){this.isStopped?up(JE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?up(YE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UM=Function.prototype.bind;function cp(t,e){return UM.call(t,e)}var lp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qu(r)}else qu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qu(n)}}},Ds=class extends Ii{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&pn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cp(e.next,s),error:e.error&&cp(e.error,s),complete:e.complete&&cp(e.complete,s)}):i=e}this.destination=new lp(i)}};function qu(t){pn.useDeprecatedSynchronousErrorHandling?ZE(t):Hu(t)}function jM(t){throw t}function up(t,e){let{onStoppedNotification:n}=pn;n&&bs.setTimeout(()=>n(t,e))}var BM={closed:!0,next:Da,error:jM,complete:Da};var Ss=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bt(t){return t}function dp(...t){return hp(t)}function hp(t){return t.length===0?Bt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=HM(n)?n:new Ds(n,r,i);return Ts(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=eC(r),new r((i,s)=>{let o=new Ds({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ss](){return this}pipe(...n){return hp(n)(this)}toPromise(n){return n=eC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function eC(t){var e;return(e=t??pn.Promise)!==null&&e!==void 0?e:Promise}function $M(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function HM(t){return t&&t instanceof Ii||$M(t)&&$u(t)}function fp(t){return Y(t?.lift)}function de(t){return e=>{if(fp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,r,i){return new pp(t,e,n,r,i)}var pp=class extends Ii{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function As(){return de((t,e)=>{let n=null;t._refCount++;let r=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Rs=class extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return As()(this)}};var tC=Cs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _t=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tC}next(n){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?op:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,vi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new Gu(e,n),t})(),Gu=class extends _t{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:op}};var dt=class extends _t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gp={now(){return(gp.delegate||Date).now()},delegate:void 0};var Wu=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Sa={setInterval(t,e,...n){let{delegate:r}=Sa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Sa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var xs=class extends Wu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Sa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ns=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ns.now=gp.now;var Ms=class extends Ns{constructor(e,n=Ns.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var mp=new Ms(xs);var zu=class extends xs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ku=class extends Ms{};var yp=new Ku(zu);var $t=new le(t=>t.complete());function nC(t){return t&&Y(t.schedule)}function rC(t){return t[t.length-1]}function Qu(t){return Y(rC(t))?t.pop():void 0}function Nr(t){return nC(rC(t))?t.pop():void 0}function _p(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sC(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function iC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ei(t){return this instanceof Ei?(this.v=t,this):new Ei(t)}function oC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(I){return new Promise(function(S,R){s.push([m,I,S,R])>1||a(m,I)})})}function a(m,I){try{u(r[m](I))}catch(S){p(s[0][3],S)}}function u(m){m.value instanceof Ei?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,I){m(I),s.shift(),s.length&&a(s[0][0],s[0][1])}}function aC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iC=="function"?iC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Yu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ju(t){return Y(t?.then)}function Xu(t){return Y(t[Ss])}function Zu(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function el(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tl=qM();function nl(t){return Y(t?.[tl])}function rl(t){return oC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ei(n.read());if(i)return yield Ei(void 0);yield yield Ei(r)}}finally{n.releaseLock()}})}function il(t){return Y(t?.getReader)}function Ve(t){if(t instanceof le)return t;if(t!=null){if(Xu(t))return GM(t);if(Yu(t))return WM(t);if(Ju(t))return zM(t);if(Zu(t))return cC(t);if(nl(t))return KM(t);if(il(t))return QM(t)}throw el(t)}function GM(t){return new le(e=>{let n=t[Ss]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function WM(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zM(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Hu)})}function KM(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cC(t){return new le(e=>{YM(t,e).catch(n=>e.error(n))})}function QM(t){return cC(rl(t))}function YM(t,e){var n,r,i,s;return sC(this,void 0,void 0,function*(){try{for(n=aC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ft(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Mr(t,e=0){return de((n,r)=>{n.subscribe(ie(r,i=>Ft(r,t,()=>r.next(i),e),()=>Ft(r,t,()=>r.complete(),e),i=>Ft(r,t,()=>r.error(i),e)))})}function Pr(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function uC(t,e){return Ve(t).pipe(Pr(e),Mr(e))}function lC(t,e){return Ve(t).pipe(Pr(e),Mr(e))}function dC(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function hC(t,e){return new le(n=>{let r;return Ft(n,e,()=>{r=t[tl](),Ft(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function sl(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{Ft(n,e,()=>{let r=t[Symbol.asyncIterator]();Ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fC(t,e){return sl(rl(t),e)}function pC(t,e){if(t!=null){if(Xu(t))return uC(t,e);if(Yu(t))return dC(t,e);if(Ju(t))return lC(t,e);if(Zu(t))return sl(t,e);if(nl(t))return hC(t,e);if(il(t))return fC(t,e)}throw el(t)}function Ne(t,e){return e?pC(t,e):Ve(t)}function G(...t){let e=Nr(t);return Ne(t,e)}function Ps(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function vp(t){return!!t&&(t instanceof le||Y(t.lift)&&Y(t.subscribe))}var nr=Cs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function se(t,e){return de((n,r)=>{let i=0;n.subscribe(ie(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:JM}=Array;function XM(t,e){return JM(e)?t(...e):t(e)}function ol(t){return se(e=>XM(t,e))}var{isArray:ZM}=Array,{getPrototypeOf:eP,prototype:tP,keys:nP}=Object;function al(t){if(t.length===1){let e=t[0];if(ZM(e))return{args:e,keys:null};if(rP(e)){let n=nP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rP(t){return t&&typeof t=="object"&&eP(t)===tP}function cl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Aa(...t){let e=Nr(t),n=Qu(t),{args:r,keys:i}=al(t);if(r.length===0)return Ne([],e);let s=new le(iP(r,e,i?o=>cl(i,o):Bt));return n?s.pipe(ol(n)):s}function iP(t,e,n=Bt){return r=>{gC(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)gC(e,()=>{let l=Ne(t[u],e),h=!1;l.subscribe(ie(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function gC(t,e,n){t?Ft(n,t,e):e()}function mC(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},I=R=>l<r?S(R):u.push(R),S=R=>{s&&e.next(R),l++;let N=!1;Ve(n(R,h++)).subscribe(ie(e,L=>{i?.(L),s?I(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let L=u.shift();o?Ft(e,o,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(ie(e,I,()=>{p=!0,m()})),()=>{a?.()}}function Ue(t,e,n=1/0){return Y(e)?Ue((r,i)=>se((s,o)=>e(r,s,i,o))(Ve(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>mC(r,i,t,n)))}function Os(t=1/0){return Ue(Bt,t)}function yC(){return Os(1)}function ks(...t){return yC()(Ne(t,Nr(t)))}function ul(t){return new le(e=>{Ve(t()).subscribe(e)})}function wp(...t){let e=Qu(t),{args:n,keys:r}=al(t),i=new le(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ve(n[h]).subscribe(ie(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?cl(r,a):a),s.complete())}))}});return e?i.pipe(ol(e)):i}function Zt(t,e){return de((n,r)=>{let i=0;n.subscribe(ie(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Or(t){return de((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ie(n,void 0,void 0,o=>{s=Ve(t(o,Or(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _C(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ie(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Ci(t,e){return Y(e)?Ue(t,e,1):Ue(t,1)}function kr(t){return de((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function rr(t){return t<=0?()=>$t:de((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ip(t){return se(()=>t)}function ll(t=sP){return de((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sP(){return new nr}function Ra(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Sn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Zt((i,s)=>t(i,s,r)):Bt,rr(1),n?kr(e):ll(()=>new nr))}function Fs(t){return t<=0?()=>$t:de((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ep(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Zt((i,s)=>t(i,s,r)):Bt,Fs(1),n?kr(e):ll(()=>new nr))}function Cp(t,e){return de(_C(t,e,arguments.length>=2,!0))}function bp(...t){let e=Nr(t);return de((n,r)=>{(e?ks(t,n,e):ks(t,n)).subscribe(r)})}function en(t,e){return de((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ie(r,u=>{i?.unsubscribe();let l=0,h=s++;Ve(t(u,h)).subscribe(i=ie(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tp(t){return de((e,n)=>{Ve(t).subscribe(ie(n,()=>n.complete(),Da)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ie(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Bt}var ib="https://g.co/ng/security#xss",V=class extends Error{constructor(e,n){super(xg(e,n)),this.code=e}};function xg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $a(t){return{toString:t}.toString()}var dl="__parameters__";function oP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function sb(t,e,n){return $a(()=>{let r=oP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(dl)?u[dl]:Object.defineProperty(u,dl,{value:[]})[dl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var bi=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("Could not find renamed property on target object.")}function aP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function xt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(xt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function vC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var cP=be({__forward_ref__:be});function Pi(t){return t.__forward_ref__=Pi,t.toString=function(){return xt(this())},t}function Rt(t){return ob(t)?t():t}function ob(t){return typeof t=="function"&&t.hasOwnProperty(cP)&&t.__forward_ref__===Pi}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ye(t){return{providers:t.providers||[],imports:t.imports||[]}}function jl(t){return wC(t,cb)||wC(t,ub)}function ab(t){return jl(t)!==null}function wC(t,e){return t.hasOwnProperty(e)?t[e]:null}function uP(t){let e=t&&(t[cb]||t[ub]);return e||null}function IC(t){return t&&(t.hasOwnProperty(EC)||t.hasOwnProperty(lP))?t[EC]:null}var cb=be({\u0275prov:be}),EC=be({\u0275inj:be}),ub=be({ngInjectableDef:be}),lP=be({ngInjectorDef:be}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function lb(t){return t&&!!t.\u0275providers}var dP=be({\u0275cmp:be}),hP=be({\u0275dir:be}),fP=be({\u0275pipe:be}),pP=be({\u0275mod:be}),wl=be({\u0275fac:be}),xa=be({__NG_ELEMENT_ID__:be}),CC=be({__NG_ENV_ID__:be});function Bl(t){return typeof t=="string"?t:t==null?"":String(t)}function gP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Bl(t)}function mP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new V(-200,t)}function Ng(t,e){throw new V(-201,!1)}var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Bp;function db(){return Bp}function tn(t){let e=Bp;return Bp=t,e}function hb(t,e,n){let r=jl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;Ng(t,"Injector")}var yP={},Na=yP,$p="__NG_DI_FLAG__",Il="ngTempTokenPath",_P="ngTokenPath",vP=/\n/gm,wP="\u0275",bC="__source",Bs;function IP(){return Bs}function Fr(t){let e=Bs;return Bs=t,e}function EP(t,e=ee.Default){if(Bs===void 0)throw new V(-203,!1);return Bs===null?hb(t,void 0,e):Bs.get(t,e&ee.Optional?null:void 0,e)}function z(t,e=ee.Default){return(db()||EP)(Rt(t),e)}function k(t,e=ee.Default){return z(t,$l(e))}function $l(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Hp(t){let e=[];for(let n=0;n<t.length;n++){let r=Rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,s=ee.Default;for(let o=0;o<r.length;o++){let a=r[o],u=CP(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function fb(t,e){return t[$p]=e,t.prototype[$p]=e,t}function CP(t){return t[$p]}function bP(t,e,n,r){let i=t[Il];throw e[bC]&&i.unshift(e[bC]),t.message=TP(`
`+t.message,i,n,r),t[_P]=i,t[Il]=null,t}function TP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==wP?t.slice(2):t;let i=xt(e);if(Array.isArray(e))i=e.map(xt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):xt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vP,`
  `)}`}var ke=fb(sb("Optional"),8);var Hl=fb(sb("SkipSelf"),4);function Hs(t,e){let n=t.hasOwnProperty(wl);return n?t[wl]:null}function Mg(t,e){t.forEach(n=>Array.isArray(n)?Mg(n,e):e(n))}function pb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function El(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function DP(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function SP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function AP(t,e,n){let r=Ha(t,e);return r>=0?t[r|1]=n:(r=~r,SP(t,r,e,n)),r}function Dp(t,e){let n=Ha(t,e);if(n>=0)return t[n|1]}function Ha(t,e){return RP(t,e,1)}function RP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var qs={},nn=[],Gs=new $(""),gb=new $("",-1),mb=new $(""),Cl=class{get(e,n=Na){if(n===Na){let r=new Error(`NullInjectorError: No provider for ${xt(e)}!`);throw r.name="NullInjectorError",r}return n}},yb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(yb||{}),xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xn||{}),vt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vt||{});function xP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function qp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];NP(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function _b(t){return t===3||t===4||t===6}function NP(t){return t.charCodeAt(0)===64}function Ma(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?TC(t,n,i,null,e[++r]):TC(t,n,i,null,null))}}return t}function TC(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var vb="ng-template";function MP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Pg(t){return t.type===4&&t.value!==vb}function PP(t,e,n){let r=t.type===4&&!n?vb:t.value;return e===r}function OP(t,e,n){let r=4,i=t.attrs,s=i!==null?LP(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!gn(r)&&!gn(u))return!1;if(o&&gn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!PP(t,u,n)||u===""&&e.length===1){if(gn(r))return!1;o=!0}}else if(r&8){if(i===null||!MP(t,i,u,n)){if(gn(r))return!1;o=!0}}else{let l=e[++a],h=kP(u,i,Pg(t),n);if(h===-1){if(gn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(gn(r))return!1;o=!0}}}}return gn(r)||o}function gn(t){return(t&1)===0}function kP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return VP(e,t)}function wb(t,e,n=!1){for(let r=0;r<e.length;r++)if(OP(t,e[r],n))return!0;return!1}function FP(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function LP(t){for(let e=0;e<t.length;e++){let n=t[e];if(_b(n))return e}return t.length}function VP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function UP(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function DC(t,e){return t?":not("+e.trim()+")":e}function jP(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!gn(o)&&(e+=DC(s,i),i=""),r=o,s=s||!gn(r);n++}return i!==""&&(e+=DC(s,i)),e}function BP(t){return t.map(jP).join(",")}function $P(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!gn(i))break;i=s}r++}return{attrs:e,classes:n}}function Nt(t){return $a(()=>{let e=Tb(t),n=Ie(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===yb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xn.Emulated,styles:t.styles||nn,_:null,schemas:t.schemas||null,tView:null,id:""});Db(n);let r=t.dependencies;return n.directiveDefs=AC(r,!1),n.pipeDefs=AC(r,!0),n.id=GP(n),n})}function HP(t){return Vr(t)||Ib(t)}function qP(t){return t!==null}function Je(t){return $a(()=>({type:t.type,bootstrap:t.bootstrap||nn,declarations:t.declarations||nn,imports:t.imports||nn,exports:t.exports||nn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function SC(t,e){if(t==null)return qs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=vt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==vt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Xe(t){return $a(()=>{let e=Tb(t);return Db(e),e})}function Vr(t){return t[dP]||null}function Ib(t){return t[hP]||null}function Eb(t){return t[fP]||null}function Cb(t){let e=Vr(t)||Ib(t)||Eb(t);return e!==null?e.standalone:!1}function bb(t,e){let n=t[pP]||null;if(!n&&e===!0)throw new Error(`Type ${xt(t)} does not have '\u0275mod' property.`);return n}function Tb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||qs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||nn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SC(t.inputs,e),outputs:SC(t.outputs),debugInfo:null}}function Db(t){t.features?.forEach(e=>e(t))}function AC(t,e){if(!t)return null;let n=e?Eb:HP;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(qP)}function GP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ql(t){return{\u0275providers:t}}function Zs(...t){return{\u0275providers:Sb(!0,t),\u0275fromNgModule:!0}}function Sb(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Mg(e,o=>{let a=o;Gp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ab(i,s),n}function Ab(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Og(i,s=>{e(s,r)})}}function Gp(t,e,n,r){if(t=Rt(t),!t)return!1;let i=null,s=IC(t),o=!s&&Vr(t);if(!s&&!o){let u=t.ngModule;if(s=IC(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Gp(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Mg(s.imports,h=>{Gp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Ab(l,e)}if(!a){let l=Hs(i)||(()=>new i);e({provide:i,useFactory:l,deps:nn},i),e({provide:mb,useValue:i,multi:!0},i),e({provide:Gs,useValue:()=>z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Og(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Og(t,e){for(let n of t)lb(n)&&(n=n.\u0275providers),Array.isArray(n)?Og(n,e):e(n)}var WP=be({provide:String,useValue:be});function Rb(t){return t!==null&&typeof t=="object"&&WP in t}function zP(t){return!!(t&&t.useExisting)}function KP(t){return!!(t&&t.useFactory)}function Ws(t){return typeof t=="function"}function QP(t){return!!t.useClass}var Gl=new $(""),gl={},YP={},Sp;function kg(){return Sp===void 0&&(Sp=new Cl),Sp}var Ht=class{},Pa=class extends Ht{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zp(e,o=>this.processProvider(o)),this.records.set(gb,Ls(void 0,this)),i.has("environment")&&this.records.set(Ht,Ls(void 0,this));let s=this.records.get(Gl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(mb,nn,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Fr(this),r=tn(void 0),i;try{return e()}finally{Fr(n),tn(r)}}get(e,n=Na,r=ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CC))return e[CC](this);r=$l(r);let i,s=Fr(this),o=tn(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=tO(e)&&jl(e);l&&this.injectableDefInScope(l)?u=Ls(Wp(e),gl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ee.Self?kg():this.parent;return n=r&ee.Optional&&n===Na?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Il]=a[Il]||[]).unshift(xt(e)),s)throw a;return bP(a,e,"R3InjectorError",this.source)}else throw a}finally{tn(o),Fr(s)}}resolveInjectorInitializers(){let e=ye(null),n=Fr(this),r=tn(void 0),i;try{let s=this.get(Gs,nn,ee.Self);for(let o of s)o()}finally{Fr(n),tn(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(e){e=Rt(e);let n=Ws(e)?e:Rt(e&&e.provide),r=XP(e);if(!Ws(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ls(void 0,gl,!0),i.factory=()=>Hp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===gl&&(n.value=YP,n.value=n.factory()),typeof n.value=="object"&&n.value&&eO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Wp(t){let e=jl(t),n=e!==null?e.factory:Hs(t);if(n!==null)return n;if(t instanceof $)throw new V(204,!1);if(t instanceof Function)return JP(t);throw new V(204,!1)}function JP(t){if(t.length>0)throw new V(204,!1);let n=uP(t);return n!==null?()=>n.factory(t):()=>new t}function XP(t){if(Rb(t))return Ls(void 0,t.useValue);{let e=xb(t);return Ls(e,gl)}}function xb(t,e,n){let r;if(Ws(t)){let i=Rt(t);return Hs(i)||Wp(i)}else if(Rb(t))r=()=>Rt(t.useValue);else if(KP(t))r=()=>t.useFactory(...Hp(t.deps||[]));else if(zP(t))r=()=>z(Rt(t.useExisting));else{let i=Rt(t&&(t.useClass||t.provide));if(ZP(t))r=()=>new i(...Hp(t.deps));else return Hs(i)||Wp(i)}return r}function Ls(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ZP(t){return!!t.deps}function eO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tO(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function zp(t,e){for(let n of t)Array.isArray(n)?zp(n,e):n&&lb(n)?zp(n.\u0275providers,e):e(n)}function sr(t,e){t instanceof Pa&&t.assertNotDestroyed();let n,r=Fr(t),i=tn(void 0);try{return e()}finally{Fr(r),tn(i)}}function Nb(){return db()!==void 0||IP()!=null}function nO(t){if(!Nb())throw new V(-203,!1)}function rO(t){return typeof t=="function"}var or=0,ae=1,W=2,wt=3,mn=4,qt=5,Oa=6,ka=7,yn=8,zs=9,_n=10,Oe=11,Fa=12,RC=13,eo=14,vn=15,Wl=16,Vs=17,Ks=18,zl=19,Mb=20,Lr=21,Ap=22,Si=23,Nn=25,Pb=1;var Ai=7,bl=8,Tl=9,rn=10,Fg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Fg||{});function Ti(t){return Array.isArray(t)&&typeof t[Pb]=="object"}function ar(t){return Array.isArray(t)&&t[Pb]===!0}function Lg(t){return(t.flags&4)!==0}function Kl(t){return t.componentOffset>-1}function Ql(t){return(t.flags&1)===1}function Ur(t){return!!t.template}function iO(t){return(t[W]&512)!==0}var Kp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ob(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function $r(){return kb}function kb(t){return t.type.prototype.ngOnChanges&&(t.setInput=oO),sO}$r.ngInherit=!0;function sO(){let t=Lb(this),e=t?.current;if(e){let n=t.previous;if(n===qs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function oO(t,e,n,r,i){let s=this.declaredInputs[r],o=Lb(t)||aO(t,{previous:qs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Kp(l&&l.currentValue,n,u===qs),Ob(t,e,i,n)}var Fb="__ngSimpleChanges__";function Lb(t){return t[Fb]||null}function aO(t,e){return t[Fb]=e}var xC=null;var An=function(t,e,n){xC?.(t,e,n)},cO="svg",uO="math",lO=!1;function dO(){return lO}function Mn(t){for(;Array.isArray(t);)t=t[or];return t}function Vb(t,e){return Mn(e[t])}function sn(t,e){return Mn(e[t.index])}function Ub(t,e){return t.data[e]}function Hr(t,e){let n=e[t];return Ti(n)?n:n[or]}function Vg(t){return(t[W]&128)===128}function hO(t){return ar(t[wt])}function Qs(t,e){return e==null?null:t[e]}function jb(t){t[Vs]=0}function fO(t){t[W]&1024||(t[W]|=1024,Vg(t)&&La(t))}function pO(t,e){for(;t>0;)e=e[eo],t--;return e}function Ug(t){return!!(t[W]&9216||t[Si]?.dirty)}function Qp(t){t[_n].changeDetectionScheduler?.notify(1),Ug(t)?La(t):t[W]&64&&(dO()?(t[W]|=1024,La(t)):t[_n].changeDetectionScheduler?.notify())}function La(t){t[_n].changeDetectionScheduler?.notify();let e=Va(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Vg(e)));)e=Va(e)}function Bb(t,e){if((t[W]&256)===256)throw new V(911,!1);t[Lr]===null&&(t[Lr]=[]),t[Lr].push(e)}function gO(t,e){if(t[Lr]===null)return;let n=t[Lr].indexOf(e);n!==-1&&t[Lr].splice(n,1)}function Va(t){let e=t[wt];return ar(e)?e[wt]:e}var re={lFrame:Kb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function mO(){return re.lFrame.elementDepthCount}function yO(){re.lFrame.elementDepthCount++}function _O(){re.lFrame.elementDepthCount--}function $b(){return re.bindingsEnabled}function Hb(){return re.skipHydrationRootTNode!==null}function vO(t){return re.skipHydrationRootTNode===t}function wO(){re.skipHydrationRootTNode=null}function ve(){return re.lFrame.lView}function ht(){return re.lFrame.tView}function qa(t){return re.lFrame.contextLView=t,t[yn]}function Ga(t){return re.lFrame.contextLView=null,t}function Mt(){let t=qb();for(;t!==null&&t.type===64;)t=t.parent;return t}function qb(){return re.lFrame.currentTNode}function IO(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Oi(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function jg(){return re.lFrame.isParent}function Bg(){re.lFrame.isParent=!1}function EO(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function CO(t){return re.lFrame.bindingIndex=t}function Yl(){return re.lFrame.bindingIndex++}function bO(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function TO(){return re.lFrame.inI18n}function DO(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yp(e)}function SO(){return re.lFrame.currentDirectiveIndex}function Yp(t){re.lFrame.currentDirectiveIndex=t}function AO(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Gb(t){re.lFrame.currentQueryIndex=t}function RO(t){let e=t[ae];return e.type===2?e.declTNode:e.type===1?t[qt]:null}function Wb(t,e,n){if(n&ee.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=RO(s),i===null||(s=s[eo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=re.lFrame=zb();return r.currentTNode=e,r.lView=t,!0}function $g(t){let e=zb(),n=t[ae];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zb(){let t=re.lFrame,e=t===null?null:t.child;return e===null?Kb(t):e}function Kb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Qb(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Yb=Qb;function Hg(){let t=Qb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xO(t){return(re.lFrame.contextLView=pO(t,re.lFrame.contextLView))[yn]}function to(){return re.lFrame.selectedIndex}function Ri(t){re.lFrame.selectedIndex=t}function Jl(){let t=re.lFrame;return Ub(t.tView,t.selectedIndex)}function NO(){return re.lFrame.currentNamespace}var Jb=!0;function Xl(){return Jb}function Zl(t){Jb=t}function MO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=kb(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ed(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function ml(t,e,n){Xb(t,e,3,n)}function yl(t,e,n,r){(t[W]&3)===n&&Xb(t,e,n,r)}function Rp(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function Xb(t,e,n,r){let i=r!==void 0?t[Vs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Vs]+=65536),(a<s||s==-1)&&(PO(t,n,e,u),t[Vs]=(t[Vs]&4294901760)+u+2),u++}function NC(t,e){An(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),An(5,t,e)}}function PO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[W]>>14<t[Vs]>>16&&(t[W]&3)===e&&(t[W]+=16384,NC(a,s)):NC(a,s)}var $s=-1,xi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function OO(t){return t instanceof xi}function kO(t){return(t.flags&8)!==0}function FO(t){return(t.flags&16)!==0}function Zb(t){return t!==$s}function Dl(t){return t&32767}function LO(t){return t>>16}function Sl(t,e){let n=LO(t),r=e;for(;n>0;)r=r[eo],n--;return r}var Jp=!0;function MC(t){let e=Jp;return Jp=t,e}var VO=256,eT=VO-1,tT=5,UO=0,Rn={};function jO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xa)&&(r=n[xa]),r==null&&(r=n[xa]=UO++);let i=r&eT,s=1<<i;e.data[t+(i>>tT)]|=s}function Al(t,e){let n=nT(t,e);if(n!==-1)return n;let r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,xp(r.data,t),xp(e,null),xp(r.blueprint,null));let i=qg(t,e),s=t.injectorIndex;if(Zb(i)){let o=Dl(i),a=Sl(i,e),u=a[ae].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function xp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function nT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=aT(i),r===null)return $s;if(n++,i=i[eo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $s}function Xp(t,e,n){jO(t,e,n)}function BO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(_b(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function rT(t,e,n){if(n&ee.Optional||t!==void 0)return t;Ng(e,"NodeInjector")}function iT(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),!(n&(ee.Self|ee.Host))){let i=t[zs],s=tn(void 0);try{return i?i.get(e,r,n&ee.Optional):hb(e,r,n&ee.Optional)}finally{tn(s)}}return rT(r,e,n)}function sT(t,e,n,r=ee.Default,i){if(t!==null){if(e[W]&2048&&!(r&ee.Self)){let o=WO(t,e,n,r,Rn);if(o!==Rn)return o}let s=oT(t,e,n,r,Rn);if(s!==Rn)return s}return iT(e,n,r,i)}function oT(t,e,n,r,i){let s=qO(n);if(typeof s=="function"){if(!Wb(e,t,r))return r&ee.Host?rT(i,n,r):iT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ee.Optional))Ng(n);else return o}finally{Yb()}}else if(typeof s=="number"){let o=null,a=nT(t,e),u=$s,l=r&ee.Host?e[vn][qt]:null;for((a===-1||r&ee.SkipSelf)&&(u=a===-1?qg(t,e):e[a+8],u===$s||!OC(r,!1)?a=-1:(o=e[ae],a=Dl(u),e=Sl(u,e)));a!==-1;){let h=e[ae];if(PC(s,a,h.data)){let p=$O(a,e,n,o,r,l);if(p!==Rn)return p}u=e[a+8],u!==$s&&OC(r,e[ae].data[a+8]===l)&&PC(s,a,e)?(o=h,a=Dl(u),e=Sl(u,e)):a=-1}}return i}function $O(t,e,n,r,i,s){let o=e[ae],a=o.data[t+8],u=r==null?Kl(a)&&Jp:r!=o&&(a.type&3)!==0,l=i&ee.Host&&s===a,h=HO(a,o,n,u,l);return h!==null?Ys(e,o,h,a):Rn}function HO(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let I=p;I<m;I++){let S=o[I];if(I<u&&n===S||I>=u&&S.type===n)return I}if(i){let I=o[u];if(I&&Ur(I)&&I.type===n)return u}return null}function Ys(t,e,n,r){let i=t[n],s=e.data;if(OO(i)){let o=i;o.resolving&&mP(gP(s[n]));let a=MC(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?tn(o.injectImpl):null,h=Wb(t,r,ee.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&MO(n,s[n],e)}finally{l!==null&&tn(l),MC(a),o.resolving=!1,Yb()}}return i}function qO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xa)?t[xa]:void 0;return typeof e=="number"?e>=0?e&eT:GO:e}function PC(t,e,n){let r=1<<t;return!!(n[e+(t>>tT)]&r)}function OC(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var Di=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sT(this._tNode,this._lView,e,$l(r),n)}};function GO(){return new Di(Mt(),ve())}function no(t){return $a(()=>{let e=t.prototype.constructor,n=e[wl]||Zp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[wl]||Zp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zp(t){return ob(t)?()=>{let e=Zp(Rt(t));return e&&e()}:Hs(t)}function WO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[W]&2048&&!(o[W]&512);){let a=oT(s,o,n,r|ee.Self,Rn);if(a!==Rn)return a;let u=s.parent;if(!u){let l=o[Mb];if(l){let h=l.get(n,Rn,r);if(h!==Rn)return h}u=aT(o),o=o[eo]}s=u}return i}function aT(t){let e=t[ae],n=e.type;return n===2?e.declTNode:n===1?t[qt]:null}function Gg(t){return BO(Mt(),t)}function kC(t,e=null,n=null,r){let i=cT(t,e,n,r);return i.resolveInjectorInitializers(),i}function cT(t,e=null,n=null,r,i=new Set){let s=[n||nn,Zs(t)];return r=r||(typeof t=="object"?void 0:xt(t)),new Pa(s,e||kg(),r||null,i)}var ft=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return kC({name:""},i,r,"");{let s=r.name??"";return kC({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Na,e.NULL=new Cl,e.\u0275prov=B({token:e,providedIn:"any",factory:()=>z(gb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var zO="ngOriginalError";function Np(t){return t[zO]}var Pn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Np(e);for(;n&&Np(n);)n=Np(n);return n||null}},uT=new $("",{providedIn:"root",factory:()=>k(Pn).handleError.bind(void 0)}),Wg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),eg=class extends Wg{constructor(e){super(),this._lView=e}onDestroy(e){return Bb(this._lView,e),()=>gO(this._lView,e)}};function KO(){return new eg(ve())}function QO(){return td(Mt(),ve())}function td(t,e){return new cr(sn(t,e))}var cr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=QO;let t=e;return t})();var tg=class extends _t{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Nb()&&(this.destroyRef=k(Wg,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Mp(s),i&&(i=Mp(i)),o&&(o=Mp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function Mp(t){return e=>{setTimeout(t,void 0,e)}}var Ge=tg;function lT(t){return(t.flags&128)===128}var dT=new Map,YO=0;function JO(){return YO++}function XO(t){dT.set(t[zl],t)}function ZO(t){dT.delete(t[zl])}var FC="__ngContext__";function jr(t,e){Ti(e)?(t[FC]=e[zl],XO(e)):t[FC]=e}function hT(t){return pT(t[Fa])}function fT(t){return pT(t[mn])}function pT(t){for(;t!==null&&!ar(t);)t=t[mn];return t}var ng;function gT(t){ng=t}function ek(){if(ng!==void 0)return ng;if(typeof document<"u")return document;throw new V(210,!1)}var zg=new $("",{providedIn:"root",factory:()=>tk}),tk="ng",Kg=new $(""),on=new $("",{providedIn:"platform",factory:()=>"unknown"});var Qg=new $("",{providedIn:"root",factory:()=>ek().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nk="h",rk="b";var ik=()=>null;function Yg(t,e,n=!1){return ik(t,e,n)}var mT=!1,sk=new $("",{providedIn:"root",factory:()=>mT});var hl;function ok(){if(hl===void 0&&(hl=null,bi.trustedTypes))try{hl=bi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return hl}function LC(t){return ok()?.createScriptURL(t)||t}var Rl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ib})`}};function Wa(t){return t instanceof Rl?t.changingThisBreaksApplicationSecurity:t}function Jg(t,e){let n=ak(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ib})`)}return n===e}function ak(t){return t instanceof Rl&&t.getTypeName()||null}var ck=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yT(t){return t=String(t),t.match(ck)?t:"unsafe:"+t}var nd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(nd||{});function Xg(t){let e=vT();return e?e.sanitize(nd.URL,t)||"":Jg(t,"URL")?Wa(t):yT(Bl(t))}function uk(t){let e=vT();if(e)return LC(e.sanitize(nd.RESOURCE_URL,t)||"");if(Jg(t,"ResourceURL"))return LC(Wa(t));throw new V(904,!1)}function lk(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?uk:Xg}function _T(t,e,n){return lk(e,n)(t)}function vT(){let t=ve();return t&&t[_n].sanitizer}var dk=/^>|^->|<!--|-->|--!>|<!-$/g,hk=/(<|>)/g,fk="\u200B$1\u200B";function pk(t){return t.replace(dk,e=>e.replace(hk,fk))}function wT(t){return t instanceof Function?t():t}function gk(t){return(t??k(ft)).get(on)==="browser"}var On=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(On||{}),mk;function Zg(t,e){return mk(t,e)}function Us(t,e,n,r,i){if(r!=null){let s,o=!1;ar(r)?s=r:Ti(r)&&(o=!0,r=r[or]);let a=Mn(r);t===0&&n!==null?i==null?DT(e,n,a):xl(e,n,a,i||null,!0):t===1&&n!==null?xl(e,n,a,i||null,!0):t===2?Mk(e,a,o):t===3&&e.destroyNode(a),s!=null&&Ok(e,t,s,n,i)}}function yk(t,e){return t.createText(e)}function _k(t,e,n){t.setValue(e,n)}function vk(t,e){return t.createComment(pk(e))}function IT(t,e,n){return t.createElement(e,n)}function wk(t,e){ET(t,e),e[or]=null,e[qt]=null}function Ik(t,e,n,r,i,s){r[or]=i,r[qt]=e,id(t,r,n,1,i,s)}function ET(t,e){e[_n].changeDetectionScheduler?.notify(1),id(t,e,e[Oe],2,null,null)}function Ek(t){let e=t[Fa];if(!e)return Pp(t[ae],t);for(;e;){let n=null;if(Ti(e))n=e[Fa];else{let r=e[rn];r&&(n=r)}if(!n){for(;e&&!e[mn]&&e!==t;)Ti(e)&&Pp(e[ae],e),e=e[wt];e===null&&(e=t),Ti(e)&&Pp(e[ae],e),n=e&&e[mn]}e=n}}function Ck(t,e,n,r){let i=rn+r,s=n.length;r>0&&(n[i-1][mn]=e),r<s-rn?(e[mn]=n[i],pb(n,rn+r,e)):(n.push(e),e[mn]=null),e[wt]=n;let o=e[Wl];o!==null&&n!==o&&bk(o,e);let a=e[Ks];a!==null&&a.insertView(t),Qp(e),e[W]|=128}function bk(t,e){let n=t[Tl],i=e[wt][wt][vn];e[vn]!==i&&(t[W]|=Fg.HasTransplantedViews),n===null?t[Tl]=[e]:n.push(e)}function CT(t,e){let n=t[Tl],r=n.indexOf(e);n.splice(r,1)}function rg(t,e){if(t.length<=rn)return;let n=rn+e,r=t[n];if(r){let i=r[Wl];i!==null&&i!==t&&CT(i,r),e>0&&(t[n-1][mn]=r[mn]);let s=El(t,rn+e);wk(r[ae],r);let o=s[Ks];o!==null&&o.detachView(s[ae]),r[wt]=null,r[mn]=null,r[W]&=-129}return r}function bT(t,e){if(!(e[W]&256)){let n=e[Oe];n.destroyNode&&id(t,e,n,3,null,null),Ek(e)}}function Pp(t,e){if(e[W]&256)return;let n=ye(null);try{e[W]&=-129,e[W]|=256,e[Si]&&zE(e[Si]),Dk(t,e),Tk(t,e),e[ae].type===1&&e[Oe].destroy();let r=e[Wl];if(r!==null&&ar(e[wt])){r!==e[wt]&&CT(r,e);let i=e[Ks];i!==null&&i.detachView(t)}ZO(e)}finally{ye(n)}}function Tk(t,e){let n=t.cleanup,r=e[ka];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ka]=null);let i=e[Lr];if(i!==null){e[Lr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function Dk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof xi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];An(4,a,u);try{u.call(a)}finally{An(5,a,u)}}else{An(4,i,s);try{s.call(i)}finally{An(5,i,s)}}}}}function TT(t,e,n){return Sk(t,e.parent,n)}function Sk(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[or];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===xn.None||s===xn.Emulated)return null}return sn(r,n)}}function xl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function DT(t,e,n){t.appendChild(e,n)}function VC(t,e,n,r,i){r!==null?xl(t,e,n,r,i):DT(t,e,n)}function Ak(t,e,n,r){t.removeChild(e,n,r)}function em(t,e){return t.parentNode(e)}function Rk(t,e){return t.nextSibling(e)}function ST(t,e,n){return Nk(t,e,n)}function xk(t,e,n){return t.type&40?sn(t,n):null}var Nk=xk,UC;function rd(t,e,n,r){let i=TT(t,r,e),s=e[Oe],o=r.parent||e[qt],a=ST(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)VC(s,i,n[u],a,!1);else VC(s,i,n,a,!1);UC!==void 0&&UC(s,r,e,n,i)}function _l(t,e){if(e!==null){let n=e.type;if(n&3)return sn(e,t);if(n&4)return ig(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return _l(t,r);{let i=t[e.index];return ar(i)?ig(-1,i):Mn(i)}}else{if(n&32)return Zg(e,t)()||Mn(t[e.index]);{let r=AT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Va(t[vn]);return _l(i,r)}else return _l(t,e.next)}}}return null}function AT(t,e){if(e!==null){let r=t[vn][qt],i=e.projection;return r.projection[i]}return null}function ig(t,e){let n=rn+t+1;if(n<e.length){let r=e[n],i=r[ae].firstChild;if(i!==null)return _l(r,i)}return e[Ai]}function Mk(t,e,n){let r=em(t,e);r&&Ak(t,r,e,n)}function tm(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&jr(Mn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)tm(t,e,n.child,r,i,s,!1),Us(e,t,i,a,s);else if(u&32){let l=Zg(n,r),h;for(;h=l();)Us(e,t,i,h,s);Us(e,t,i,a,s)}else u&16?RT(t,e,r,n,i,s):Us(e,t,i,a,s);n=o?n.projectionNext:n.next}}function id(t,e,n,r,i,s){tm(n,r,t.firstChild,e,i,s,!1)}function Pk(t,e,n){let r=e[Oe],i=TT(t,n,e),s=n.parent||e[qt],o=ST(s,n,e);RT(r,0,e,n,i,o)}function RT(t,e,n,r,i,s){let o=n[vn],u=o[qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Us(e,t,i,h,s)}else{let l=u,h=o[wt];lT(r)&&(l.flags|=128),tm(t,e,l,h,i,s,!0)}}function Ok(t,e,n,r,i){let s=n[Ai],o=Mn(n);s!==o&&Us(e,t,r,s,i);for(let a=rn;a<n.length;a++){let u=n[a];id(u[ae],u,t,e,r,s)}}function kk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:On.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=On.Important),t.setStyle(n,r,i,s))}}function Fk(t,e,n){t.setAttribute(e,"style",n)}function xT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function NT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&qp(t,e,r),i!==null&&xT(t,e,i),s!==null&&Fk(t,e,s)}var qr={};function We(t=1){MT(ht(),ve(),to()+t,!1)}function MT(t,e,n,r){if(!r)if((e[W]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ml(e,s,n)}else{let s=t.preOrderHooks;s!==null&&yl(e,s,0,n)}Ri(n)}function U(t,e=ee.Default){let n=ve();if(n===null)return z(t,e);let r=Mt();return sT(r,n,Rt(t),e)}function PT(){let t="invalid";throw new Error(t)}function OT(t,e,n,r,i,s){let o=ye(null);try{let a=null;i&vt.SignalBased&&(a=e[r][np]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&vt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Ob(e,a,r,s)}finally{ye(o)}}function Lk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ri(~i);else{let s=i,o=n[++r],a=n[++r];DO(o,s);let u=e[s];a(2,u)}}}finally{Ri(-1)}}function sd(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[or]=i,p[W]=r|4|128|8|64,(l!==null||t&&t[W]&2048)&&(p[W]|=2048),jb(p),p[wt]=p[eo]=t,p[yn]=n,p[_n]=o||t&&t[_n],p[Oe]=a||t&&t[Oe],p[zs]=u||t&&t[zs]||null,p[qt]=s,p[zl]=JO(),p[Oa]=h,p[Mb]=l,p[vn]=e.type==2?t[vn]:p,p}function ro(t,e,n,r,i){let s=t.data[e];if(s===null)s=Vk(t,e,n,r,i),TO()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=IO();s.injectorIndex=o===null?-1:o.injectorIndex}return Oi(s,!0),s}function Vk(t,e,n,r,i){let s=qb(),o=jg(),a=o?s:s&&s.parent,u=t.data[e]=Hk(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function kT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function FT(t,e,n,r,i){let s=to(),o=r&2;try{Ri(-1),o&&e.length>Nn&&MT(t,e,Nn,!1),An(o?2:0,i),n(r,i)}finally{Ri(s),An(o?3:1,i)}}function nm(t,e,n){if(Lg(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{ye(r)}}}function rm(t,e,n){$b()&&(Qk(t,e,n,sn(n,e)),(n.flags&64)===64&&UT(t,e,n))}function im(t,e,n=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function LT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sm(t,e,n,r,i,s,o,a,u,l,h){let p=Nn+r,m=p+i,I=Uk(p,m),S=typeof l=="function"?l():l;return I[ae]={type:t,blueprint:I,template:n,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Uk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:qr);return n}function jk(t,e,n,r){let s=r.get(sk,mT)||n===xn.ShadowDom,o=t.selectRootElement(e,s);return Bk(o),o}function Bk(t){$k(t)}var $k=()=>null;function Hk(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Hb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jC(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=vt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?BC(r,n,l,a,u):BC(r,n,l,a)}return r}function BC(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function qk(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,I=m?m.inputs:null,S=m?m.outputs:null;u=jC(0,p.inputs,h,u,I),l=jC(1,p.outputs,h,l,S);let R=u!==null&&o!==null&&!Pg(e)?o1(u,h,o):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Gk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function om(t,e,n,r,i,s,o,a){let u=sn(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(cm(t,n,h,r,i),Kl(e)&&Wk(n,e.index)):e.type&3?(r=Gk(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function Wk(t,e){let n=Hr(e,t);n[W]&16||(n[W]|=64)}function am(t,e,n,r){if($b()){let i=r===null?null:{"":-1},s=Jk(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&VT(t,e,n,o,i,a),i&&Xk(n,r,i)}n.mergedAttrs=Ma(n.mergedAttrs,n.attrs)}function VT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Xp(Al(n,e),t,r[l].type);e1(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=kT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Ma(n.mergedAttrs,h.hostAttrs),t1(t,n,e,u,h),Zk(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}qk(t,n,s)}function zk(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Kk(o)!=a&&o.push(a),o.push(n,r,s)}}function Kk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Qk(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Kl(n)&&n1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Al(n,e),jr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ys(e,t,a,n);if(jr(l,e),o!==null&&s1(e,a-i,l,u,n,o),Ur(u)){let h=Hr(n.index,e);h[yn]=Ys(e,t,a,n)}}}function UT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=SO();try{Ri(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Yp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Yk(u,l)}}finally{Ri(-1),Yp(o)}}function Yk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Jk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(wb(e,o.selectors,!1))if(r||(r=[]),Ur(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;sg(t,e,u)}else r.unshift(o),sg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function sg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Xk(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new V(-301,!1);r.push(e[i],s)}}}function Zk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ur(e)&&(n[""]=t)}}function e1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function t1(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Hs(i.type,!0)),o=new xi(s,Ur(i),U);t.blueprint[r]=o,n[r]=o,zk(t,e,r,kT(t,n,i.hostVars,qr),i)}function n1(t,e,n){let r=sn(e,t),i=LT(n),s=t[_n].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=od(t,sd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function r1(t,e,n,r,i,s){let o=sn(t,e);i1(e[Oe],o,s,t.value,n,r,i)}function i1(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Bl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function s1(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];OT(r,n,u,l,h,p)}}function o1(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function jT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function BT(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Gb(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function od(t,e){return t[Fa]?t[RC][mn]=e:t[Fa]=e,t[RC]=e,e}function og(t,e,n){Gb(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function a1(t){return t[ka]||(t[ka]=[])}function c1(t){return t.cleanup||(t.cleanup=[])}function $T(t,e){let n=t[zs],r=n?n.get(Pn,null):null;r&&r.handleError(e)}function cm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];OT(h,l,r,a,u,i)}}function u1(t,e,n){let r=Vb(e,t);_k(t[Oe],r,n)}function l1(t,e){let n=Hr(e,t),r=n[ae];d1(r,n);let i=n[or];i!==null&&n[Oa]===null&&(n[Oa]=Yg(i,n[zs])),um(r,n,n[yn])}function d1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function um(t,e,n){$g(e);try{let r=t.viewQuery;r!==null&&og(1,r,n);let i=t.template;i!==null&&FT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ks]?.finishViewCreation(t),t.staticContentQueries&&BT(t,e),t.staticViewQueries&&og(2,t.viewQuery,n);let s=t.components;s!==null&&h1(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,Hg()}}function h1(t,e){for(let n=0;n<e.length;n++)l1(t,e[n])}function f1(t,e,n,r){let i=ye(null);try{let s=e.tView,a=t[W]&4096?4096:16,u=sd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Wl]=l;let h=t[Ks];return h!==null&&(u[Ks]=h.createEmbeddedView(s)),um(s,u,n),u}finally{ye(i)}}function $C(t,e){return!e||e.firstChild===null||lT(t)}function p1(t,e,n,r=!0){let i=e[ae];if(Ck(i,e,t,n),r){let o=ig(n,t),a=e[Oe],u=em(a,t[Ai]);u!==null&&Ik(i,t[qt],a,e,u,o)}let s=e[Oa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Nl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Mn(s)),ar(s)&&g1(s,r);let o=n.type;if(o&8)Nl(t,e,n.child,r);else if(o&32){let a=Zg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=AT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Va(e[vn]);Nl(u[ae],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function g1(t,e){for(let n=rn;n<t.length;n++){let r=t[n],i=r[ae].firstChild;i!==null&&Nl(r[ae],r,i,e)}t[Ai]!==t[or]&&e.push(t[Ai])}var HT=[];function m1(t){return t[Si]??y1(t)}function y1(t){let e=HT.pop()??Object.create(v1);return e.lView=t,e}function _1(t){t.lView[Si]!==t&&(t.lView=null,HT.push(t))}var v1=Ie(F({},qE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{La(t.lView)},consumerOnSignalRead(){this.lView[Si]=this}}),qT=100;function GT(t,e=!0,n=0){let r=t[_n],i=r.rendererFactory,s=!1;s||i.begin?.();try{w1(t,n)}catch(o){throw e&&$T(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function w1(t,e){ag(t,e);let n=0;for(;Ug(t);){if(n===qT)throw new V(103,!1);n++,ag(t,1)}}function I1(t,e,n,r){let i=e[W];if((i&256)===256)return;let s=!1;!s&&e[_n].inlineEffectRunner?.flush(),$g(e);let o=null,a=null;!s&&E1(t)&&(a=m1(e),o=GE(a));try{jb(e),CO(t.bindingStartIndex),n!==null&&FT(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&ml(e,p,null)}else{let p=t.preOrderHooks;p!==null&&yl(e,p,0,null),Rp(e,0)}if(C1(e),WT(e,0),t.contentQueries!==null&&BT(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&ml(e,p)}else{let p=t.contentHooks;p!==null&&yl(e,p,1),Rp(e,1)}Lk(t,e);let l=t.components;l!==null&&KT(e,l,0);let h=t.viewQuery;if(h!==null&&og(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&ml(e,p)}else{let p=t.viewHooks;p!==null&&yl(e,p,2),Rp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ap]){for(let p of e[Ap])p();e[Ap]=null}s||(e[W]&=-73)}catch(u){throw La(e),u}finally{a!==null&&(WE(a,o),_1(a)),Hg()}}function E1(t){return t.type!==2}function WT(t,e){for(let n=hT(t);n!==null;n=fT(n))for(let r=rn;r<n.length;r++){let i=n[r];zT(i,e)}}function C1(t){for(let e=hT(t);e!==null;e=fT(e)){if(!(e[W]&Fg.HasTransplantedViews))continue;let n=e[Tl];for(let r=0;r<n.length;r++){let i=n[r],s=i[wt];fO(i)}}}function b1(t,e,n){let r=Hr(e,t);zT(r,n)}function zT(t,e){Vg(t)&&ag(t,e)}function ag(t,e){let r=t[ae],i=t[W],s=t[Si],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&rp(s)),s&&(s.dirty=!1),t[W]&=-9217,o)I1(r,t,r.template,t[yn]);else if(i&8192){WT(t,1);let a=r.components;a!==null&&KT(t,a,1)}}function KT(t,e,n){for(let r=0;r<e.length;r++)b1(t,e[r],n)}function lm(t){for(t[_n].changeDetectionScheduler?.notify();t;){t[W]|=64;let e=Va(t);if(iO(t)&&!e)return t;t=e}return null}var Ni=class{get rootNodes(){let e=this._lView,n=e[ae];return Nl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[yn]}set context(e){this._lView[yn]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wt];if(ar(e)){let n=e[bl],r=n?n.indexOf(this):-1;r>-1&&(rg(e,r),El(n,r))}this._attachedToViewContainer=!1}bT(this._lView[ae],this._lView)}onDestroy(e){Bb(this._lView,e)}markForCheck(){lm(this._cdRefInjectingView||this._lView)}detach(){this._lView[W]&=-129}reattach(){Qp(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,GT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ET(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e,Qp(this._lView)}},ad=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=S1;let t=e;return t})(),T1=ad,D1=class extends T1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=f1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ni(i)}};function S1(){return A1(Mt(),ve())}function A1(t,e){return t.type&4?new D1(e,t,td(t,e)):null}var tK=new RegExp(`^(\\d+)*(${rk}|${nk})*(.*)`);var R1=()=>null;function HC(t,e){return R1(t,e)}var Ml=class{},cg=class{},Pl=class{};function x1(t){let e=Error(`No component factory found for ${xt(t)}.`);return e[N1]=t,e}var N1="ngComponent";var ug=class{resolveComponentFactory(e){throw x1(e)}},cd=(()=>{let e=class e{};e.NULL=new ug;let t=e;return t})(),Ua=class{},an=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>M1();let t=e;return t})();function M1(){let t=ve(),e=Mt(),n=Hr(e.index,t);return(Ti(n)?n:t)[Oe]}var P1=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Op={};var qC=new Set;function dm(t){qC.has(t)||(qC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function GC(...t){}function O1(){let t=typeof bi.requestAnimationFrame=="function",e=bi[t?"requestAnimationFrame":"setTimeout"],n=bi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ce=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ge(!1),this.onMicrotaskEmpty=new Ge(!1),this.onStable=new Ge(!1),this.onError=new Ge(!1),typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=O1().nativeRequestAnimationFrame,L1(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,k1,GC,GC);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},k1={};function hm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function F1(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(bi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,lg(t),t.isCheckStableRunning=!0,hm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),lg(t))}function L1(t){let e=()=>{F1(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(V1(a))return n.invokeTask(i,s,o,a);try{return WC(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),zC(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return WC(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),zC(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,lg(t),hm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function lg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function WC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zC(t){t._nesting--,hm(t)}function V1(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var js=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(js||{}),U1={destroy(){}};function fm(t,e){!e&&nO(fm);let n=e?.injector??k(ft);if(!gk(n))return U1;dm("NgAfterNextRender");let r=n.get(pm),i=r.handler??=new hg,s=e?.phase??js.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(Wg).onDestroy(o),u=sr(n,()=>new dg(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var dg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=k(ce),this.errorHandler=k(Pn,{optional:!0}),k(Ml,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},hg=class{constructor(){this.executingCallbacks=!1,this.buckets={[js.EarlyRead]:new Set,[js.Write]:new Set,[js.MixedReadWrite]:new Set,[js.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},pm=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Ol(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=vC(i,a);else if(s==2){let u=a,l=e[++o];r=vC(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var kl=class extends cd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Vr(e);return new Js(n,this.ngModule)}};function KC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function j1(t){let e=t.toLowerCase();return e==="svg"?cO:e==="math"?uO:null}var fg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=$l(r);let i=this.injector.get(e,Op,r);return i!==Op||n===Op?i:this.parentInjector.get(e,n,r)}},Js=class extends Pl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=KC(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return KC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=BP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof Ht?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new fg(e,o):e,u=a.get(Ua,null);if(u===null)throw new V(407,!1);let l=a.get(P1,null),h=a.get(pm,null),p=a.get(Ml,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},I=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=r?jk(I,r,this.componentDef.encapsulation,a):IT(I,S,j1(S)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let L=null;R!==null&&(L=Yg(R,a,!0));let J=sm(0,null,null,1,0,null,null,null,null,null,null),K=sd(null,J,null,N,null,null,m,I,a,null,L);$g(K);let me,ut;try{let _e=this.componentDef,C,y=null;_e.findHostDirectiveDefs?(C=[],y=new Map,_e.findHostDirectiveDefs(_e,C,y),C.push(_e)):C=[_e];let _=B1(K,R),E=$1(_,R,_e,C,K,m,I);ut=Ub(J,Nn),R&&G1(I,_e,R,r),n!==void 0&&W1(ut,this.ngContentSelectors,n),me=q1(E,_e,C,y,K,[z1]),um(J,K,null)}finally{Hg()}return new pg(this.componentType,me,td(ut,K),K,ut)}finally{ye(s)}}},pg=class extends cg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ni(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;cm(s[ae],s,i,e,n),this.previousInputValues.set(e,n);let o=Hr(this._tNode.index,s);lm(o)}}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function B1(t,e){let n=t[ae],r=Nn;return t[r]=e,ro(n,r,2,"#host",null)}function $1(t,e,n,r,i,s,o){let a=i[ae];H1(r,t,e,o);let u=null;e!==null&&(u=Yg(e,i[zs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=sd(i,LT(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&sg(a,t,r.length-1),od(i,p),i[t.index]=p}function H1(t,e,n,r){for(let i of t)e.mergedAttrs=Ma(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ol(e,e.mergedAttrs,!0),n!==null&&NT(r,n,e))}function q1(t,e,n,r,i,s){let o=Mt(),a=i[ae],u=sn(o,i);VT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ys(i,a,p,o);jr(m,i)}UT(a,i,o),u&&jr(u,i);let l=Ys(i,a,o.directiveStart+o.componentOffset,o);if(t[yn]=i[yn]=l,s!==null)for(let h of s)h(l,e);return nm(a,o,i),l}function G1(t,e,n,r){if(r)qp(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=$P(e.selectors[0]);i&&qp(t,n,i),s&&s.length>0&&xT(t,n,s.join(" "))}}function W1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function z1(){let t=Mt();ed(ve()[ae],t)}var io=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=K1;let t=e;return t})();function K1(){let t=Mt();return Y1(t,ve())}var Q1=io,QT=class extends Q1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return td(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){let e=qg(this._hostTNode,this._hostLView);if(Zb(e)){let n=Sl(e,this._hostLView),r=Dl(e),i=n[ae].data[r+8];return new Di(i,n)}else return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=QC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-rn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=HC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,$C(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!rO(e),a;if(o)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new Js(Vr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let R=(o?l:this.parentInjector).get(Ht,null);R&&(s=R)}let h=Vr(u.componentType??{}),p=HC(this._lContainer,h?.id??null),m=p?.firstChild??null,I=u.create(l,i,m,s);return this.insertImpl(I.hostView,a,$C(this._hostTNode,p)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[wt],l=new QT(u,u[qt],u[wt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return p1(o,i,s,r),e.attachToViewContainerRef(),pb(kp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=QC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);r&&(El(kp(this._lContainer),n),bT(r[ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);return r&&El(kp(this._lContainer),n)!=null?new Ni(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function QC(t){return t[bl]}function kp(t){return t[bl]||(t[bl]=[])}function Y1(t,e){let n,r=e[t.index];return ar(r)?n=r:(n=jT(r,e,null,t),e[t.index]=n,od(e,n)),X1(n,e,t,r),new QT(n,t,e)}function J1(t,e){let n=t[Oe],r=n.createComment(""),i=sn(e,t),s=em(n,i);return xl(n,s,r,Rk(n,i),!1),r}var X1=tF,Z1=()=>!1;function eF(t,e,n){return Z1(t,e,n)}function tF(t,e,n,r){if(t[Ai])return;let i;n.type&8?i=Mn(r):i=J1(e,n),t[Ai]=i}function nF(t){return typeof t=="function"&&t[np]!==void 0}function YT(t){return nF(t)&&typeof t.set=="function"}function rF(t){return Object.getPrototypeOf(t.prototype).constructor}function ur(t){let e=rF(t.type),n=!0,r=[t];for(;e;){let i;if(Ur(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=fl(t.inputs),o.inputTransforms=fl(t.inputTransforms),o.declaredInputs=fl(t.declaredInputs),o.outputs=fl(t.outputs);let a=i.hostBindings;a&&cF(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&oF(t,u),l&&aF(t,l),iF(t,i),aP(t.outputs,i.outputs),Ur(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===ur&&(n=!1)}}e=Object.getPrototypeOf(e)}sF(r)}function iF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function sF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ma(i.hostAttrs,n=Ma(n,i.hostAttrs))}}function fl(t){return t===qs?{}:t===nn?[]:t}function oF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function aF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function cF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gm(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Br=class{},ja=class{};var gg=class extends Br{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kl(this);let i=bb(e);this._bootstrapComponents=wT(i.bootstrap),this._r3Injector=cT(e,n,[{provide:Br,useValue:this},{provide:cd,useValue:this.componentFactoryResolver},...r],xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mg=class extends ja{constructor(e){super(),this.moduleType=e}create(e){return new gg(this.moduleType,e,[])}};var Fl=class extends Br{constructor(e){super(),this.componentFactoryResolver=new kl(this),this.instance=null;let n=new Pa([...e.providers,{provide:Br,useValue:this},{provide:cd,useValue:this.componentFactoryResolver}],e.parent||kg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ud(t,e,n=null){return new Fl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var ld=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JT(t){return mm(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function uF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function mm(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function lF(t,e,n){return t[e]=n}function so(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function dF(t){return(t.flags&32)===32}function hF(t,e,n,r,i,s,o,a,u){let l=e.consts,h=ro(e,t,4,o||null,Qs(l,a));am(e,n,h,Qs(l,u)),ed(e,h);let p=h.tView=sm(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Gr(t,e,n,r,i,s,o,a){let u=ve(),l=ht(),h=t+Nn,p=l.firstCreatePass?hF(h,l,u,e,n,r,i,s,o):l.data[h];Oi(p,!1);let m=fF(l,u,p,t);Xl()&&rd(l,u,m,p),jr(m,u);let I=jT(m,u,m,p);return u[h]=I,od(u,I),eF(I,p,u),Ql(p)&&rm(l,u,p),o!=null&&im(u,p,a),Gr}var fF=pF;function pF(t,e,n,r){return Zl(!0),e[Oe].createComment("")}function kn(t,e,n,r){let i=ve(),s=Yl();if(so(i,s,e)){let o=ht(),a=Jl();r1(a,i,t,e,n,r)}return kn}function XT(t,e,n,r){return so(t,Yl(),n)?e+Bl(n)+r:qr}function pl(t,e){return t<<17|e<<2}function Mi(t){return t>>17&32767}function gF(t){return(t&2)==2}function mF(t,e){return t&131071|e<<17}function yg(t){return t|2}function Xs(t){return(t&131068)>>2}function Fp(t,e){return t&-131069|e<<2}function yF(t){return(t&1)===1}function _g(t){return t|1}function _F(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Mi(o),u=Xs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Ha(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Mi(t[a+1]);t[r+1]=pl(m,a),m!==0&&(t[m+1]=Fp(t[m+1],r)),t[a+1]=mF(t[a+1],r)}else t[r+1]=pl(a,0),a!==0&&(t[a+1]=Fp(t[a+1],r)),a=r;else t[r+1]=pl(u,0),a===0?a=r:t[u+1]=Fp(t[u+1],r),u=r;l&&(t[r+1]=yg(t[r+1])),YC(t,h,r,!0),YC(t,h,r,!1),vF(e,h,t,r,s),o=pl(a,u),s?e.classBindings=o:e.styleBindings=o}function vF(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ha(s,e)>=0&&(n[r+1]=_g(n[r+1]))}function YC(t,e,n,r){let i=t[n+1],s=e===null,o=r?Mi(i):Xs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];wF(u,e)&&(a=!0,t[o+1]=r?_g(l):yg(l)),o=r?Mi(l):Xs(l)}a&&(t[n+1]=r?yg(i):_g(i))}function wF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ha(t,e)>=0:!1}function Gt(t,e,n){let r=ve(),i=Yl();if(so(r,i,e)){let s=ht(),o=Jl();om(s,o,r,t,e,r[Oe],n,!1)}return Gt}function JC(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";cm(t,n,s[o],o,r)}function dd(t,e,n){return ZT(t,e,n,!1),dd}function wn(t,e){return ZT(t,e,null,!0),wn}function ZT(t,e,n,r){let i=ve(),s=ht(),o=bO(2);if(s.firstUpdatePass&&EF(s,t,o,r),e!==qr&&so(i,o,e)){let a=s.data[to()];SF(s,a,i,i[Oe],t,i[o+1]=AF(e,n),r,o)}}function IF(t,e){return e>=t.expandoStartIndex}function EF(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[to()],o=IF(t,n);RF(s,r)&&e===null&&!o&&(e=!1),e=CF(i,s,e,r),_F(i,s,e,n,o,r)}}function CF(t,e,n,r){let i=AO(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lp(null,t,e,n,r),n=Ba(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Lp(i,t,e,n,r),s===null){let u=bF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lp(null,t,e,u[1],r),u=Ba(u,e.attrs,r),TF(t,e,r,u))}else s=DF(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function bF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Xs(r)!==0)return t[Mi(r)]}function TF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Mi(i)]=r}function DF(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ba(r,o,n)}return Ba(r,e.attrs,n)}function Lp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ba(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),AP(t,o,n?!0:e[++s]))}return t===void 0?null:t}function SF(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=yF(l)?XC(u,e,n,i,Xs(l),o):void 0;if(!Ll(h)){Ll(s)||gF(l)&&(s=XC(u,null,n,i,a,o));let p=Vb(to(),n);kk(r,o,p,i,s)}}function XC(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===qr&&(m=p?nn:void 0);let I=p?Dp(m,r):h===r?m:void 0;if(l&&!Ll(I)&&(I=Dp(u,r)),Ll(I)&&(a=I,o))return a;let S=t[i+1];i=o?Mi(S):Xs(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Dp(u,r))}return a}function Ll(t){return t!==void 0}function AF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=xt(Wa(t)))),t}function RF(t,e){return(t.flags&(e?8:16))!==0}function xF(t,e,n,r,i,s){let o=e.consts,a=Qs(o,i),u=ro(e,t,2,r,a);return am(e,n,u,Qs(o,s)),u.attrs!==null&&Ol(u,u.attrs,!1),u.mergedAttrs!==null&&Ol(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Q(t,e,n,r){let i=ve(),s=ht(),o=Nn+t,a=i[Oe],u=s.firstCreatePass?xF(o,s,i,e,n,r):s.data[o],l=NF(s,i,u,a,e,t);i[o]=l;let h=Ql(u);return Oi(u,!0),NT(a,l,u),!dF(u)&&Xl()&&rd(s,i,l,u),mO()===0&&jr(l,i),yO(),h&&(rm(s,i,u),nm(s,u,i)),r!==null&&im(i,u),Q}function Z(){let t=Mt();jg()?Bg():(t=t.parent,Oi(t,!1));let e=t;vO(e)&&wO(),_O();let n=ht();return n.firstCreatePass&&(ed(n,t),Lg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&kO(e)&&JC(n,e,ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&FO(e)&&JC(n,e,ve(),e.stylesWithoutHost,!1),Z}function Ze(t,e,n,r){return Q(t,e,n,r),Z(),Ze}var NF=(t,e,n,r,i,s)=>(Zl(!0),IT(r,i,NO()));function MF(t,e,n,r,i){let s=e.consts,o=Qs(s,r),a=ro(e,t,8,"ng-container",o);o!==null&&Ol(a,o,!0);let u=Qs(s,i);return am(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function hd(t,e,n){let r=ve(),i=ht(),s=t+Nn,o=i.firstCreatePass?MF(s,i,r,e,n):i.data[s];Oi(o,!0);let a=PF(i,r,o,t);return r[s]=a,Xl()&&rd(i,r,a,o),jr(a,r),Ql(o)&&(rm(i,r,o),nm(i,o,r)),n!=null&&im(r,o),hd}function fd(){let t=Mt(),e=ht();return jg()?Bg():(t=t.parent,Oi(t,!1)),e.firstCreatePass&&(ed(e,t),Lg(t)&&e.queries.elementEnd(t)),fd}var PF=(t,e,n,r)=>(Zl(!0),vk(e[Oe],""));function za(){return ve()}var Vl="en-US";var OF=Vl;function kF(t){typeof t=="string"&&(OF=t.toLowerCase().replace(/_/g,"-"))}function ze(t,e,n,r){let i=ve(),s=ht(),o=Mt();return eD(s,i,i[Oe],o,t,e,r),ze}function FF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ka],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function eD(t,e,n,r,i,s,o){let a=Ql(r),l=t.firstCreatePass&&c1(t),h=e[yn],p=a1(e),m=!0;if(r.type&3||o){let R=sn(r,e),N=o?o(R):R,L=p.length,J=o?me=>o(Mn(me[r.index])):r.index,K=null;if(!o&&a&&(K=FF(t,e,i,r.index)),K!==null){let me=K.__ngLastListenerFn__||K;me.__ngNextListenerFn__=s,K.__ngLastListenerFn__=s,m=!1}else{s=eb(r,e,h,s,!1);let me=n.listen(N,i,s);p.push(s,me),l&&l.push(i,J,L,L+1)}}else s=eb(r,e,h,s,!1);let I=r.outputs,S;if(m&&I!==null&&(S=I[i])){let R=S.length;if(R)for(let N=0;N<R;N+=2){let L=S[N],J=S[N+1],ut=e[L][J].subscribe(s),_e=p.length;p.push(s,ut),l&&l.push(i,r.index,_e,-(_e+1))}}}function ZC(t,e,n,r){let i=ye(null);try{return An(6,e,n),n(r)!==!1}catch(s){return $T(t,s),!1}finally{An(7,e,n),ye(i)}}function eb(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Hr(t.index,e):e;lm(a);let u=ZC(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=ZC(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function Fn(t=1){return xO(t)}function LF(t,e){let n=null,r=FP(t);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){n=i;continue}if(r===null?wb(t,s,!0):UP(r,s))return i}return n}function ym(t){let e=ve()[vn][qt];if(!e.projection){let n=t?t.length:1,r=e.projection=DP(n,null),i=r.slice(),s=e.child;for(;s!==null;){let o=t?LF(s,t):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function _m(t,e=0,n){let r=ve(),i=ht(),s=ro(i,Nn+t,16,null,n||null);s.projection===null&&(s.projection=e),Bg(),(!r[Oa]||Hb())&&(s.flags&32)!==32&&Pk(i,r,s)}function vm(t,e,n){return tD(t,"",e,"",n),vm}function tD(t,e,n,r,i){let s=ve(),o=XT(s,e,n,r);if(o!==qr){let a=ht(),u=Jl();om(a,u,s,t,o,s[Oe],i,!1)}return tD}function je(t,e=""){let n=ve(),r=ht(),i=t+Nn,s=r.firstCreatePass?ro(r,i,1,e,null):r.data[i],o=VF(r,n,s,e,t);n[i]=o,Xl()&&rd(r,n,o,s),Oi(s,!1)}var VF=(t,e,n,r,i)=>(Zl(!0),yk(e[Oe],r));function pd(t){return nD("",t,""),pd}function nD(t,e,n){let r=ve(),i=XT(r,t,e,n);return i!==qr&&u1(r,to(),i),nD}function ki(t,e,n){YT(e)&&(e=e());let r=ve(),i=Yl();if(so(r,i,e)){let s=ht(),o=Jl();om(s,o,r,t,e,r[Oe],n,!1)}return ki}function oo(t,e){let n=YT(t);return n&&t.set(e),n}function Fi(t,e){let n=ve(),r=ht(),i=Mt();return eD(r,n,n[Oe],i,t,e),Fi}function UF(t,e,n){let r=ht();if(r.firstCreatePass){let i=Ur(t);vg(n,r.data,r.blueprint,i,!0),vg(e,r.data,r.blueprint,i,!1)}}function vg(t,e,n,r,i){if(t=Rt(t),Array.isArray(t))for(let s=0;s<t.length;s++)vg(t[s],e,n,r,i);else{let s=ht(),o=ve(),a=Mt(),u=Ws(t)?t:Rt(t.provide),l=xb(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ws(t)||!t.multi){let I=new xi(l,i,U),S=Up(u,e,i?h:h+m,p);S===-1?(Xp(Al(a,o),s,u),Vp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(I),o.push(I)):(n[S]=I,o[S]=I)}else{let I=Up(u,e,h+m,p),S=Up(u,e,h,h+m),R=I>=0&&n[I],N=S>=0&&n[S];if(i&&!N||!i&&!R){Xp(Al(a,o),s,u);let L=$F(i?BF:jF,n.length,i,r,l);!i&&N&&(n[S].providerFactory=L),Vp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),o.push(L)}else{let L=rD(n[i?S:I],l,!i&&r);Vp(s,t,I>-1?I:S,L)}!i&&r&&N&&n[S].componentProviders++}}}function Vp(t,e,n,r){let i=Ws(e),s=QP(e);if(i||s){let u=(s?Rt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function rD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Up(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function jF(t,e,n,r){return wg(this.multi,[])}function BF(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ys(n,n[ae],this.providerFactory.index,r);s=a.slice(0,o),wg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],wg(i,s);return s}function wg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function $F(t,e,n,r,i){let s=new xi(t,n,U);return s.multi=[],s.index=e,s.componentProviders=0,rD(s,i,r&&!n),s}function Ka(t,e=[]){return n=>{n.providersResolver=(r,i)=>UF(r,i?i(t):t,e)}}var HF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Sb(!1,r.type),s=i.length>0?ud([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(z(Ht))});let t=e;return t})();function cn(t){dm("NgStandalone"),t.getStandaloneInjector=e=>e.get(HF).getOrCreateStandaloneInjector(t)}function iD(t,e,n,r){return GF(ve(),EO(),t,e,n,r)}function qF(t,e){let n=t[e];return n===qr?void 0:n}function GF(t,e,n,r,i,s){let o=e+n;return so(t,o,i)?lF(t,o+1,s?r.call(s,i):r(i)):qF(t,o+1)}var ir=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sD=new ir("17.3.5"),gd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var oD=new $("");function Li(t){return!!t&&typeof t.then=="function"}function aD(t){return!!t&&typeof t.subscribe=="function"}var md=new $(""),cD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(md,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Li(o))r.push(o);else if(aD(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yd=new $("");function WF(){KE(()=>{throw new V(600,!1)})}function zF(t){return t.isBoundToModule}function KF(t,e,n){try{let r=n();return Li(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Qa=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(uT),this.afterRenderEffectManager=k(pm),this.externalTestViews=new Set,this.beforeRender=new _t,this.afterTick=new _t,this.componentTypes=[],this.components=[],this.isStable=k(ld).hasPendingTasks.pipe(se(r=>!r)),this._injector=k(Ht)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Pl;if(!this._injector.get(cD).done){let I=!s&&Cb(r),S=!1;throw new V(405,S)}let a;s?a=r:a=this._injector.get(cd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=zF(a)?void 0:this._injector.get(Br),l=i||a.selector,h=a.create(ft.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(oD,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),jp(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new V(101,!1);let i=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,ye(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===qT)throw new V(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)QF(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ig(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ig(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;jp(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(yd,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>jp(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new V(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function QF(t,e,n){!e&&!Ig(t)||YF(t,n,e)}function Ig(t){return Ug(t)}function YF(t,e,n){let r;n?(r=0,t[W]|=1024):t[W]&64?r=0:r=1,GT(t,e,r)}var Eg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_d=(()=>{let e=class e{compileModuleSync(r){return new mg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=bb(r),o=wT(s.declarations).reduce((a,u)=>{let l=Vr(u);return l&&a.push(new Js(l)),a},[]);return new Eg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JF=(()=>{let e=class e{constructor(){this.zone=k(ce),this.applicationRef=k(Qa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XF(t){return[{provide:ce,useFactory:t},{provide:Gs,multi:!0,useFactory:()=>{let e=k(JF,{optional:!0});return()=>e.initialize()}},{provide:Gs,multi:!0,useFactory:()=>{let e=k(nL);return()=>{e.initialize()}}},{provide:uT,useFactory:ZF}]}function ZF(){let t=k(ce),e=k(Pn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function eL(t){let e=XF(()=>new ce(tL(t)));return ql([[],e])}function tL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var nL=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=k(ce),this.pendingTasks=k(ld)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rL(){return typeof $localize<"u"&&$localize.locale||Vl}var wm=new $("",{providedIn:"root",factory:()=>k(wm,ee.Optional|ee.SkipSelf)||rL()});var uD=new $("");var vl=null;function iL(t=[],e){return ft.create({name:e,providers:[{provide:Gl,useValue:"platform"},{provide:uD,useValue:new Set([()=>vl=null])},...t]})}function sL(t=[]){if(vl)return vl;let e=iL(t);return vl=e,WF(),oL(e),e}function oL(t){t.get(Kg,null)?.forEach(n=>n())}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aL;let t=e;return t})();function aL(t){return cL(Mt(),ve(),(t&16)===16)}function cL(t,e,n){if(Kl(t)&&!n){let r=Hr(t.index,e);return new Ni(r,r)}else if(t.type&47){let r=e[vn];return new Ni(r,e)}return null}var Cg=class{constructor(){}supports(e){return JT(e)}create(e){return new bg(e)}},uL=(t,e)=>e,bg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<tb(r,i,s)?n:r,a=tb(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let I=m<s.length?s[m]:s[m]=0,S=I+m;h<=S&&S<l&&(s[m]=I+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!JT(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,uF(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Tg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ul),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ul),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Dg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Ul=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Dg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tb(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Sg=class{constructor(){}supports(e){return e instanceof Map||mm(e)}create(){return new Ag}},Ag=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||mm(e)))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Rg(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Rg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function nb(){return new Im([new Cg])}var Im=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||nb()),deps:[[e,new Hl,new ke]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new V(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:nb});let t=e;return t})();function rb(){return new Em([new Sg])}var Em=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||rb()),deps:[[e,new Hl,new ke]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new V(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:rb});let t=e;return t})();function lD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=sL(r),s=[eL(),...n||[]],a=new Fl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ce);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Pn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:I=>{l.handleError(I)}})});let p=()=>a.destroy(),m=i.get(uD);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),KF(l,u,()=>{let I=a.get(cD);return I.runInitializers(),I.donePromise.then(()=>{let S=a.get(wm,Vl);kF(S||Vl);let R=a.get(Qa);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Wr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function dD(t){let e=Vr(t);if(!e)return null;let n=new Js(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var mD=null;function dr(){return mD}function yD(t){mD??=t}var vd=class{};var et=new $(""),Sm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(lL),providedIn:"platform"});let t=e;return t})(),_D=new $(""),lL=(()=>{let e=class e extends Sm{constructor(){super(),this._doc=k(et),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dr().getBaseHref(this._doc)}onPopState(r){let i=dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Am(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function hD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function lr(t){return t&&t[0]!=="?"?"?"+t:t}var hr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(Rm),providedIn:"root"});let t=e;return t})(),vD=new $(""),Rm=(()=>{let e=class e extends hr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Am(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+lr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+lr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+lr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Sm),z(vD,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wD=(()=>{let e=class e extends hr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Am(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Sm),z(vD,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),ao=(()=>{let e=class e{constructor(r){this._subject=new Ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=fL(hD(fD(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+lr(i))}normalize(r){return e.stripTrailingSlash(hL(this._basePath,fD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+lr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+lr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=lr,e.joinWithSlash=Am,e.stripTrailingSlash=hD,e.\u0275fac=function(i){return new(i||e)(z(hr))},e.\u0275prov=B({token:e,factory:()=>dL(),providedIn:"root"});let t=e;return t})();function dL(){return new ao(z(hr))}function hL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function fD(t){return t.replace(/\/index.html$/,"")}function fL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ID(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Cm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Id=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Cm(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),pD(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);pD(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(U(io),U(ad),U(Im))},e.\u0275dir=Xe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function pD(t,e){t.context.$implicit=e.item}var ED=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new bm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){gD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){gD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(U(io),U(ad))},e.\u0275dir=Xe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),bm=class{constructor(){this.$implicit=null,this.ngIf=null}};function gD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${xt(e)}'.`)}var CD=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:On.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(U(cr),U(Em),U(an))},e.\u0275dir=Xe({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();var Ui=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ye({});let t=e;return t})(),xm="browser",pL="server";function Nm(t){return t===xm}function Mm(t){return t===pL}var bD=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>Nm(k(on))?new Tm(k(et),window):new Dm});let t=e;return t})(),Tm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=gL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function gL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Dm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},wd=class{};var Fm=class extends vd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lm=class t extends Fm{static makeCurrent(){yD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=mL();return n==null?null:yL(n)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ID(document.cookie,e)}},Ya=null;function mL(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}function yL(t){return new URL(t,document.baseURI).pathname}var _L=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Vm=new $(""),AD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new V(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(Vm),z(ce))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Ed=class{constructor(e){this._doc=e}},Om="ng-app-id",RD=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mm(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Om}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Om),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Om,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(et),z(zg),z(Qg,8),z(on))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),km={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jm=/%COMP%/g,xD="%COMP%",vL=`_nghost-${xD}`,wL=`_ngcontent-${xD}`,IL=!0,EL=new $("",{providedIn:"root",factory:()=>IL});function CL(t){return wL.replace(jm,t)}function bL(t){return vL.replace(jm,t)}function ND(t,e){return e.map(n=>n.replace(jm,t))}var TD=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Mm(u),this.defaultRenderer=new Ja(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xn.ShadowDom&&(i=Ie(F({},i),{encapsulation:xn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Cd?s.applyToHost(r):s instanceof Xa&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case xn.Emulated:o=new Cd(l,h,i,this.appId,p,a,u,m);break;case xn.ShadowDom:return new Um(l,h,r,i,a,u,this.nonce,m);default:o=new Xa(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(AD),z(RD),z(zg),z(EL),z(et),z(on),z(ce),z(Qg))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Ja=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(km[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(DD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(DD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=km[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=km[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(n,r,i&On.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&On.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=dr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function DD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Um=class extends Ja{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ND(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xa=class extends Ja{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?ND(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cd=class extends Xa{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=CL(l),this.hostAttr=bL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},TL=(()=>{let e=class e extends Ed{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(z(et))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),SD=["alt","control","meta","shift"],DL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},AL=(()=>{let e=class e extends Ed{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),SD.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=DL[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),SD.forEach(a=>{if(a!==s){let u=SL[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(et))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function MD(t,e){return lD(F({rootComponent:t},RL(e)))}function RL(t){return{appProviders:[...OL,...t?.providers??[]],platformProviders:PL}}function xL(){Lm.makeCurrent()}function NL(){return new Pn}function ML(){return gT(document),document}var PL=[{provide:on,useValue:xm},{provide:Kg,useValue:xL,multi:!0},{provide:et,useFactory:ML,deps:[]}];var OL=[{provide:Gl,useValue:"root"},{provide:Pn,useFactory:NL,deps:[]},{provide:Vm,useClass:TL,multi:!0,deps:[et,ce,on]},{provide:Vm,useClass:AL,multi:!0,deps:[et]},TD,RD,AD,{provide:Ua,useExisting:TD},{provide:wd,useClass:_L,deps:[]},[]];var PD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(et))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var X="primary",pc=Symbol("RouteTitle"),Gm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function fo(t){return new Gm(t)}function FL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function LL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ln(t[n],e[n]))return!1;return!0}function Ln(t,e){let n=t?Wm(t):void 0,r=e?Wm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!$D(t[i],e[i]))return!1;return!0}function Wm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function $D(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function HD(t){return t.length>0?t[t.length-1]:null}function Jr(t){return vp(t)?t:Li(t)?Ne(Promise.resolve(t)):G(t)}var VL={exact:GD,subset:WD},qD={exact:UL,subset:jL,ignored:()=>!0};function OD(t,e,n){return VL[n.paths](t.root,e.root,n.matrixParams)&&qD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function UL(t,e){return Ln(t,e)}function GD(t,e,n){if(!Bi(t.segments,e.segments)||!Dd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!GD(t.children[r],e.children[r],n))return!1;return!0}function jL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$D(t[n],e[n]))}function WD(t,e,n){return zD(t,e,e.segments,n)}function zD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Bi(i,n)||e.hasChildren()||!Dd(i,n,r))}else if(t.segments.length===n.length){if(!Bi(t.segments,n)||!Dd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!WD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Bi(t.segments,i)||!Dd(t.segments,i,r)||!t.children[X]?!1:zD(t.children[X],e,s,r)}}function Dd(t,e,n){return e.every((r,i)=>qD[n](t[i].parameters,r.parameters))}var zr=class{constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){return HL.serialize(this)}},we=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sd(this)}},ji=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=fo(this.parameters),this._parameterMap}toString(){return QD(this)}};function BL(t,e){return Bi(t,e)&&t.every((n,r)=>Ln(n.parameters,e[r].parameters))}function Bi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $L(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var gc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new sc,providedIn:"root"});let t=e;return t})(),sc=class{parse(e){let n=new Km(e);return new zr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Za(e.root,!0)}`,r=WL(e.queryParams),i=typeof e.fragment=="string"?`#${qL(e.fragment)}`:"";return`${n}${r}${i}`}},HL=new sc;function Sd(t){return t.segments.map(e=>QD(e)).join("/")}function Za(t,e){if(!t.hasChildren())return Sd(t);if(e){let n=t.children[X]?Za(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==X&&r.push(`${i}:${Za(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$L(t,(r,i)=>i===X?[Za(t.children[X],!1)]:[`${i}:${Za(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${Sd(t)}/${n[0]}`:`${Sd(t)}/(${n.join("//")})`}}function KD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bd(t){return KD(t).replace(/%3B/gi,";")}function qL(t){return encodeURI(t)}function zm(t){return KD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ad(t){return decodeURIComponent(t)}function kD(t){return Ad(t.replace(/\+/g,"%20"))}function QD(t){return`${zm(t.path)}${GL(t.parameters)}`}function GL(t){return Object.entries(t).map(([e,n])=>`;${zm(e)}=${zm(n)}`).join("")}function WL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${bd(n)}=${bd(i)}`).join("&"):`${bd(n)}=${bd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var zL=/^[^\/()?;#]+/;function Bm(t){let e=t.match(zL);return e?e[0]:""}var KL=/^[^\/()?;=#]+/;function QL(t){let e=t.match(KL);return e?e[0]:""}var YL=/^[^=?&#]+/;function JL(t){let e=t.match(YL);return e?e[0]:""}var XL=/^[^&#]+/;function ZL(t){let e=t.match(XL);return e?e[0]:""}var Km=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new we(e,n)),r}parseSegment(){let e=Bm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ji(Ad(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=QL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Bm(this.remaining);i&&(r=i,this.capture(r))}e[Ad(n)]=Ad(r)}parseQueryParam(e){let n=JL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=ZL(this.remaining);o&&(r=o,this.capture(r))}let i=kD(n),s=kD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[X]:new we([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function YD(t){return t.segments.length>0?new we([],{[X]:t}):t}function JD(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=JD(i);if(r===X&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new we(t.segments,e);return eV(n)}function eV(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new we(t.segments.concat(e.segments),e.children)}return t}function po(t){return t instanceof zr}function tV(t,e,n=null,r=null){let i=XD(t);return ZD(i,e,n,r)}function XD(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new we(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=YD(r);return e??i}function ZD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return $m(i,i,i,n,r);let s=nV(e);if(s.toRoot())return $m(i,i,new we([],{}),n,r);let o=rV(s,i,t),a=o.processChildren?nc(o.segmentGroup,o.index,s.commands):t0(o.segmentGroup,o.index,s.commands);return $m(i,o.segmentGroup,a,n,r)}function Rd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function oc(t){return typeof t=="object"&&t!=null&&t.outlets}function $m(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=e0(t,e,n);let a=YD(JD(o));return new zr(a,s,i)}function e0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=e0(s,e,n)}),new we(t.segments,r)}var xd=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Rd(r[0]))throw new V(4003,!1);let i=r.find(oc);if(i&&i!==HD(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new xd(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new xd(n,e,r)}var lo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function rV(t,e,n){if(t.isAbsolute)return new lo(e,!0,0);if(!n)return new lo(e,!1,NaN);if(n.parent===null)return new lo(n,!0,0);let r=Rd(t.commands[0])?0:1,i=n.segments.length-1+r;return iV(n,i,t.numberOfDoubleDots)}function iV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new lo(r,!1,i-s)}function sV(t){return oc(t[0])?t[0].outlets:{[X]:t}}function t0(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return nc(t,e,n);let r=oV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new we(t.segments.slice(0,r.pathIndex),{});return s.children[X]=new we(t.segments.slice(r.pathIndex),t.children),nc(s,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?Qm(t,e,n):r.match?nc(t,0,i):Qm(t,e,n)}function nc(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=sV(n),i={};if(Object.keys(r).some(s=>s!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let s=nc(t.children[X],e,n);return new we(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=t0(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(t.segments,i)}}function oV(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(oc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!LD(u,l,o))return s;r+=2}else{if(!LD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(oc(s)){let u=aV(s.outlets);return new we(r,u)}if(i===0&&Rd(n[0])){let u=t.segments[e];r.push(new ji(u.path,FD(n[0]))),i++;continue}let o=oc(s)?s.outlets[X]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Rd(a)?(r.push(new ji(o,FD(a))),i+=2):(r.push(new ji(o,{})),i++)}return new we(r,{})}function aV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Qm(new we([],{}),0,r))}),e}function FD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function LD(t,e,n){return t==n.path&&Ln(e,n.parameters)}var rc="imperative",tt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(tt||{}),un=class{constructor(e,n){this.id=e,this.url=n}},go=class extends un{constructor(e,n,r="imperative",i=null){super(e,n),this.type=tt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vn=class extends un{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(zt||{}),Nd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Nd||{}),Kr=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qr=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=tt.NavigationSkipped}},ac=class extends un{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Md=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ym=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jm=class extends un{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xm=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zm=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ey=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ty=class{constructor(e){this.route=e,this.type=tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ny=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ry=class{constructor(e){this.snapshot=e,this.type=tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iy=class{constructor(e){this.snapshot=e,this.type=tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sy=class{constructor(e){this.snapshot=e,this.type=tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=tt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},cc=class{},uc=class{constructor(e){this.url=e}};var oy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new mc,this.attachRef=null}},mc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new oy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Od=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ay(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ay(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=cy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cy(e,this._root).map(n=>n.value)}};function ay(t,e){if(t===e.value)return e;for(let n of e.children){let r=ay(t,n);if(r)return r}return null}function cy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=cy(t,n);if(r.length)return r.unshift(e),r}return[]}var Wt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function uo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var kd=class extends Od{constructor(e,n){super(e),this.snapshot=n,_y(this,e)}toString(){return this.snapshot.toString()}};function n0(t){let e=cV(t),n=new dt([new ji("",{})]),r=new dt({}),i=new dt({}),s=new dt({}),o=new dt(""),a=new Yr(n,r,s,o,i,X,t,e.root);return a.snapshot=e.root,new kd(new Wt(a,[]),e)}function cV(t){let e={},n={},r={},i="",s=new lc([],e,r,i,n,X,t,null,{});return new Fd("",new Wt(s,[]))}var Yr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[pc]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>fo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>fo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&i0(i)&&(r.resolve[pc]=i.title),r}var lc=class{get title(){return this.data?.[pc]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Fd=class extends Od{constructor(e,n){super(n),this.url=e,_y(this,n)}toString(){return r0(this._root)}};function _y(t,e){e.value._routerState=t,e.children.forEach(n=>_y(t,n))}function r0(t){let e=t.children.length>0?` { ${t.children.map(r0).join(", ")} } `:"";return`${t.value}${e}`}function Hm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ln(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ln(e.params,n.params)||t.paramsSubject.next(n.params),LL(e.url,n.url)||t.urlSubject.next(n.url),Ln(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function uy(t,e){let n=Ln(t.params,e.params)&&BL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||uy(t.parent,e.parent))}function i0(t){return typeof t.title=="string"||t.title===null}var vy=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new Ge,this.deactivateEvents=new Ge,this.attachEvents=new Ge,this.detachEvents=new Ge,this.parentContexts=k(mc),this.location=k(io),this.changeDetector=k(Vi),this.environmentInjector=k(Ht),this.inputBinder=k(jd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new ly(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$r]});let t=e;return t})(),ly=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Yr?this.route:e===mc?this.childContexts:this.parent.get(e,n)}},jd=new $(""),VD=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Aa([i.queryParams,i.params,i.data]).pipe(en(([o,a,u],l)=>(u=F(F(F({},o),a),u),l===0?G(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=dD(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function uV(t,e,n){let r=dc(t,e._root,n?n._root:void 0);return new kd(r,e)}function dc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=lV(t,e,n);return new Wt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dc(t,a)),o}}let r=dV(e.value),i=e.children.map(s=>dc(t,s));return new Wt(r,i)}}function lV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return dc(t,r,i);return dc(t,r)})}function dV(t){return new Yr(new dt(t.url),new dt(t.params),new dt(t.queryParams),new dt(t.fragment),new dt(t.data),t.outlet,t.component,t)}var s0="ngNavigationCancelingError";function o0(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=po(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=a0(!1,zt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function a0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[s0]=!0,n.cancellationCode=e,n}function hV(t){return c0(t)&&po(t.url)}function c0(t){return!!t&&t[s0]}var fV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[cn],decls:1,vars:0,template:function(i,s){i&1&&Ze(0,"router-outlet")},dependencies:[vy],encapsulation:2});let t=e;return t})();function pV(t,e){return t.providers&&!t._injector&&(t._injector=ud(t.providers,e,`Route: ${t.path}`)),t._injector??e}function wy(t){let e=t.children&&t.children.map(wy),n=e?Ie(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=fV),n}function Un(t){return t.outlet||X}function gV(t,e){let n=t.filter(r=>Un(r)===e);return n.push(...t.filter(r=>Un(r)!==e)),n}function yc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mV=(t,e,n,r)=>se(i=>(new dy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),dy=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Hm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=uo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=uo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=uo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ry(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Hm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Hm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=yc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Ld=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ho=class{constructor(e,n){this.component=e,this.route=n}};function yV(t,e,n){let r=t._root,i=e?e._root:null;return ec(r,i,n,[r.value])}function _V(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function yo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ab(t)?t:e.get(t):r}function ec(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=uo(e);return t.children.forEach(o=>{vV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ic(a,n.getContext(o),i)),i}function vV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=wV(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ld(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ec(t,e,a?a.children:null,r,i):ec(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ho(a.outlet.component,o))}else o&&ic(e,a,i),i.canActivateChecks.push(new Ld(r)),s.component?ec(t,null,a?a.children:null,r,i):ec(t,null,n,r,i);return i}function wV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Bi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bi(t.url,e.url)||!Ln(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uy(t,e)||!Ln(t.queryParams,e.queryParams);case"paramsChange":default:return!uy(t,e)}}function ic(t,e,n){let r=uo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ic(o,e.children.getContext(s),n):ic(o,null,n):ic(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ho(e.outlet.component,i)):n.canDeactivateChecks.push(new ho(null,i)):n.canDeactivateChecks.push(new ho(null,i))}function _c(t){return typeof t=="function"}function IV(t){return typeof t=="boolean"}function EV(t){return t&&_c(t.canLoad)}function CV(t){return t&&_c(t.canActivate)}function bV(t){return t&&_c(t.canActivateChild)}function TV(t){return t&&_c(t.canDeactivate)}function DV(t){return t&&_c(t.canMatch)}function u0(t){return t instanceof nr||t?.name==="EmptyError"}var Td=Symbol("INITIAL_VALUE");function mo(){return en(t=>Aa(t.map(e=>e.pipe(rr(1),bp(Td)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Td)return Td;if(n===!1||n instanceof zr)return n}return!0}),Zt(e=>e!==Td),rr(1)))}function SV(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(Ie(F({},n),{guardsResult:!0})):AV(o,r,i,t).pipe(Ue(a=>a&&IV(a)?RV(r,s,t,e):G(a)),se(a=>Ie(F({},n),{guardsResult:a})))})}function AV(t,e,n,r){return Ne(t).pipe(Ue(i=>OV(i.component,i.route,n,e,r)),Sn(i=>i!==!0,!0))}function RV(t,e,n,r){return Ne(e).pipe(Ci(i=>ks(NV(i.route.parent,r),xV(i.route,r),PV(t,i.path,n),MV(t,i.route,n))),Sn(i=>i!==!0,!0))}function xV(t,e){return t!==null&&e&&e(new iy(t)),G(!0)}function NV(t,e){return t!==null&&e&&e(new ny(t)),G(!0)}function MV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>ul(()=>{let o=yc(e)??n,a=yo(s,o),u=CV(a)?a.canActivate(e,t):sr(o,()=>a(e,t));return Jr(u).pipe(Sn())}));return G(i).pipe(mo())}function PV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_V(o)).filter(o=>o!==null).map(o=>ul(()=>{let a=o.guards.map(u=>{let l=yc(o.node)??n,h=yo(u,l),p=bV(h)?h.canActivateChild(r,t):sr(l,()=>h(r,t));return Jr(p).pipe(Sn())});return G(a).pipe(mo())}));return G(s).pipe(mo())}function OV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=yc(e)??i,l=yo(a,u),h=TV(l)?l.canDeactivate(t,e,n,r):sr(u,()=>l(t,e,n,r));return Jr(h).pipe(Sn())});return G(o).pipe(mo())}function kV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=yo(o,t),u=EV(a)?a.canLoad(e,n):sr(t,()=>a(e,n));return Jr(u)});return G(s).pipe(mo(),l0(r))}function l0(t){return dp(qe(e=>{if(po(e))throw o0(t,e)}),se(e=>e===!0))}function FV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=yo(o,t),u=DV(a)?a.canMatch(e,n):sr(t,()=>a(e,n));return Jr(u)});return G(s).pipe(mo(),l0(r))}var hc=class{constructor(e){this.segmentGroup=e||null}},Vd=class extends Error{constructor(e){super(),this.urlTree=e}};function co(t){return Ps(new hc(t))}function LV(t){return Ps(new V(4e3,!1))}function VV(t){return Ps(a0(!1,zt.GuardRejected))}var hy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return LV(e.redirectTo);i=i.children[X]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Vd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new zr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new we(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UV(t,e,n,r,i){let s=Iy(t,e,n);return s.matched?(r=pV(e,r),FV(r,e,n,i).pipe(se(o=>o===!0?s:F({},fy)))):G(s)}function Iy(t,e,n){if(e.path==="**")return jV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},fy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||FL)(n,t,e);if(!i)return F({},fy);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function jV(t){return{matched:!0,parameters:t.length>0?HD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function UD(t,e,n,r){return n.length>0&&HV(t,n,r)?{segmentGroup:new we(e,$V(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&qV(t,n,r)?{segmentGroup:new we(t.segments,BV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function BV(t,e,n,r){let i={};for(let s of n)if(Bd(t,e,s)&&!r[Un(s)]){let o=new we([],{});i[Un(s)]=o}return F(F({},r),i)}function $V(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&Un(r)!==X){let i=new we([],{});n[Un(r)]=i}return n}function HV(t,e,n){return n.some(r=>Bd(t,e,r)&&Un(r)!==X)}function qV(t,e,n){return n.some(r=>Bd(t,e,r))}function Bd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function GV(t,e,n,r){return Un(t)!==r&&(r===X||!Bd(e,n,t))?!1:Iy(e,t,n).matched}function WV(t,e,n){return e.length===0&&!t.children[n]}var py=class{};function zV(t,e,n,r,i,s,o="emptyOnly"){return new gy(t,e,n,r,i,o,s).recognize()}var KV=31,gy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new hy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=UD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(n=>{let r=new lc([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),i=new Wt(r,n),s=new Fd("",i),o=tV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,X).pipe(Or(r=>{if(r instanceof Vd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=yy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(se(s=>s instanceof Wt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ne(i).pipe(Ci(s=>{let o=r.children[s],a=gV(n,s);return this.processSegmentGroup(e,a,o,s)}),Cp((s,o)=>(s.push(...o),s)),kr(null),Ep(),Ue(s=>{if(s===null)return co(r);let o=d0(s);return QV(o),G(o)}))}processSegment(e,n,r,i,s,o){return Ne(n).pipe(Ci(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Or(u=>{if(u instanceof hc)return G(null);throw u}))),Sn(a=>!!a),Or(a=>{if(u0(a))return WV(r,i,s)?G(new py):co(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return GV(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):co(i):co(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Iy(n,i,s);if(!a)return co(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KV&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ue(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=UV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(en(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(en(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,I=new lc(h,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,JV(r),Un(r),r.component??r._loadedComponent??null,r,XV(r)),{segmentGroup:S,slicedSegments:R}=UD(n,h,p,u);if(R.length===0&&S.hasChildren())return this.processChildren(l,u,S).pipe(se(L=>L===null?null:new Wt(I,L)));if(u.length===0&&R.length===0)return G(new Wt(I,[]));let N=Un(r)===s;return this.processSegment(l,u,S,R,N?X:s,!0).pipe(se(L=>new Wt(I,L instanceof Wt?[L]:[])))}))):co(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):kV(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(qe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):VV(n))):G({routes:[],injector:e})}};function QV(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function YV(t){let e=t.value.routeConfig;return e&&e.path===""}function d0(t){let e=[],n=new Set;for(let r of t){if(!YV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=d0(r.children);e.push(new Wt(r.value,i))}return e.filter(r=>!n.has(r))}function JV(t){return t.data||{}}function XV(t){return t.resolve||{}}function ZV(t,e,n,r,i,s){return Ue(o=>zV(t,e,n,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:u})=>Ie(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function eU(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of h0(u))o.add(l);let a=0;return Ne(o).pipe(Ci(u=>s.has(u)?tU(u,r,t,e):(u.data=yy(u,u.parent,t).resolve,G(void 0))),qe(()=>a++),Fs(1),Ue(u=>a===o.size?G(n):$t))})}function h0(t){let e=t.children.map(n=>h0(n)).flat();return[t,...e]}function tU(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!i0(i)&&(s[pc]=i.title),nU(s,t,e,r).pipe(se(o=>(t._resolvedData=o,t.data=yy(t,t.parent,n).resolve,null)))}function nU(t,e,n,r){let i=Wm(t);if(i.length===0)return G({});let s={};return Ne(i).pipe(Ue(o=>rU(t[o],e,n,r).pipe(Sn(),qe(a=>{s[o]=a}))),Fs(1),Ip(s),Or(o=>u0(o)?$t:Ps(o)))}function rU(t,e,n,r){let i=yc(e)??r,s=yo(t,i),o=s.resolve?s.resolve(e,n):sr(i,()=>s(e,n));return Jr(o)}function qm(t){return en(e=>{let n=t(e);return n?Ne(n).pipe(se(()=>e)):G(e)})}var f0=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===X);return i}getResolvedTitleForRoute(r){return r.data[pc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(iU),providedIn:"root"});let t=e;return t})(),iU=(()=>{let e=class e extends f0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(PD))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vc=new $("",{providedIn:"root",factory:()=>({})}),fc=new $(""),Ey=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(_d)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Jr(r.loadComponent()).pipe(se(p0),qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ra(()=>{this.componentLoaders.delete(r)})),s=new Rs(i,()=>new _t).pipe(As());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return G({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=sU(i,this.compiler,r,this.onLoadEndListener).pipe(Ra(()=>{this.childrenLoaders.delete(i)})),a=new Rs(o,()=>new _t).pipe(As());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sU(t,e,n,r){return Jr(t.loadChildren()).pipe(se(p0),Ue(i=>i instanceof ja||Array.isArray(i)?G(i):Ne(e.compileModuleAsync(i))),se(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(fc,[],{optional:!0,self:!0}).flat()),{routes:o.map(wy),injector:s}}))}function oU(t){return t&&typeof t=="object"&&"default"in t}function p0(t){return oU(t)?t.default:t}var Cy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(aU),providedIn:"root"});let t=e;return t})(),aU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),g0=new $(""),m0=new $("");function cU(t,e,n){let r=t.get(m0),i=t.get(et);return t.get(ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),uU(t))),{onViewTransitionCreated:u}=r;return u&&sr(t,()=>u({transition:a,from:e,to:n})),o})}function uU(t){return new Promise(e=>{fm(e,{injector:t})})}var by=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _t,this.transitionAbortSubject=new _t,this.configLoader=k(Ey),this.environmentInjector=k(Ht),this.urlSerializer=k(gc),this.rootContexts=k(mc),this.location=k(ao),this.inputBindingEnabled=k(jd,{optional:!0})!==null,this.titleStrategy=k(f0),this.options=k(vc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(Cy),this.createViewTransition=k(g0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let r=s=>this.events.next(new ey(s)),i=s=>this.events.next(new ty(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ie(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new dt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:rc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Zt(o=>o.id!==0),se(o=>Ie(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),en(o=>{let a=!1,u=!1;return G(o).pipe(en(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),$t;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Qr(l.id,this.urlSerializer.serialize(l.rawUrl),m,Nd.IgnoredSameUrlNavigation)),l.resolve(null),$t}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(en(m=>{let I=this.transitions?.getValue();return this.events.next(new go(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),I!==this.transitions?.getValue()?$t:Promise.resolve(m)}),ZV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ie(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let I=new Md(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:I,source:S,restoredState:R,extras:N}=l,L=new go(m,this.urlSerializer.serialize(I),S,R);this.events.next(L);let J=n0(this.rootComponentType).snapshot;return this.currentTransition=o=Ie(F({},l),{targetSnapshot:J,urlAfterRedirects:I,extras:Ie(F({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,G(o)}else{let m="";return this.events.next(new Qr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Nd.IgnoredByUrlHandlingStrategy)),l.resolve(null),$t}}),qe(l=>{let h=new Ym(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),se(l=>(this.currentTransition=o=Ie(F({},l),{guards:yV(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),SV(this.environmentInjector,l=>this.events.next(l)),qe(l=>{if(o.guardsResult=l.guardsResult,po(l.guardsResult))throw o0(this.urlSerializer,l.guardsResult);let h=new Jm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Zt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",zt.GuardRejected),!1)),qm(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(qe(h=>{let p=new Xm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),en(h=>{let p=!1;return G(h).pipe(eU(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",zt.NoDataFromResolver)}}))}),qe(h=>{let p=new Zm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),qm(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(qe(I=>{p.component=I}),se(()=>{})));for(let I of p.children)m.push(...h(I));return m};return Aa(h(l.targetSnapshot.root)).pipe(kr(null),rr(1))}),qm(()=>this.afterPreactivation()),en(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ne(p).pipe(se(()=>o)):G(o)}),se(l=>{let h=uV(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ie(F({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),qe(()=>{this.events.next(new cc)}),mV(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),rr(1),qe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Tp(this.transitionAbortSubject.pipe(qe(l=>{throw l}))),Ra(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Or(l=>{if(u=!0,c0(l))this.events.next(new Kr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),hV(l)?this.events.next(new uc(l.url)):o.resolve(!1);else{this.events.next(new ac(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return $t}))}))}cancelNavigationTransition(r,i,s){let o=new Kr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lU(t){return t!==rc}var dU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(hU),providedIn:"root"});let t=e;return t})(),my=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hU=(()=>{let e=class e extends my{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=no(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),y0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>k(fU),providedIn:"root"});let t=e;return t})(),fU=(()=>{let e=class e extends y0{constructor(){super(...arguments),this.location=k(ao),this.urlSerializer=k(gc),this.options=k(vc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(Cy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=n0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof go)this.stateMemento=this.createStateMemento();else if(r instanceof Qr)this.rawUrlTree=i.initialUrl;else if(r instanceof Md){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof cc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Kr&&(r.code===zt.GuardRejected||r.code===zt.NoDataFromResolver)?this.restoreHistory(i):r instanceof ac?this.restoreHistory(i,!0):r instanceof Vn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=no(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(tc||{});function _0(t,e){t.events.pipe(Zt(n=>n instanceof Vn||n instanceof Kr||n instanceof ac||n instanceof Qr),se(n=>n instanceof Vn||n instanceof Qr?tc.COMPLETE:(n instanceof Kr?n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation:!1)?tc.REDIRECTING:tc.FAILED),Zt(n=>n!==tc.REDIRECTING),rr(1)).subscribe(()=>{e()})}function pU(t){throw t}var gU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ot=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(gd),this.stateManager=k(y0),this.options=k(vc,{optional:!0})||{},this.pendingTasks=k(ld),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(by),this.urlSerializer=k(gc),this.location=k(ao),this.urlHandlingStrategy=k(Cy),this._events=new _t,this.errorHandler=this.options.errorHandler||pU,this.navigated=!1,this.routeReuseStrategy=k(dU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(fc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(jd,{optional:!0}),this.eventsSubscription=new Fe,this.isNgZoneEnabled=k(ce)instanceof ce&&ce.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Kr&&i.code!==zt.Redirect&&i.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Vn)this.navigated=!0;else if(i instanceof uc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||lU(s.source)};this.scheduleNavigation(a,rc,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}_U(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=F({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(wy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let I=s?s.snapshot:this.routerState.snapshot.root;m=XD(I)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return ZD(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=po(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,rc,null,i)}navigate(r,i={skipLocationChange:!1}){return yU(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},gU):i===!1?s=F({},mU):s=i,po(r))return OD(this.currentUrlTree,r,s);let o=this.parseUrl(r);return OD(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,I)=>{u=m,l=I});let p=this.pendingTasks.add();return _0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}function _U(t){return!(t instanceof cc)&&!(t instanceof uc)}var v0=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new _t,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Vn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:_T(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(U(Ot),U(Yr),Gg("tabindex"),U(an),U(cr),U(hr))},e.\u0275dir=Xe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ze("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&kn("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[vt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Wr],skipLocationChange:[vt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Wr],replaceUrl:[vt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Wr],routerLink:"routerLink"},standalone:!0,features:[gm,$r]});let t=e;return t})();var Ud=class{};var vU=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(r=>r instanceof Vn),Ci(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=ud(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Ne(s).pipe(Os())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=G(null);let o=s.pipe(Ue(a=>a===null?G(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ne([o,a]).pipe(Os())}else return o})}};e.\u0275fac=function(i){return new(i||e)(z(Ot),z(_d),z(Ht),z(Ud),z(Ey))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),w0=new $(""),wU=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof go?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Vn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Qr&&r.code===Nd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Pd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Pd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){PT()},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function I0(t,...e){return ql([{provide:fc,multi:!0,useValue:t},[],{provide:Yr,useFactory:E0,deps:[Ot]},{provide:yd,multi:!0,useFactory:C0},e.map(n=>n.\u0275providers)])}function E0(t){return t.routerState.root}function wc(t,e){return{\u0275kind:t,\u0275providers:e}}function C0(){let t=k(ft);return e=>{let n=t.get(Qa);if(e!==n.components[0])return;let r=t.get(Ot),i=t.get(b0);t.get(Ty)===1&&r.initialNavigation(),t.get(T0,null,ee.Optional)?.setUpPreloading(),t.get(w0,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var b0=new $("",{factory:()=>new _t}),Ty=new $("",{providedIn:"root",factory:()=>1});function IU(){return wc(2,[{provide:Ty,useValue:0},{provide:md,multi:!0,deps:[ft],useFactory:e=>{let n=e.get(_D,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Ot),s=e.get(b0);_0(i,()=>{r(!0)}),e.get(by).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function EU(){return wc(3,[{provide:md,multi:!0,useFactory:()=>{let e=k(Ot);return()=>{e.setUpLocationChangeListener()}}},{provide:Ty,useValue:2}])}var T0=new $("");function CU(t){return wc(0,[{provide:T0,useExisting:vU},{provide:Ud,useExisting:t}])}function bU(){return wc(8,[VD,{provide:jd,useExisting:VD}])}function TU(t){let e=[{provide:g0,useValue:cU},{provide:m0,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return wc(9,e)}var jD=new $("ROUTER_FORROOT_GUARD"),DU=[ao,{provide:gc,useClass:sc},Ot,mc,{provide:Yr,useFactory:E0,deps:[Ot]},Ey,[]],D0=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[DU,[],{provide:fc,multi:!0,useValue:r},{provide:jD,useFactory:xU,deps:[[Ot,new ke,new Hl]]},{provide:vc,useValue:i||{}},i?.useHash?AU():RU(),SU(),i?.preloadingStrategy?CU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?NU(i):[],i?.bindToComponentInputs?bU().\u0275providers:[],i?.enableViewTransitions?TU().\u0275providers:[],MU()]}}static forChild(r){return{ngModule:e,providers:[{provide:fc,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(z(jD,8))},e.\u0275mod=Je({type:e}),e.\u0275inj=Ye({});let t=e;return t})();function SU(){return{provide:w0,useFactory:()=>{let t=k(bD),e=k(ce),n=k(vc),r=k(by),i=k(gc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new wU(i,r,t,e,n)}}}function AU(){return{provide:hr,useClass:wD}}function RU(){return{provide:hr,useClass:Rm}}function xU(t){return"guarded"}function NU(t){return[t.initialNavigation==="disabled"?EU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?IU().\u0275providers:[]]}var BD=new $("");function MU(){return[{provide:BD,useFactory:C0},{provide:yd,multi:!0,useExisting:BD}]}var k0=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(U(an),U(cr))},e.\u0275dir=Xe({type:e});let t=e;return t})(),PU=(()=>{let e=class e extends k0{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=no(e)))(s||e)}})(),e.\u0275dir=Xe({type:e,features:[ur]});let t=e;return t})(),F0=new $("");var OU={provide:F0,useExisting:Pi(()=>wo),multi:!0};function kU(){let t=dr()?dr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var FU=new $(""),wo=(()=>{let e=class e extends k0{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!kU())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(U(an),U(cr),U(FU,8))},e.\u0275dir=Xe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ze("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ka([OU]),ur]});let t=e;return t})();function LU(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Ay=new $(""),L0=new $("");function VU(t){return LU(t.value)?{required:!0}:null}function S0(t){return null}function V0(t){return t!=null}function U0(t){return Li(t)?Ne(t):t}function j0(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function B0(t,e){return e.map(n=>n(t))}function UU(t){return!t.validate}function $0(t){return t.map(e=>UU(e)?e:n=>e.validate(n))}function jU(t){if(!t)return null;let e=t.filter(V0);return e.length==0?null:function(n){return j0(B0(n,e))}}function Ry(t){return t!=null?jU($0(t)):null}function BU(t){if(!t)return null;let e=t.filter(V0);return e.length==0?null:function(n){let r=B0(n,e).map(U0);return wp(r).pipe(se(j0))}}function xy(t){return t!=null?BU($0(t)):null}function A0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function $U(t){return t._rawValidators}function HU(t){return t._rawAsyncValidators}function Sy(t){return t?Array.isArray(t)?t:[t]:[]}function Hd(t,e){return Array.isArray(t)?t.includes(e):t===e}function R0(t,e){let n=Sy(e);return Sy(t).forEach(i=>{Hd(n,i)||n.push(i)}),n}function x0(t,e){return Sy(e).filter(n=>!Hd(t,n))}var qd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ry(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},vo=class extends qd{get formDirective(){return null}get path(){return null}},bc=class extends qd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gd=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},qU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},MQ=Ie(F({},qU),{"[class.ng-submitted]":"isSubmitted"}),Kd=(()=>{let e=class e extends Gd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(U(bc,2))},e.\u0275dir=Xe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&wn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ur]});let t=e;return t})(),Qd=(()=>{let e=class e extends Gd{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(U(vo,10))},e.\u0275dir=Xe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&wn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[ur]});let t=e;return t})();var Ic="VALID",$d="INVALID",_o="PENDING",Ec="DISABLED";function H0(t){return(Yd(t)?t.validators:t)||null}function GU(t){return Array.isArray(t)?Ry(t):t||null}function q0(t,e){return(Yd(e)?e.asyncValidators:t)||null}function WU(t){return Array.isArray(t)?xy(t):t||null}function Yd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function zU(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function KU(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var Wd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ic}get invalid(){return this.status===$d}get pending(){return this.status==_o}get disabled(){return this.status===Ec}get enabled(){return this.status!==Ec}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(R0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(R0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(x0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(x0(e,this._rawAsyncValidators))}hasValidator(e){return Hd(this._rawValidators,e)}hasAsyncValidator(e){return Hd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_o,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ec,this.errors=null,this._forEachChild(r=>{r.disable(Ie(F({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ic,this._forEachChild(r=>{r.enable(Ie(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ie(F({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ic||this.status===_o)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ec:Ic}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_o,this._hasOwnPendingAsyncValidator=!0;let n=U0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?Ec:this.errors?$d:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_o)?_o:this._anyControlsHaveStatus($d)?$d:Ic}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=WU(this._rawAsyncValidators)}},zd=class extends Wd{constructor(e,n,r){super(H0(n),q0(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){KU(this,!0,e),Object.keys(e).forEach(r=>{zU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ny=new $("CallSetDisabledState",{providedIn:"root",factory:()=>My}),My="always";function QU(t,e){return[...e.path,t]}function G0(t,e,n=My){W0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JU(t,e),ZU(t,e),XU(t,e),YU(t,e)}function N0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function W0(t,e){let n=$U(t);e.validator!==null?t.setValidators(A0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=HU(t);e.asyncValidator!==null?t.setAsyncValidators(A0(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();N0(e._rawValidators,i),N0(e._rawAsyncValidators,i)}function JU(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&z0(t,e)})}function XU(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&z0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function z0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ZU(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ej(t,e){t==null,W0(t,e)}function tj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function nj(t){return Object.getPrototypeOf(t.constructor)===PU}function rj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ij(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===wo?n=s:nj(s)?r=s:i=s}),i||r||n||null}var sj={provide:vo,useExisting:Pi(()=>Tc)},Cc=Promise.resolve(),Tc=(()=>{let e=class e extends vo{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ge,this.form=new zd({},Ry(r),xy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Cc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),G0(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Cc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Cc.then(()=>{let i=this._findContainer(r.path),s=new zd({});ej(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Cc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Cc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,rj(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(U(Ay,10),U(L0,10),U(Ny,8))},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&ze("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[vt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ka([sj]),ur]});let t=e;return t})();function M0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function P0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var oj=class extends Wd{constructor(e=null,n,r){super(H0(n),q0(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(P0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){M0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){M0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){P0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var aj={provide:bc,useExisting:Pi(()=>Dc)},O0=Promise.resolve(),Dc=(()=>{let e=class e extends bc{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new oj,this._registered=!1,this.name="",this.update=new Ge,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=ij(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),tj(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){G0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){O0.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Wr(i);O0.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?QU(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(U(vo,9),U(Ay,10),U(L0,10),U(F0,10),U(Vi,8),U(Ny,8))},e.\u0275dir=Xe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[vt.None,"disabled","isDisabled"],model:[vt.None,"ngModel","model"],options:[vt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ka([aj]),ur,$r]});let t=e;return t})(),Jd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var cj=(()=>{let e=class e{constructor(){this._validator=S0}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):S0,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Xe({type:e,features:[$r]});let t=e;return t})();var uj={provide:Ay,useExisting:Pi(()=>Sc),multi:!0};var Sc=(()=>{let e=class e extends cj{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Wr,this.createValidator=r=>VU}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=no(e)))(s||e)}})(),e.\u0275dir=Xe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&kn("required",s._enabled?"":null)},inputs:{required:"required"},features:[Ka([uj]),ur]});let t=e;return t})();var lj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ye({});let t=e;return t})();var Xd=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ny,useValue:r.callSetDisabledState??My}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ye({imports:[lj]});let t=e;return t})();var Oy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var O=function(t,e){if(!t)throw Hi(e)},Hi=function(t){return new Error("Firebase Database ("+Oy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var Y0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,I=l&63;u||(I=64,o||(m=64)),r.push(n[h],n[p],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new ky;let m=s<<2|a>>4;if(r.push(m),l!==64){let I=a<<4&240|l>>2;if(r.push(I),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ky=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Ly=function(t){let e=Y0(t);return eh.encodeByteArray(e,!0)},Ac=function(t){return Ly(t).replace(/\./g,"")},Rc=function(t){try{return eh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function J0(t){return X0(void 0,t)}function X0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!hj(n)||(t[n]=X0(t[n],e[n]));return t}function hj(t){return t!=="__proto__"}function fj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var pj=()=>fj().__FIREBASE_DEFAULTS__,gj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Rc(t[1]);return e&&JSON.parse(e)},th=()=>{try{return pj()||gj()||mj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vy=t=>{var e,n;return(n=(e=th())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nh=t=>{let e=Vy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uy=()=>{var t;return(t=th())===null||t===void 0?void 0:t.config},jy=t=>{var e;return(e=th())===null||e===void 0?void 0:e[`_${t}`]};var $i=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ac(JSON.stringify(n)),Ac(JSON.stringify(o)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function yj(){var t;let e=(t=th())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ih(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eS(){let t=Ke();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jn(){return Oy.NODE_CLIENT===!0||Oy.NODE_ADMIN===!0}function tS(){return!yj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function By(){try{return typeof indexedDB=="object"}catch{return!1}}function nS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var _j="FirebaseError",Kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_j,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fr.prototype.create)}},fr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kt(i,a,r)}};function vj(t,e){return t.replace(wj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var wj=/\{\$([^}]+)}/g;function Io(t){return JSON.parse(t)}function nt(t){return JSON.stringify(t)}var rS=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Io(Rc(s[0])||""),n=Io(Rc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var iS=function(t){let e=rS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sS=function(t){let e=rS(t).claims;return typeof e=="object"&&e.admin===!0};function Bn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Nc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Gi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Q0(s)&&Q0(o)){if(!Gi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Q0(t){return t!==null&&typeof t=="object"}function Wi(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Co(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Zd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):p<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function oS(t,e){let n=new Fy(t,e);return n.subscribe.bind(n)}var Fy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ij(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Py),i.error===void 0&&(i.error=Py),i.complete===void 0&&(i.complete=Py);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ij(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Py(){}function aS(t,e){return`${t} failed: ${e} argument `}var cS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,O(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Pc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var kQ=4*60*60*1e3;function rt(t){return t&&t._delegate?t._delegate:t}var Lt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zi="[DEFAULT]";var sh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new $i;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cj(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ej(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ej(t){return t===zi?void 0:t}function Cj(t){return t.instantiationMode==="EAGER"}var Oc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new sh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var bj=[],te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(te||{}),Tj={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Dj=te.INFO,Sj={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Aj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Sj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$n=class{constructor(e){this.name=e,this._logLevel=Dj,this._logHandler=Aj,this._userLogHandler=null,bj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var Rj=(t,e)=>e.some(n=>t instanceof n),uS,lS;function xj(){return uS||(uS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nj(){return lS||(lS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var dS=new WeakMap,Hy=new WeakMap,hS=new WeakMap,$y=new WeakMap,Gy=new WeakMap;function Mj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dS.set(n,t)}).catch(()=>{}),Gy.set(e,t),e}function Pj(t){if(Hy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Hy.set(t,e)}var qy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fS(t){qy=t(qy)}function Oj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(oh(this),e,...n);return hS.set(r,e.sort?e.sort():[e]),Hn(r)}:Nj().includes(t)?function(...e){return t.apply(oh(this),e),Hn(dS.get(this))}:function(...e){return Hn(t.apply(oh(this),e))}}function kj(t){return typeof t=="function"?Oj(t):(t instanceof IDBTransaction&&Pj(t),Rj(t,xj())?new Proxy(t,qy):t)}function Hn(t){if(t instanceof IDBRequest)return Mj(t);if($y.has(t))return $y.get(t);let e=kj(t);return e!==t&&($y.set(t,e),Gy.set(e,t)),e}var oh=t=>Gy.get(t);function gS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Hn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hn(o.result),u.oldVersion,u.newVersion,Hn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Fj=["get","getKey","getAll","getAllKeys","count"],Lj=["put","add","delete","clear"],Wy=new Map;function pS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wy.get(e))return Wy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Lj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fj.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Wy.set(e,s),s}fS(t=>Ie(F({},t),{get:(e,n,r)=>pS(e,n)||t.get(e,n,r),has:(e,n)=>!!pS(e,n)||t.has(e,n)}));var Ky=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Vj(t){let e=t.getComponent();return e?.type==="VERSION"}var Qy="@firebase/app",mS="0.10.3";var Ki=new $n("@firebase/app"),Uj="@firebase/app-compat",jj="@firebase/analytics-compat",Bj="@firebase/analytics",$j="@firebase/app-check-compat",Hj="@firebase/app-check",qj="@firebase/auth",Gj="@firebase/auth-compat",Wj="@firebase/database",zj="@firebase/database-compat",Kj="@firebase/functions",Qj="@firebase/functions-compat",Yj="@firebase/installations",Jj="@firebase/installations-compat",Xj="@firebase/messaging",Zj="@firebase/messaging-compat",e2="@firebase/performance",t2="@firebase/performance-compat",n2="@firebase/remote-config",r2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",o2="@firebase/firestore",a2="@firebase/vertexai-preview",c2="@firebase/firestore-compat",u2="firebase",l2="10.12.0";var Yy="[DEFAULT]",d2={[Qy]:"fire-core",[Uj]:"fire-core-compat",[Bj]:"fire-analytics",[jj]:"fire-analytics-compat",[Hj]:"fire-app-check",[$j]:"fire-app-check-compat",[qj]:"fire-auth",[Gj]:"fire-auth-compat",[Wj]:"fire-rtdb",[zj]:"fire-rtdb-compat",[Kj]:"fire-fn",[Qj]:"fire-fn-compat",[Yj]:"fire-iid",[Jj]:"fire-iid-compat",[Xj]:"fire-fcm",[Zj]:"fire-fcm-compat",[e2]:"fire-perf",[t2]:"fire-perf-compat",[n2]:"fire-rc",[r2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[o2]:"fire-fst",[c2]:"fire-fst-compat",[a2]:"fire-vertex","fire-js":"fire-js",[u2]:"fire-js-all"};var kc=new Map,h2=new Map,Jy=new Map;function yS(t,e){try{t.container.addComponent(e)}catch(n){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qn(t){let e=t.name;if(Jy.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;Jy.set(e,t);for(let n of kc.values())yS(n,t);for(let n of h2.values())yS(n,t);return!0}function Qi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t.settings!==void 0}var f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new fr("app","Firebase",f2);var Xy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}};var Gn=l2;function t_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xr.create("bad-app-name",{appName:String(i)});if(n||(n=Uy()),!n)throw Xr.create("no-options");let s=kc.get(i);if(s){if(Gi(n,s.options)&&Gi(r,s.config))return s;throw Xr.create("duplicate-app",{appName:i})}let o=new Oc(i);for(let u of Jy.values())o.addComponent(u);let a=new Xy(n,r,o);return kc.set(i,a),a}function Zr(t=Yy){let e=kc.get(t);if(!e&&t===Yy&&Uy())return t_();if(!e)throw Xr.create("no-app",{appName:t});return e}function ah(){return Array.from(kc.values())}function xe(t,e,n){var r;let i=(r=d2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(a.join(" "));return}qn(new Lt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var p2="firebase-heartbeat-database",g2=1,Fc="firebase-heartbeat-store",zy=null;function IS(){return zy||(zy=gS(p2,g2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),zy}function m2(t){return w(this,null,function*(){try{let n=(yield IS()).transaction(Fc),r=yield n.objectStore(Fc).get(ES(t));return yield n.done,r}catch(e){if(e instanceof Kt)Ki.warn(e.message);else{let n=Xr.create("idb-get",{originalErrorMessage:e?.message});Ki.warn(n.message)}}})}function _S(t,e){return w(this,null,function*(){try{let r=(yield IS()).transaction(Fc,"readwrite");yield r.objectStore(Fc).put(e,ES(t)),yield r.done}catch(n){if(n instanceof Kt)Ki.warn(n.message);else{let r=Xr.create("idb-set",{originalErrorMessage:n?.message});Ki.warn(r.message)}}})}function ES(t){return`${t.name}!${t.options.appId}`}var y2=1024,_2=30*24*60*60*1e3,Zy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new e_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vS();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=_2}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return w(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=vS(),{heartbeatsToSend:r,unsentEntries:i}=v2(this._heartbeatsCache.heartbeats),s=Ac(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function vS(){return new Date().toISOString().substring(0,10)}function v2(t,e=y2){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var e_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return By()?nS().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield m2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _S(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _S(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function wS(t){return Ac(JSON.stringify({version:2,heartbeats:t})).length}function w2(t){qn(new Lt("platform-logger",e=>new Ky(e),"PRIVATE")),qn(new Lt("heartbeat",e=>new Zy(e),"PRIVATE")),xe(Qy,mS,t),xe(Qy,mS,"esm2017"),xe("fire-js","")}w2("");var I2="firebase",E2="10.12.0";xe(I2,E2,"app");var pr=new ir("ANGULARFIRE2_VERSION");function To(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ji=(t,e)=>{let n=e?[e]:ah(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ei=class{constructor(){return Ji(C2)}},C2="app-check";function bo(){}var ch=class{zone;delegate;constructor(e,n=yp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},n_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bo,{},bo,bo)),n.pipe(qe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ti=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ch(Zone.current)),this.insideAngular=n.run(()=>new ch(Zone.current,mp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(ce))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function b2(t){return uh().ngZone.runOutsideAngular(()=>t())}function Yi(t){return uh().ngZone.run(()=>t())}function T2(t){return D2(uh())(t)}function D2(t){return function(n){return n=n.lift(new n_(t.ngZone)),n.pipe(Pr(t.outsideAngular),Mr(t.insideAngular))}}var S2=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Yi(()=>t.apply(void 0,r))},Qt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bo,{},bo,bo))),r[s]=S2(r[s],n));let i=b2(()=>t.apply(this,r));if(!e)if(i instanceof le){let s=uh();return i.pipe(Pr(s.outsideAngular),Mr(s.insideAngular))}else return Yi(()=>i);return i instanceof le?i.pipe(T2):i instanceof Promise?Yi(()=>new Promise((s,o)=>i.then(a=>Yi(()=>s(a)),a=>Yi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Yi(()=>i)};var En=class{constructor(e){return e}},gr=class{constructor(){return ah()}};function A2(t){return t&&t.length===1?t[0]:new En(Zr())}var r_=new $("angularfire2._apps"),R2={provide:En,useFactory:A2,deps:[[new ke,r_]]},x2={provide:gr,deps:[[new ke,r_]]};function N2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new En(r)}}var M2=(()=>{class t{constructor(n){xe("angularfire",pr.full,"core"),xe("angularfire",pr.full,"app"),xe("angular",sD.full,n.toString())}static \u0275fac=function(r){return new(r||t)(z(on))};static \u0275mod=Je({type:t});static \u0275inj=Ye({providers:[R2,x2]})}return t})();function CS(t,...e){return{ngModule:M2,providers:[{provide:r_,useFactory:N2(t),multi:!0,deps:[ce,ft,ti,...e]}]}}var bS=Qt(t_,!0);function BS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $S=BS,HS=new fr("auth","Firebase",BS());var gh=new $n("@firebase/auth");function P2(t,...e){gh.logLevel<=te.WARN&&gh.warn(`Auth (${Gn}): ${t}`,...e)}function dh(t,...e){gh.logLevel<=te.ERROR&&gh.error(`Auth (${Gn}): ${t}`,...e)}function zn(t,...e){throw D_(t,...e)}function Xi(t,...e){return D_(t,...e)}function qS(t,e,n){let r=Object.assign(Object.assign({},$S()),{[e]:n});return new fr("auth","Firebase",r).create(e,{appName:t.name})}function _r(t){return qS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return HS.create(t,...e)}function q(t,e,...n){if(!t)throw D_(e,...n)}function mr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function ri(t,e){t||mr(e)}function a_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function O2(){return TS()==="http:"||TS()==="https:"}function TS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function k2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O2()||Z0()||"connection"in navigator)?navigator.onLine:!0}function F2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Zi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=xc()||ih()}get(){return k2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function S_(t,e){ri(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var mh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var L2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var V2=new Zi(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function si(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return GS(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Wi(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),mh.fetch()(WS(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function GS(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},L2),e);try{let i=new c_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw lh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw lh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw lh(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qS(t,h,l);zn(t,h)}}catch(i){if(i instanceof Kt)throw i;zn(t,"network-request-failed",{message:String(i)})}})}function qc(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield si(t,e,n,r,i);return"mfaPendingCredential"in l&&zn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function WS(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?S_(t.config,i):`${t.config.apiScheme}://${i}`}function U2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var c_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xi(this.auth,"network-request-failed")),V2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function lh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Xi(t,e,r);return i.customData._tokenResponse=n,i}function DS(t){return t!==void 0&&t.enterprise!==void 0}var u_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return U2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function j2(t,e){return w(this,null,function*(){return si(t,"GET","/v2/recaptchaConfig",ii(t,e))})}function B2(t,e){return w(this,null,function*(){return si(t,"POST","/v1/accounts:delete",e)})}function zS(t,e){return w(this,null,function*(){return si(t,"POST","/v1/accounts:lookup",e)})}function Lc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function A_(t,e=!1){return w(this,null,function*(){let n=rt(t),r=yield n.getIdToken(e),i=R_(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Lc(i_(i.auth_time)),issuedAtTime:Lc(i_(i.iat)),expirationTime:Lc(i_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function i_(t){return Number(t)*1e3}function R_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rc(n);return i?JSON.parse(i):(dh("Failed to decode base64 JWT payload"),null)}catch(i){return dh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SS(t){let e=R_(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Uc(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Kt&&$2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function $2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var l_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var jc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yh(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Uc(t,zS(n,{idToken:r}));q(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?KS(s.providerUserInfo):[],a=H2(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function x_(t){return w(this,null,function*(){let e=rt(t);yield yh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function H2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KS(t){return t.map(e=>{var{providerId:n}=e,r=_p(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function q2(t,e){return w(this,null,function*(){let n=yield GS(t,{},()=>w(this,null,function*(){let r=Wi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=WS(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function G2(t,e){return w(this,null,function*(){return si(t,"POST","/v2/accounts:revokeToken",ii(t,e))})}var Vc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=SS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield q2(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return mr("not implemented")}};function ni(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Do=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_p(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new l_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield Uc(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return A_(this,e)}reload(){return x_(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield yh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(In(this.auth.app))return Promise.reject(_r(this.auth));let e=yield this.getIdToken();return yield Uc(this,B2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=n.createdAt)!==null&&l!==void 0?l:void 0,J=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:me,isAnonymous:ut,providerData:_e,stsTokenManager:C}=n;q(K&&C,e,"internal-error");let y=Vc.fromJSON(this.name,C);q(typeof K=="string",e,"internal-error"),ni(p,e.name),ni(m,e.name),q(typeof me=="boolean",e,"internal-error"),q(typeof ut=="boolean",e,"internal-error"),ni(I,e.name),ni(S,e.name),ni(R,e.name),ni(N,e.name),ni(L,e.name),ni(J,e.name);let _=new t({uid:K,auth:e,email:m,emailVerified:me,displayName:p,isAnonymous:ut,photoURL:S,phoneNumber:I,tenantId:R,stsTokenManager:y,createdAt:L,lastLoginAt:J});return _e&&Array.isArray(_e)&&(_.providerData=_e.map(E=>Object.assign({},E))),N&&(_._redirectEventId=N),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new Vc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?KS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Vc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var AS=new Map;function yr(t){ri(t instanceof Function,"Expected a class definition");let e=AS.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AS.set(t,e),e)}var W2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),d_=W2;function hh(t,e,n){return`firebase:${t}:${e}:${n}`}var _h=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hh(this.userKey,i.apiKey,s),this.fullPersistenceKey=hh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Do._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(yr(d_),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||yr(d_),o=hh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Do._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function RS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZS(e))return"Blackberry";if(eA(e))return"Webos";if(N_(e))return"Safari";if((e.includes("chrome/")||YS(e))&&!e.includes("edge/"))return"Chrome";if(XS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QS(t=Ke()){return/firefox\//i.test(t)}function N_(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YS(t=Ke()){return/crios\//i.test(t)}function JS(t=Ke()){return/iemobile/i.test(t)}function XS(t=Ke()){return/android/i.test(t)}function ZS(t=Ke()){return/blackberry/i.test(t)}function eA(t=Ke()){return/webos/i.test(t)}function Dh(t=Ke()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function z2(t=Ke()){var e;return Dh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function K2(){return eS()&&document.documentMode===10}function tA(t=Ke()){return Dh(t)||XS(t)||eA(t)||ZS(t)||/windows phone/i.test(t)||JS(t)}function Q2(){try{return!!(window&&window!==window.top)}catch{return!1}}function nA(t,e=[]){let n;switch(t){case"Browser":n=RS(Ke());break;case"Worker":n=`${RS(Ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gn}/${r}`}var h_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Y2(n){return w(this,arguments,function*(t,e={}){return si(t,"GET","/v2/passwordPolicy",ii(t,e))})}var J2=6,f_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:J2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var p_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vh(this),this.idTokenSubscription=new vh(this),this.beforeStateQueue=new h_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yr(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield _h.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield zS(this,{idToken:e}),r=yield Do._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(In(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield yh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=F2()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(In(this.app))return Promise.reject(_r(this));let n=e?rt(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return In(this.app)?Promise.reject(_r(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return In(this.app)?Promise.reject(_r(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(yr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield Y2(this),n=new f_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield G2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&yr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield _h.create(this,[yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&P2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ts(t){return rt(t)}var vh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oS(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sh={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X2(t){Sh=t}function rA(t){return Sh.loadJS(t)}function Z2(){return Sh.recaptchaEnterpriseScript}function eB(){return Sh.gapiScript}function iA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var tB="recaptcha-enterprise",nB="NO_RECAPTCHA",g_=class{constructor(e){this.type=tB,this.auth=ts(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){j2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new u_(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;DS(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(nB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&DS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Z2();u.length!==0&&(u+=a),rA(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function xS(t,e,n,r=!1){return w(this,null,function*(){let i=new g_(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function m_(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield xS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield xS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function M_(t,e){let n=Qi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Gi(s,e??{}))return i;zn(i,"already-initialized")}return n.initialize({options:e})}function rB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(yr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function P_(t,e,n){let r=ts(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=sA(e),{host:o,port:a}=iB(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||sB()}function sA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iB(t){let e=sA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:NS(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:NS(o)}}}function NS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function sB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}};function oB(t,e){return w(this,null,function*(){return si(t,"POST","/v1/accounts:signUp",e)})}function aB(t,e){return w(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))})}function cB(t,e){return w(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))})}function uB(t,e){return w(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))})}var $c=class t extends Bc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return m_(e,n,"signInWithPassword",aB);case"emailLink":return cB(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return m_(e,r,"signUpPassword",oB);case"emailLink":return uB(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function s_(t,e){return w(this,null,function*(){return qc(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))})}function lB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dB(t){let e=Eo(Co(t)).link,n=e?Eo(Co(e)).deep_link_id:null,r=Eo(Co(t)).deep_link_id;return(r?Eo(Co(r)).link:null)||r||n||e||t}var wh=class t{constructor(e){var n,r,i,s,o,a;let u=Eo(Co(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=lB((i=u.mode)!==null&&i!==void 0?i:null);q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=dB(e);try{return new t(n)}catch{return null}}};var oA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return $c._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=wh.parseLink(r);return q(i,"argument-error"),$c._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ih=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var y_=class extends Ih{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function hB(t,e){return w(this,null,function*(){return qc(t,"POST","/v1/accounts:signUp",ii(t,e))})}var So=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield Do._fromIdTokenResponse(e,r,i),o=MS(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=MS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function MS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var __=class t extends Kt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function aA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?__._fromErrorAndOperation(t,s,e,r):s})}function fB(t,e,n=!1){return w(this,null,function*(){let r=yield Uc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return So._forOperation(t,"link",r)})}function pB(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(In(r.app))return Promise.reject(_r(r));let i="reauthenticate";try{let s=yield Uc(t,aA(r,i,e,t),n);q(s.idToken,r,"internal-error");let o=R_(s.idToken);q(o,r,"internal-error");let{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),So._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),s}})}function cA(t,e,n=!1){return w(this,null,function*(){if(In(t.app))return Promise.reject(_r(t));let r="signIn",i=yield aA(t,r,e),s=yield So._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function O_(t,e){return w(this,null,function*(){return cA(ts(t),e)})}function uA(t){return w(this,null,function*(){let e=ts(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function k_(t,e,n){return w(this,null,function*(){if(In(t.app))return Promise.reject(_r(t));let r=ts(t),o=yield m_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hB).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&uA(t),u}),a=yield So._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function F_(t,e,n){return In(t.app)?Promise.reject(_r(t)):O_(rt(t),oA.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&uA(t),r}))}function L_(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function V_(t,e,n){return rt(t).beforeAuthStateChanged(e,n)}function U_(t){return rt(t).signOut()}var Eh="__sak";var Ch=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function gB(){let t=Ke();return N_(t)||Dh(t)}var mB=1e3,yB=10,_B=(()=>{class t extends Ch{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=gB()&&Q2(),this.fallbackToPolling=tA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);K2()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,yB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},mB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield xr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield xr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield xr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),lA=_B;var vB=(()=>{class t extends Ch{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),j_=vB;function wB(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var IB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield wB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function dA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var v_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=dA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Wn(){return window}function EB(t){Wn().location.href=t}function hA(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}function CB(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function bB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TB(){return hA()?self:null}var fA="firebaseLocalStorageDb",DB=1,bh="firebaseLocalStorage",pA="fbase_key",es=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ah(t,e){return t.transaction([bh],e?"readwrite":"readonly").objectStore(bh)}function SB(){let t=indexedDB.deleteDatabase(fA);return new es(t).toPromise()}function w_(){let t=indexedDB.open(fA,DB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(bh,{keyPath:pA})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(bh)?e(r):(r.close(),yield SB(),e(yield w_()))}))})}function PS(t,e,n){return w(this,null,function*(){let r=Ah(t,!0).put({[pA]:e,value:n});return new es(r).toPromise()})}function AB(t,e){return w(this,null,function*(){let n=Ah(t,!1).get(e),r=yield new es(n).toPromise();return r===void 0?null:r.value})}function OS(t,e){let n=Ah(t,!0).delete(e);return new es(n).toPromise()}var RB=800,xB=3,NB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield w_(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>xB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return hA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=IB._getInstance(TB()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield CB(),!this.activeServiceWorker)return;this.sender=new v_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||bB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield w_();return yield PS(n,Eh,"1"),yield OS(n,Eh),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>PS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>AB(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>OS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ah(s,!1).getAll();return new es(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),RB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),gA=NB;var D7=iA("rcb"),S7=new Zi(3e4,6e4);function MB(t,e){return e?yr(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Hc=class extends Bc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return s_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return s_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return s_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function PB(t){return cA(t.auth,new Hc(t),t.bypassAuthState)}function OB(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),pB(n,new Hc(t),t.bypassAuthState)}function kB(t){return w(this,null,function*(){let{auth:e,user:n}=t;return q(n,e,"internal-error"),fB(n,new Hc(t),t.bypassAuthState)})}var I_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PB;case"linkViaPopup":case"linkViaRedirect":return kB;case"reauthViaPopup":case"reauthViaRedirect":return OB;default:zn(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var A7=new Zi(2e3,1e4);var FB="pendingRedirect",fh=new Map,E_=class t extends I_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=fh.get(this.auth._key());if(!e){try{let r=(yield LB(this.resolver,this.auth))?yield xr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return xr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,xr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function LB(t,e){return w(this,null,function*(){let n=jB(e),r=UB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function VB(t,e){fh.set(t._key(),e)}function UB(t){return yr(t._redirectPersistence)}function jB(t){return hh(FB,t.config.apiKey,t.name)}function BB(t,e,n=!1){return w(this,null,function*(){if(In(t.app))return Promise.reject(_r(t));let r=ts(t),i=MB(r,e),o=yield new E_(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var $B=10*60*1e3,C_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$B&&this.cachedEventUids.clear(),this.cachedEventUids.has(kS(e))}saveEventToCache(e){this.cachedEventUids.add(kS(e)),this.lastProcessedEventTime=Date.now()}};function kS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function HB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mA(t);default:return!1}}function qB(n){return w(this,arguments,function*(t,e={}){return si(t,"GET","/v1/projects",e)})}var GB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WB=/^https?/;function zB(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield qB(t);for(let n of e)try{if(KB(n))return}catch{}zn(t,"unauthorized-domain")})}function KB(t){let e=a_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WB.test(n))return!1;if(GB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var QB=new Zi(3e4,6e4);function FS(){let t=Wn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YB(t){return new Promise((e,n)=>{var r,i,s;function o(){FS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FS(),n(Xi(t,"network-request-failed"))},timeout:QB.get()})}if(!((i=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Wn().gapi)===null||s===void 0)&&s.load)o();else{let a=iA("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(Xi(t,"network-request-failed"))},rA(`${eB()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ph=null,e})}var ph=null;function JB(t){return ph=ph||YB(t),ph}var XB=new Zi(5e3,15e3),ZB="__/auth/iframe",e$="emulator/auth/iframe",t$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r$(t){let e=t.config;q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?S_(e,e$):`https://${t.config.authDomain}/${ZB}`,r={apiKey:e.apiKey,appName:t.name,v:Gn},i=n$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Wi(r).slice(1)}`}function i$(t){return w(this,null,function*(){let e=yield JB(t),n=Wn().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:r$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t$,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Xi(t,"network-request-failed"),a=Wn().setTimeout(()=>{s(o)},XB.get());function u(){Wn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var s$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o$=500,a$=600,c$="_blank",u$="http://localhost",Th=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function l$(t,e,n,r=o$,i=a$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},s$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ke().toLowerCase();n&&(a=YS(l)?c$:n),QS(l)&&(e=e||u$,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[I,S])=>`${m}${I}=${S},`,"");if(z2(l)&&a!=="_self")return d$(e||"",a),new Th(null);let p=window.open(e||"",a,h);q(p,t,"popup-blocked");try{p.focus()}catch{}return new Th(p)}function d$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var h$="__/auth/handler",f$="emulator/auth/handler",p$=encodeURIComponent("fac");function LS(t,e,n,r,i,s){return w(this,null,function*(){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gn,eventId:i};if(e instanceof Ih){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Nc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof y_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${p$}=${encodeURIComponent(u)}`:"";return`${g$(t)}?${Wi(a).slice(1)}${l}`})}function g$({config:t}){return t.emulator?S_(t,f$):`https://${t.authDomain}/${h$}`}var o_="webStorageSupport",b_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=BB,this._overrideRedirectResult=VB}_openPopup(e,n,r,i){return w(this,null,function*(){var s;ri((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield LS(e,n,r,a_(),i);return l$(e,o,dA())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield LS(e,n,r,a_(),i);return EB(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ri(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield i$(e),r=new C_(e);return n.register("authEvent",i=>(q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(o_,{type:o_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[o_];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tA()||N_()||Dh()}},yA=b_;var VS="@firebase/auth",US="1.7.3";var T_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function m$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y$(t){qn(new Lt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nA(t)},l=new p_(r,i,s,u);return rB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qn(new Lt("auth-internal",e=>{let n=ts(e.getProvider("auth").getImmediate());return(r=>new T_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(VS,US,m$(t)),xe(VS,US,"esm2017")}var _$=5*60,v$=jy("authIdTokenMaxAge")||_$,jS=null,w$=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>v$)return;let i=n?.token;jS!==i&&(jS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function B_(t=Zr()){let e=Qi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=M_(t,{popupRedirectResolver:yA,persistence:[gA,lA,j_]}),r=jy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=w$(s.toString());V_(n,o,()=>o(n.currentUser)),L_(n,a=>o(a))}}let i=Vy("auth");return i&&P_(n,`http://${i}`),n}function I$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}X2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Xi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",I$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y$("Browser");var _A="auth",Cn=class{constructor(e){return e}},ns=class{constructor(){return Ji(_A)}};var $_=new $("angularfire2.auth-instances");function dH(t,e){let n=To(_A,t,e);return n&&new Cn(n)}function hH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Cn(r)}}var fH={provide:ns,deps:[[new ke,$_]]},pH={provide:Cn,useFactory:dH,deps:[[new ke,$_],En]},gH=(()=>{class t{constructor(){xe("angularfire",pr.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Ye({providers:[pH,fH]})}return t})();function vA(t,...e){return{ngModule:gH,providers:[{provide:$_,useFactory:hH(t),multi:!0,deps:[ce,ft,ti,gr,[new ke,ei],...e]}]}}var wA=Qt(k_,!0);var IA=Qt(B_,!0);var EA=Qt(F_,!0);var CA=Qt(U_,!0);var bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TA={};var q_,DA;(function(){var t;function e(C,y){function _(){}_.prototype=y.prototype,C.D=y.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(E,b,D){for(var v=Array(arguments.length-2),Zn=2;Zn<arguments.length;Zn++)v[Zn-2]=arguments[Zn];return y.prototype[b].apply(E,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)E[b]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(b=0;16>b;++b)E[b]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=C.g[0],_=C.g[1],b=C.g[2];var D=C.g[3],v=y+(D^_&(b^D))+E[0]+3614090360&4294967295;y=_+(v<<7&4294967295|v>>>25),v=D+(b^y&(_^b))+E[1]+3905402710&4294967295,D=y+(v<<12&4294967295|v>>>20),v=b+(_^D&(y^_))+E[2]+606105819&4294967295,b=D+(v<<17&4294967295|v>>>15),v=_+(y^b&(D^y))+E[3]+3250441966&4294967295,_=b+(v<<22&4294967295|v>>>10),v=y+(D^_&(b^D))+E[4]+4118548399&4294967295,y=_+(v<<7&4294967295|v>>>25),v=D+(b^y&(_^b))+E[5]+1200080426&4294967295,D=y+(v<<12&4294967295|v>>>20),v=b+(_^D&(y^_))+E[6]+2821735955&4294967295,b=D+(v<<17&4294967295|v>>>15),v=_+(y^b&(D^y))+E[7]+4249261313&4294967295,_=b+(v<<22&4294967295|v>>>10),v=y+(D^_&(b^D))+E[8]+1770035416&4294967295,y=_+(v<<7&4294967295|v>>>25),v=D+(b^y&(_^b))+E[9]+2336552879&4294967295,D=y+(v<<12&4294967295|v>>>20),v=b+(_^D&(y^_))+E[10]+4294925233&4294967295,b=D+(v<<17&4294967295|v>>>15),v=_+(y^b&(D^y))+E[11]+2304563134&4294967295,_=b+(v<<22&4294967295|v>>>10),v=y+(D^_&(b^D))+E[12]+1804603682&4294967295,y=_+(v<<7&4294967295|v>>>25),v=D+(b^y&(_^b))+E[13]+4254626195&4294967295,D=y+(v<<12&4294967295|v>>>20),v=b+(_^D&(y^_))+E[14]+2792965006&4294967295,b=D+(v<<17&4294967295|v>>>15),v=_+(y^b&(D^y))+E[15]+1236535329&4294967295,_=b+(v<<22&4294967295|v>>>10),v=y+(b^D&(_^b))+E[1]+4129170786&4294967295,y=_+(v<<5&4294967295|v>>>27),v=D+(_^b&(y^_))+E[6]+3225465664&4294967295,D=y+(v<<9&4294967295|v>>>23),v=b+(y^_&(D^y))+E[11]+643717713&4294967295,b=D+(v<<14&4294967295|v>>>18),v=_+(D^y&(b^D))+E[0]+3921069994&4294967295,_=b+(v<<20&4294967295|v>>>12),v=y+(b^D&(_^b))+E[5]+3593408605&4294967295,y=_+(v<<5&4294967295|v>>>27),v=D+(_^b&(y^_))+E[10]+38016083&4294967295,D=y+(v<<9&4294967295|v>>>23),v=b+(y^_&(D^y))+E[15]+3634488961&4294967295,b=D+(v<<14&4294967295|v>>>18),v=_+(D^y&(b^D))+E[4]+3889429448&4294967295,_=b+(v<<20&4294967295|v>>>12),v=y+(b^D&(_^b))+E[9]+568446438&4294967295,y=_+(v<<5&4294967295|v>>>27),v=D+(_^b&(y^_))+E[14]+3275163606&4294967295,D=y+(v<<9&4294967295|v>>>23),v=b+(y^_&(D^y))+E[3]+4107603335&4294967295,b=D+(v<<14&4294967295|v>>>18),v=_+(D^y&(b^D))+E[8]+1163531501&4294967295,_=b+(v<<20&4294967295|v>>>12),v=y+(b^D&(_^b))+E[13]+2850285829&4294967295,y=_+(v<<5&4294967295|v>>>27),v=D+(_^b&(y^_))+E[2]+4243563512&4294967295,D=y+(v<<9&4294967295|v>>>23),v=b+(y^_&(D^y))+E[7]+1735328473&4294967295,b=D+(v<<14&4294967295|v>>>18),v=_+(D^y&(b^D))+E[12]+2368359562&4294967295,_=b+(v<<20&4294967295|v>>>12),v=y+(_^b^D)+E[5]+4294588738&4294967295,y=_+(v<<4&4294967295|v>>>28),v=D+(y^_^b)+E[8]+2272392833&4294967295,D=y+(v<<11&4294967295|v>>>21),v=b+(D^y^_)+E[11]+1839030562&4294967295,b=D+(v<<16&4294967295|v>>>16),v=_+(b^D^y)+E[14]+4259657740&4294967295,_=b+(v<<23&4294967295|v>>>9),v=y+(_^b^D)+E[1]+2763975236&4294967295,y=_+(v<<4&4294967295|v>>>28),v=D+(y^_^b)+E[4]+1272893353&4294967295,D=y+(v<<11&4294967295|v>>>21),v=b+(D^y^_)+E[7]+4139469664&4294967295,b=D+(v<<16&4294967295|v>>>16),v=_+(b^D^y)+E[10]+3200236656&4294967295,_=b+(v<<23&4294967295|v>>>9),v=y+(_^b^D)+E[13]+681279174&4294967295,y=_+(v<<4&4294967295|v>>>28),v=D+(y^_^b)+E[0]+3936430074&4294967295,D=y+(v<<11&4294967295|v>>>21),v=b+(D^y^_)+E[3]+3572445317&4294967295,b=D+(v<<16&4294967295|v>>>16),v=_+(b^D^y)+E[6]+76029189&4294967295,_=b+(v<<23&4294967295|v>>>9),v=y+(_^b^D)+E[9]+3654602809&4294967295,y=_+(v<<4&4294967295|v>>>28),v=D+(y^_^b)+E[12]+3873151461&4294967295,D=y+(v<<11&4294967295|v>>>21),v=b+(D^y^_)+E[15]+530742520&4294967295,b=D+(v<<16&4294967295|v>>>16),v=_+(b^D^y)+E[2]+3299628645&4294967295,_=b+(v<<23&4294967295|v>>>9),v=y+(b^(_|~D))+E[0]+4096336452&4294967295,y=_+(v<<6&4294967295|v>>>26),v=D+(_^(y|~b))+E[7]+1126891415&4294967295,D=y+(v<<10&4294967295|v>>>22),v=b+(y^(D|~_))+E[14]+2878612391&4294967295,b=D+(v<<15&4294967295|v>>>17),v=_+(D^(b|~y))+E[5]+4237533241&4294967295,_=b+(v<<21&4294967295|v>>>11),v=y+(b^(_|~D))+E[12]+1700485571&4294967295,y=_+(v<<6&4294967295|v>>>26),v=D+(_^(y|~b))+E[3]+2399980690&4294967295,D=y+(v<<10&4294967295|v>>>22),v=b+(y^(D|~_))+E[10]+4293915773&4294967295,b=D+(v<<15&4294967295|v>>>17),v=_+(D^(b|~y))+E[1]+2240044497&4294967295,_=b+(v<<21&4294967295|v>>>11),v=y+(b^(_|~D))+E[8]+1873313359&4294967295,y=_+(v<<6&4294967295|v>>>26),v=D+(_^(y|~b))+E[15]+4264355552&4294967295,D=y+(v<<10&4294967295|v>>>22),v=b+(y^(D|~_))+E[6]+2734768916&4294967295,b=D+(v<<15&4294967295|v>>>17),v=_+(D^(b|~y))+E[13]+1309151649&4294967295,_=b+(v<<21&4294967295|v>>>11),v=y+(b^(_|~D))+E[4]+4149444226&4294967295,y=_+(v<<6&4294967295|v>>>26),v=D+(_^(y|~b))+E[11]+3174756917&4294967295,D=y+(v<<10&4294967295|v>>>22),v=b+(y^(D|~_))+E[2]+718787259&4294967295,b=D+(v<<15&4294967295|v>>>17),v=_+(D^(b|~y))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(b+(v<<21&4294967295|v>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var _=y-this.blockSize,E=this.B,b=this.h,D=0;D<y;){if(b==0)for(;D<=_;)i(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<y;)if(E[b++]=C.charCodeAt(D++),b==this.blockSize){i(this,E),b=0;break}}else for(;D<y;)if(E[b++]=C[D++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var _=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=_&255,_/=256;for(this.u(C),C=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)C[_++]=this.g[y]>>>E&255;return C};function s(C,y){var _=a;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=y(C)}function o(C,y){this.h=y;for(var _=[],E=!0,b=C.length-1;0<=b;b--){var D=C[b]|0;E&&D==y||(_[b]=D,E=!1)}this.g=_}var a={};function u(C){return-128<=C&&128>C?s(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return N(l(-C));for(var y=[],_=1,E=0;C>=_;E++)y[E]=C/_|0,_*=4294967296;return new o(y,0)}function h(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return N(h(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,b=0;b<C.length;b+=8){var D=Math.min(8,C.length-b),v=parseInt(C.substring(b,b+D),y);8>D?(D=l(Math.pow(y,D)),E=E.j(D).add(l(v))):(E=E.j(_),E=E.add(l(v)))}return E}var p=u(0),m=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-N(this).m();for(var C=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);C+=(0<=E?E:4294967296+E)*y,y*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(R(this))return"-"+N(this).toString(C);for(var y=l(Math.pow(C,6)),_=this,E="";;){var b=me(_,y).g;_=L(_,b.j(y));var D=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=b,S(_))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=L(this,C),R(C)?-1:S(C)?0:1};function N(C){for(var y=C.g.length,_=[],E=0;E<y;E++)_[E]=~C.g[E];return new o(_,~C.h).add(m)}t.abs=function(){return R(this)?N(this):this},t.add=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0,b=0;b<=y;b++){var D=E+(this.i(b)&65535)+(C.i(b)&65535),v=(D>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);E=v>>>16,D&=65535,v&=65535,_[b]=v<<16|D}return new o(_,_[_.length-1]&-2147483648?-1:0)};function L(C,y){return C.add(N(y))}t.j=function(C){if(S(this)||S(C))return p;if(R(this))return R(C)?N(this).j(N(C)):N(N(this).j(C));if(R(C))return N(this.j(N(C)));if(0>this.l(I)&&0>C.l(I))return l(this.m()*C.m());for(var y=this.g.length+C.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<C.g.length;b++){var D=this.i(E)>>>16,v=this.i(E)&65535,Zn=C.i(b)>>>16,aa=C.i(b)&65535;_[2*E+2*b]+=v*aa,J(_,2*E+2*b),_[2*E+2*b+1]+=D*aa,J(_,2*E+2*b+1),_[2*E+2*b+1]+=v*Zn,J(_,2*E+2*b+1),_[2*E+2*b+2]+=D*Zn,J(_,2*E+2*b+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function J(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function K(C,y){this.g=C,this.h=y}function me(C,y){if(S(y))throw Error("division by zero");if(S(C))return new K(p,p);if(R(C))return y=me(N(C),y),new K(N(y.g),N(y.h));if(R(y))return y=me(C,N(y)),new K(N(y.g),y.h);if(30<C.g.length){if(R(C)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(C);)_=ut(_),E=ut(E);var b=_e(_,1),D=_e(E,1);for(E=_e(E,2),_=_e(_,2);!S(E);){var v=D.add(E);0>=v.l(C)&&(b=b.add(_),D=v),E=_e(E,1),_=_e(_,1)}return y=L(C,b.j(y)),new K(b,y)}for(b=p;0<=C.l(y);){for(_=Math.max(1,Math.floor(C.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=l(_),v=D.j(y);R(v)||0<v.l(C);)_-=E,D=l(_),v=D.j(y);S(D)&&(D=m),b=b.add(D),C=L(C,v)}return new K(b,C)}t.A=function(C){return me(this,C).h},t.and=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&C.i(E);return new o(_,this.h&C.h)},t.or=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|C.i(E);return new o(_,this.h|C.h)},t.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^C.i(E);return new o(_,this.h^C.h)};function ut(C){for(var y=C.g.length+1,_=[],E=0;E<y;E++)_[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(_,C.h)}function _e(C,y){var _=y>>5;y%=32;for(var E=C.g.length-_,b=[],D=0;D<E;D++)b[D]=0<y?C.i(D+_)>>>y|C.i(D+_+1)<<32-y:C.i(D+_);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,DA=TA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,q_=TA.Integer=o}).apply(typeof bA<"u"?bA:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var G_,W_,Ao,z_,Gc,xh,K_,Q_,Y_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function I(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,A){for(var P=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)P[Ce-2]=arguments[Ce];return d.prototype[T].apply(g,P)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,A=g.length||0;c.length=T+A;for(let P=0;P<A;P++)c[T+P]=g[P]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function J(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var ut=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function _e(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function D(c){a.setTimeout(()=>{throw c},0)}function v(){var c=xf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Zn{constructor(){this.h=this.g=null}add(d,f){let g=aa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var aa=new L(()=>new KN,c=>c.reset());class KN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ca,ua=!1,xf=new Zn,jI=()=>{let c=a.Promise.resolve(void 0);ca=()=>{c.then(QN)}};var QN=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(f){D(f)}var d=aa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ua=!1};function Dr(){this.s=this.s,this.C=this.C}Dr.prototype.s=!1,Dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var YN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function la(c,d){if(pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ut){e:{try{me(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&la.aa.h.call(this)}}S(la,pt);var JN={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var da="closure_listenable_"+(1e6*Math.random()|0),XN=0;function ZN(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++XN,this.da=this.fa=!1}function Cu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bu(c){this.src=c,this.g={},this.h=0}bu.prototype.add=function(c,d,f,g,T){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Mf(c,d,g,T);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new ZN(d,this.src,A,!!g,T),d.fa=f,c.push(d)),d};function Nf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(Cu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Mf(c,d,f,g){for(var T=0;T<c.length;++T){var A=c[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var Pf="closure_lm_"+(1e6*Math.random()|0),Of={};function BI(c,d,f,g,T){if(g&&g.once)return HI(c,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)BI(c,d[A],f,g,T);return null}return f=Vf(f),c&&c[da]?c.K(d,f,l(g)?!!g.capture:!!g,T):$I(c,d,f,!1,g,T)}function $I(c,d,f,g,T,A){if(!d)throw Error("Invalid event type");var P=l(T)?!!T.capture:!!T,Ce=Ff(c);if(Ce||(c[Pf]=Ce=new bu(c)),f=Ce.add(d,f,g,P,A),f.proxy)return f;if(g=eM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)YN||(T=P),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(GI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function eM(){function c(f){return d.call(c.src,c.listener,f)}let d=tM;return c}function HI(c,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)HI(c,d[A],f,g,T);return null}return f=Vf(f),c&&c[da]?c.L(d,f,l(g)?!!g.capture:!!g,T):$I(c,d,f,!0,g,T)}function qI(c,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)qI(c,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=Vf(f),c&&c[da]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Mf(A,f,g,T),-1<f&&(Cu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ff(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Mf(d,f,g,T)),(f=-1<c?d[c]:null)&&kf(f))}function kf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[da])Nf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(GI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ff(d))?(Nf(f,c),f.h==0&&(f.src=null,d[Pf]=null)):Cu(c)}}}function GI(c){return c in Of?Of[c]:Of[c]="on"+c}function tM(c,d){if(c.da)c=!0;else{d=new la(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&kf(c),c=f.call(g,d)}return c}function Ff(c){return c=c[Pf],c instanceof bu?c:null}var Lf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vf(c){return typeof c=="function"?c:(c[Lf]||(c[Lf]=function(d){return c.handleEvent(d)}),c[Lf])}function gt(){Dr.call(this),this.i=new bu(this),this.M=this,this.F=null}S(gt,Dr),gt.prototype[da]=!0,gt.prototype.removeEventListener=function(c,d,f,g){qI(this,c,d,f,g)};function St(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new pt(d,c);else if(d instanceof pt)d.target=d.target||c;else{var T=d;d=new pt(g,c),E(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];T=Tu(P,g,!0,d)&&T}if(P=d.g=c,T=Tu(P,g,!0,d)&&T,T=Tu(P,g,!1,d)&&T,f)for(A=0;A<f.length;A++)P=d.g=f[A],T=Tu(P,g,!1,d)&&T}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Cu(f[g]);delete c.g[d],c.h--}}this.F=null},gt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},gt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Tu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Ce=P.listener,lt=P.ha||P.src;P.fa&&Nf(c.i,P),T=Ce.call(lt,g)!==!1&&T}}return T&&!g.defaultPrevented}function WI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function zI(c){c.g=WI(()=>{c.g=null,c.i&&(c.i=!1,zI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nM extends Dr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:zI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(c){Dr.call(this),this.h=c,this.g={}}S(ha,Dr);var KI=[];function QI(c){_e(c.g,function(d,f){this.g.hasOwnProperty(f)&&kf(d)},c),c.g={}}ha.prototype.N=function(){ha.aa.N.call(this),QI(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uf=a.JSON.stringify,rM=a.JSON.parse,iM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function jf(){}jf.prototype.h=null;function YI(c){return c.h||(c.h=c.i())}function JI(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bf(){pt.call(this,"d")}S(Bf,pt);function $f(){pt.call(this,"c")}S($f,pt);var gi={},XI=null;function Du(){return XI=XI||new gt}gi.La="serverreachability";function ZI(c){pt.call(this,gi.La,c)}S(ZI,pt);function pa(c){let d=Du();St(d,new ZI(d))}gi.STAT_EVENT="statevent";function eE(c,d){pt.call(this,gi.STAT_EVENT,c),this.stat=d}S(eE,pt);function At(c){let d=Du();St(d,new eE(d,c))}gi.Ma="timingevent";function tE(c,d){pt.call(this,gi.Ma,c),this.size=d}S(tE,pt);function ga(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function sM(c,d,f,g,T,A){c.info(function(){if(c.g)if(A)for(var P="",Ce=A.split("&"),lt=0;lt<Ce.length;lt++){var ge=Ce[lt].split("=");if(1<ge.length){var mt=ge[0];ge=ge[1];var yt=mt.split("_");P=2<=yt.length&&yt[1]=="type"?P+(mt+"="+ge+"&"):P+(mt+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+P})}function oM(c,d,f,g,T,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+P})}function vs(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cM(c,f)+(g?" "+g:"")})}function aM(c,d){c.info(function(){return"TIMEOUT: "+d})}ma.prototype.info=function(){};function cM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return Uf(f)}catch{return d}}var Su={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hf;function Au(){}S(Au,jf),Au.prototype.g=function(){return new XMLHttpRequest},Au.prototype.i=function(){return{}},Hf=new Au;function Sr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rE}function rE(){this.i=null,this.g="",this.h=!1}var iE={},qf={};function Gf(c,d,f){c.L=1,c.v=Mu(er(d)),c.m=f,c.P=!0,sE(c,null)}function sE(c,d){c.F=Date.now(),Ru(c),c.A=er(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),vE(f.i,"t",g),c.C=0,f=c.j.J,c.h=new rE,c.g=LE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new nM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(KI[0]=T.toString()),T=KI);for(var A=0;A<T.length;A++){var P=BI(f,T[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),pa(),sM(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&tr(c)==3?d.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{let yt=tr(this.g);var d=this.g.Ba();let Es=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||DE(this.g)))){this.J||yt!=4||d==7||(d==8||0>=Es?pa(3):pa(2)),Wf(this);var f=this.g.Z();this.X=f;t:if(oE(this)){var g=DE(this.g);c="";var T=g.length,A=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),ya(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,oM(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,lt=this.g;if((Ce=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Ce)){var ge=Ce;break t}}ge=null}if(f=ge)vs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,f);else{this.o=!1,this.s=3,At(12),mi(this),ya(this);break e}}if(this.P){f=!0;let fn;for(;!this.J&&this.C<P.length;)if(fn=uM(this,P),fn==qf){yt==4&&(this.s=4,At(14),f=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==iE){this.s=4,At(15),vs(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else vs(this.i,this.l,fn,null),zf(this,fn);if(oE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||P.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)vs(this.i,this.l,P,"[Invalid Chunked Response]"),mi(this),ya(this);else if(0<P.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Zf(mt),mt.M=!0,At(11))}}else vs(this.i,this.l,P,null),zf(this,P);yt==4&&mi(this),this.o&&!this.J&&(yt==4?PE(this.j,this):(this.o=!1,Ru(this)))}else DM(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),mi(this),ya(this)}}}catch{}finally{}};function oE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function uM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?qf:(f=Number(d.substring(f,g)),isNaN(f)?iE:(g+=1,g+f>d.length?qf:(d=d.slice(g,g+f),c.C=g+f,d)))}Sr.prototype.cancel=function(){this.J=!0,mi(this)};function Ru(c){c.S=Date.now()+c.I,aE(c,c.I)}function aE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ga(m(c.ba,c),d)}function Wf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(aM(this.i,this.A),this.L!=2&&(pa(),At(17)),mi(this),this.s=2,ya(this)):aE(this,this.S-c)};function ya(c){c.j.G==0||c.J||PE(c.j,c)}function mi(c){Wf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,QI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function zf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Kf(f.h,c))){if(!c.K&&Kf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Lu(f),ku(f);else break e;Xf(f),At(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=ga(m(f.Za,f),6e3));if(1>=lE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _i(f,11)}else if((c.K||f.g==c)&&Lu(f),!J(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let ge=T[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let mt=ge[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=ge[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let Es=ge[5];Es!=null&&typeof Es=="number"&&0<Es&&(g=1.5*Es,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let fn=c.g;if(fn){let Uu=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var A=g.h;A.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Qf(A,A.h),A.h=null))}if(g.D){let ep=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;ep&&(g.ya=ep,Se(g.I,g.D,ep))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=FE(g,g.J?g.ia:null,g.W),P.K){dE(g.h,P);var Ce=P,lt=g.L;lt&&(Ce.I=lt),Ce.B&&(Wf(Ce),Ru(Ce)),g.g=P}else NE(g);0<f.i.length&&Fu(f)}else ge[0]!="stop"&&ge[0]!="close"||_i(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?_i(f,7):Jf(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}pa(4)}catch{}}var lM=class{constructor(c,d){this.g=c,this.map=d}};function cE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lE(c){return c.h?1:c.g?c.g.size:0}function Kf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Qf(c,d){c.g?c.g.add(d):c.h=d}function dE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}cE.prototype.cancel=function(){if(this.i=hE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function hE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function dM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function hM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function fE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=hM(c),g=dM(c),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],c)}var pE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var A=c[f].substring(0,g);T=c[f].substring(g+1)}else A=c[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function yi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof yi){this.h=c.h,xu(this,c.j),this.o=c.o,this.g=c.g,Nu(this,c.s),this.l=c.l;var d=c.i,f=new wa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),gE(this,f),this.m=c.m}else c&&(d=String(c).match(pE))?(this.h=!1,xu(this,d[1]||"",!0),this.o=_a(d[2]||""),this.g=_a(d[3]||"",!0),Nu(this,d[4]),this.l=_a(d[5]||"",!0),gE(this,d[6]||"",!0),this.m=_a(d[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}yi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(va(d,mE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(va(d,mE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(va(f,f.charAt(0)=="/"?mM:gM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",va(f,_M)),c.join("")};function er(c){return new yi(c)}function xu(c,d,f){c.j=f?_a(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Nu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function gE(c,d,f){d instanceof wa?(c.i=d,vM(c.i,c.h)):(f||(d=va(d,yM)),c.i=new wa(d,c.h))}function Se(c,d,f){c.i.set(d,f)}function Mu(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _a(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function va(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,pM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var mE=/[#\/\?@]/g,gM=/[#\?:]/g,mM=/[#\?]/g,yM=/[#\?@]/g,_M=/#/g;function wa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ar(c){c.g||(c.g=new Map,c.h=0,c.i&&fM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=wa.prototype,t.add=function(c,d){Ar(this),this.i=null,c=ws(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function yE(c,d){Ar(c),d=ws(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _E(c,d){return Ar(c),d=ws(c,d),c.g.has(d)}t.forEach=function(c,d){Ar(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){Ar(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},t.V=function(c){Ar(this);let d=[];if(typeof c=="string")_E(this,c)&&(d=d.concat(this.g.get(ws(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ar(this),this.i=null,c=ws(this,c),_E(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function vE(c,d,f){yE(c,d),0<f.length&&(c.i=null,c.g.set(ws(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var T=A;P[g]!==""&&(T+="="+encodeURIComponent(String(P[g]))),c.push(T)}}return this.i=c.join("&")};function ws(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function vM(c,d){d&&!c.j&&(Ar(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(yE(this,g),vE(this,T,f))},c)),c.j=d}function wM(c,d){let f=new ma;if(a.Image){let g=new Image;g.onload=I(Rr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=I(Rr,f,"TestLoadImage: error",!1,d,g),g.onabort=I(Rr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=I(Rr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function IM(c,d){let f=new ma,g=new AbortController,T=setTimeout(()=>{g.abort(),Rr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?Rr(f,"TestPingServer: ok",!0,d):Rr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Rr(f,"TestPingServer: error",!1,d)})}function Rr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function EM(){this.g=new iM}function CM(c,d,f){let g=f||"";try{fE(c,function(T,A){let P=T;l(T)&&(P=Uf(T)),d.push(g+A+"="+encodeURIComponent(P))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Ia(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ia,jf),Ia.prototype.g=function(){return new Pu(this.l,this.j)},Ia.prototype.i=function(c){return function(){return c}}({});function Pu(c,d){gt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Pu,gt),t=Pu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ca(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ea(this):Ca(this),this.readyState==3&&wE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ea(this))},t.Qa=function(c){this.g&&(this.response=c,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ca(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ca(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function IE(c){let d="";return _e(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Yf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=IE(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Se(c,d,f))}function Pe(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,gt);var bM=/^https?$/i,TM=["POST","PUT"];t=Pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hf.g(),this.v=this.o?YI(this.o):YI(Hf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){EE(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TM,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TE(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){EE(this,A)}};function EE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,CE(c),Ou(c)}function CE(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ou(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bE(this):this.bb())},t.bb=function(){bE(this)};function bE(c){if(c.h&&typeof o<"u"&&(!c.v[1]||tr(c)!=4||c.Z()!=2)){if(c.u&&tr(c)==4)WI(c.Ea,0,c);else if(St(c,"readystatechange"),tr(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var T=String(c.D).match(pE)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!bM.test(T?T.toLowerCase():"")}f=g}if(f)St(c,"complete"),St(c,"success");else{c.m=6;try{var A=2<tr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",CE(c)}}finally{Ou(c)}}}}function Ou(c,d){if(c.g){TE(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{f.onreadystatechange=g}catch{}}}function TE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function tr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rM(d)}};function DE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function DM(c){let d={};c=(c.g&&2<=tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(J(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}C(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function SE(c){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,c),this.cb=ba("retryDelaySeedMs",1e4,c),this.Wa=ba("forwardChannelMaxRetries",2,c),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new cE(c&&c.concurrentRequestLimit),this.Da=new EM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=SE.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){At(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=FE(this,null,this.W),Fu(this)};function Jf(c){if(AE(c),c.G==3){var d=c.U++,f=er(c.I);if(Se(f,"SID",c.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),Ta(c,f),d=new Sr(c,c.j,d),d.L=2,d.v=Mu(er(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=LE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ru(d)}kE(c)}function ku(c){c.g&&(Zf(c),c.g.cancel(),c.g=null)}function AE(c){ku(c),c.u&&(a.clearTimeout(c.u),c.u=null),Lu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Fu(c){if(!uE(c.h)&&!c.s){c.s=!0;var d=c.Ga;ca||jI(),ua||(ca(),ua=!0),xf.add(d,c),c.B=0}}function SM(c,d){return lE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ga(m(c.Ga,c,d),OE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Sr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=xE(this,T,d),f=er(this.I),Se(f,"RID",c),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Ta(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(IE(A)))+"&"+d:this.m&&Yf(f,this.m,A)),Qf(this.h,T),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),T.T=!0,Gf(T,f,null)):Gf(T,f,d),this.G=2}}else this.G==3&&(c?RE(this,c):this.i.length==0||uE(this.h)||RE(this))};function RE(c,d){var f;d?f=d.l:f=c.U++;let g=er(c.I);Se(g,"SID",c.K),Se(g,"RID",f),Se(g,"AID",c.T),Ta(c,g),c.m&&c.o&&Yf(g,c.m,c.o),f=new Sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=xE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Qf(c.h,f),Gf(f,g,d)}function Ta(c,d){c.H&&_e(c.H,function(f,g){Se(d,g,f)}),c.l&&fE({},function(f,g){Se(d,g,f)})}function xE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=T[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ce=!0;for(let lt=0;lt<f;lt++){let ge=T[lt].g,mt=T[lt].map;if(ge-=A,0>ge)A=Math.max(0,T[lt].g-100),Ce=!1;else try{CM(mt,P,"req"+ge+"_")}catch{g&&g(mt)}}if(Ce){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function NE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ca||jI(),ua||(ca(),ua=!0),xf.add(d,c),c.v=0}}function Xf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ga(m(c.Fa,c),OE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ME(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ga(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ku(this),ME(this))};function Zf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ME(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=er(c.qa);Se(d,"RID","rpc"),Se(d,"SID",c.K),Se(d,"AID",c.T),Se(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(d,"TO",c.ja),Se(d,"TYPE","xmlhttp"),Ta(c,d),c.m&&c.o&&Yf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Mu(er(d)),f.m=null,f.P=!0,sE(f,c)}t.Za=function(){this.C!=null&&(this.C=null,ku(this),Xf(this),At(19))};function Lu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function PE(c,d){var f=null;if(c.g==d){Lu(c),Zf(c),c.g=null;var g=2}else if(Kf(c.h,d))f=d.D,dE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=Du(),St(g,new tE(g,f)),Fu(c)}else NE(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&SM(c,d)||g==2&&Xf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function OE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function _i(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new yi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xu(g,"https"),Mu(g),T?wM(g.toString(),f):IM(g.toString(),f)}else At(2);c.G=0,c.l&&c.l.sa(d),kE(c),AE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function kE(c){if(c.G=0,c.ka=[],c.l){let d=hE(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function FE(c,d,f){var g=f instanceof yi?er(f):new yi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Nu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new yi(null);g&&xu(A,g),d&&(A.g=d),T&&Nu(A,T),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Se(g,f,d),Se(g,"VER",c.la),Ta(c,g),g}function LE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new Ia({eb:f})):new Pe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function VE(){}t=VE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vu(){}Vu.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){gt.call(this),this.g=new SE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!J(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!J(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Is(this)}S(jt,gt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){Jf(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Uf(c),c=f);d.i.push(new lM(d.Ya++,c)),d.G==3&&Fu(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,Jf(this.g),delete this.g,jt.aa.N.call(this)};function UE(c){Bf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(UE,Bf);function jE(){$f.call(this),this.status=1}S(jE,$f);function Is(c){this.g=c}S(Is,VE),Is.prototype.ua=function(){St(this.g,"a")},Is.prototype.ta=function(c){St(this.g,new UE(c))},Is.prototype.sa=function(c){St(this.g,new jE)},Is.prototype.ra=function(){St(this.g,"b")},Vu.prototype.createWebChannel=Vu.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Y_=vr.createWebChannelTransport=function(){return new Vu},Q_=vr.getStatEventTarget=function(){return Du()},K_=vr.Event=gi,xh=vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,Gc=vr.ErrorCode=Su,nE.COMPLETE="complete",z_=vr.EventType=nE,JI.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Ao=vr.WebChannel=JI,W_=vr.FetchXmlHttpFactory=Ia,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,G_=vr.XhrIo=Pe}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});var SA="@firebase/firestore";var it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");var Wo="10.12.0";var os=new $n("@firebase/firestore");function Wc(){return os.logLevel}function j(t,...e){if(os.logLevel<=te.DEBUG){let n=e.map(yw);os.debug(`Firestore (${Wo}): ${t}`,...n)}}function as(t,...e){if(os.logLevel<=te.ERROR){let n=e.map(yw);os.error(`Firestore (${Wo}): ${t}`,...n)}}function Fh(t,...e){if(os.logLevel<=te.WARN){let n=e.map(yw);os.warn(`Firestore (${Wo}): ${t}`,...n)}}function yw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function oe(t="Unexpected state"){let e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+t;throw as(e),new Error(e)}function ot(t,e){t||oe()}function Ae(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Lh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ev=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}},tv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},nv=class{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string"),new Lh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new it(e)}},rv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},iv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ov=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string"),this.R=n.token,new sv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function mH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=mH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function De(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ct=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Le=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ct(0,0))}static max(){return new t(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},He=class t extends Uh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},yH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=class t extends Uh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return yH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new H(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ne=class t{constructor(e){this.path=e}static fromPath(e){return new t(He.fromString(e))}static fromName(e){return new t(He.fromString(e).popFirst(5))}static empty(){return new t(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new He(e.slice()))}};var av=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};av.UNKNOWN_ID=-1;function _H(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new cs(i,ne.empty(),e)}function vH(t){return new cs(t.readTime,t.key,-1)}var cs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Le.min(),ne.empty(),-1)}static max(){return new t(Le.max(),ne.empty(),-1)}};function wH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}var IH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zA(t){return w(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==IH)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function EH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rf(t){return t.name==="IndexedDbTransactionError"}var CH=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function _w(t){return t==null}function Xc(t){return t===0&&1/t==-1/0}function bH(t){return typeof t=="number"&&Number.isInteger(t)&&!Xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var TH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CY=[...TH,"documentOverlays"],DH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SH=DH,bY=[...SH,"indexConfiguration","indexState","indexEntries"];function AA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nu(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Jt=class t{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xo(this.root,e,this.comparator,!0)}},xo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Jn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();let e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}};Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class t{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jh(this.data.getIterator())}getIteratorFrom(e){return new jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Yn=class t{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new t([])}unionWith(e){let n=new kt(Yt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var uv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ai=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uv("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ai.EMPTY_BYTE_STRING=new ai("");var AH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(ot(!!t),typeof t=="string"){let e=0,n=AH.exec(t);if(ot(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Po(t){return typeof t=="string"?ai.fromBase64String(t):ai.fromUint8Array(t)}function vw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QA(t){let e=t.mapValue.fields.__previous_value__;return vw(e)?QA(e):e}function Bh(t){let e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}var lv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},dv=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Nh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vw(t)?4:YA(t)?9007199254740991:10:oe()}function Xn(t,e){if(t===e)return!0;let n=Oo(t);if(n!==Oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bh(t).isEqual(Bh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ci(i.timestampValue),a=ci(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Po(i.bytesValue).isEqual(Po(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?Xc(o)===Xc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AA(o)!==AA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Xn(o[u],a[u])))return!1;return!0}(t,e);default:return oe()}}function Zc(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function ko(t,e){if(t===e)return 0;let n=Oo(t),r=Oo(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Qe(s.integerValue||s.doubleValue),u=Qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return RA(t.timestampValue,e.timestampValue);case 4:return RA(Bh(t),Bh(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Po(s),u=Po(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=De(a[l],u[l]);if(h!==0)return h}return De(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=De(Qe(s.latitude),Qe(o.latitude));return a!==0?a:De(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let h=ko(a[l],u[l]);if(h)return h}return De(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Nh.mapValue&&o===Nh.mapValue)return 0;if(s===Nh.mapValue)return 1;if(o===Nh.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=De(u[p],h[p]);if(m!==0)return m;let I=ko(a[u[p]],l[h[p]]);if(I!==0)return I}return De(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function RA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);let n=ci(t),r=ci(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function Fo(t){return hv(t)}function hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ci(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Po(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=hv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${hv(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function fv(t){return!!t&&"integerValue"in t}function ww(t){return!!t&&"arrayValue"in t}function Oh(t){return!!t&&"mapValue"in t}function Kc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return nu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Qn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=Yt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){nu(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Kc(this.value))}};function JA(t){let e=[];return nu(t.fields,(n,r)=>{let i=new Yt([n]);if(Oh(r)){let s=JA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Yn(e)}var Lo=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Le.min(),Le.min(),Le.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Le.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Le.min(),Le.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Le.min(),Le.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vo=class{constructor(e,n){this.position=e,this.inclusive=n}};function xA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ko(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}var Uo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function RH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var $h=class{},st=class t extends $h{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gv(e,n,r):n==="array-contains"?new _v(e,r):n==="in"?new vv(e,r):n==="not-in"?new wv(e,r):n==="array-contains-any"?new Iv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mv(e,r):new yv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ko(n,this.value)):n!==null&&Oo(this.value)===Oo(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ui=class t extends $h{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return XA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function XA(t){return t.op==="and"}function ZA(t){return xH(t)&&XA(t)}function xH(t){for(let e of t.filters)if(e instanceof ui)return!1;return!0}function pv(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Fo(t.value);if(ZA(t))return t.filters.map(e=>pv(e)).join(",");{let e=t.filters.map(n=>pv(n)).join(",");return`${t.op}(${e})`}}function eR(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(t,e):t instanceof ui?function(r,i){return i instanceof ui&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&eR(o,i.filters[a]),!0):!1}(t,e):void oe()}function tR(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`}(t):t instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(tR).join(" ,")+"}"}(t):"Filter"}var gv=class extends st{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){let n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}},mv=class extends st{constructor(e,n){super(e,"in",n),this.keys=nR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},yv=class extends st{constructor(e,n){super(e,"not-in",n),this.keys=nR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function nR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}var _v=class extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ww(n)&&Zc(n.arrayValue,this.value)}},vv=class extends st{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}},wv=class extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Zc(this.value.arrayValue,n)}},Iv=class extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ww(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zc(this.value.arrayValue,r))}};var Ev=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function MA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ev(t,e,n,r,i,s,o)}function Iw(t){let e=Ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_w(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fo(r)).join(",")),e.ue=n}return e.ue}function Ew(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NA(t.startAt,e.startAt)&&NA(t.endAt,e.endAt)}var jo=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function NH(t,e,n,r,i,s,o,a){return new jo(t,e,n,r,i,s,o,a)}function MH(t){return new jo(t)}function PA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PH(t){return t.collectionGroup!==null}function Qc(t){let e=Ae(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(Yt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Uo(s,r))}),n.has(Yt.keyField().canonicalString())||e.ce.push(new Uo(Yt.keyField(),r))}return e.ce}function is(t){let e=Ae(t);return e.le||(e.le=OH(e,Qc(t))),e.le}function OH(t,e){if(t.limitType==="F")return MA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Uo(i.field,s)});let n=t.endAt?new Vo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vo(t.startAt.position,t.startAt.inclusive):null;return MA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cv(t,e,n){return new jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rR(t,e){return Ew(is(t),is(e))&&t.limitType===e.limitType}function iR(t){return`${Iw(is(t))}|lt:${t.limitType}`}function zc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tR(i)).join(", ")}]`),_w(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fo(i)).join(",")),`Target(${r})`}(is(t))}; limitType=${t.limitType})`}function Cw(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Qc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=xA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Qc(r),i)||r.endAt&&!function(o,a,u){let l=xA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Qc(r),i))}(t,e)}function kH(t){return(e,n)=>{let r=!1;for(let i of Qc(t)){let s=FH(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function FH(t,e,n){let r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ko(u,l):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}var li=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return KA(this.inner)}size(){return this.innerSize}};var LH=new Jt(ne.comparator);function Hh(){return LH}var sR=new Jt(ne.comparator);function Mh(...t){let e=sR;for(let n of t)e=e.insert(n.key,n);return e}function oR(t){let e=sR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return Yc()}function aR(){return Yc()}function Yc(){return new li(t=>t.toString(),(t,e)=>t.isEqual(e))}var VH=new Jt(ne.comparator),UH=new kt(ne.comparator);function Et(...t){let e=UH;for(let n of t)e=e.add(n);return e}var jH=new kt(De);function BH(){return jH}function cR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xc(e)?"-0":e}}function uR(t){return{integerValue:""+t}}function $H(t,e){return bH(e)?uR(e):cR(t,e)}var Bo=class{constructor(){this._=void 0}};function HH(t,e,n){return t instanceof $o?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vw(s)&&(s=QA(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof us?dR(t,e):t instanceof ls?hR(t,e):function(i,s){let o=lR(i,s),a=OA(o)+OA(i.Pe);return fv(o)&&fv(i.Pe)?uR(a):cR(i.serializer,a)}(t,e)}function qH(t,e,n){return t instanceof us?dR(t,e):t instanceof ls?hR(t,e):n}function lR(t,e){return t instanceof Ho?function(r){return fv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var $o=class extends Bo{},us=class extends Bo{constructor(e){super(),this.elements=e}};function dR(t,e){let n=fR(e);for(let r of t.elements)n.some(i=>Xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ls=class extends Bo{constructor(e){super(),this.elements=e}};function hR(t,e){let n=fR(e);for(let r of t.elements)n=n.filter(i=>!Xn(i,r));return{arrayValue:{values:n}}}var Ho=class extends Bo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function OA(t){return Qe(t.integerValue||t.doubleValue)}function fR(t){return ww(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function GH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof us&&i instanceof us||r instanceof ls&&i instanceof ls?Mo(r.elements,i.elements,Xn):r instanceof Ho&&i instanceof Ho?Xn(r.Pe,i.Pe):r instanceof $o&&i instanceof $o}(t.transform,e.transform)}var bv=class{constructor(e,n){this.version=e,this.transformResults=n}},ss=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var qo=class{};function pR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qh(t.key,ss.none()):new ds(t.key,t.data,ss.none());{let n=t.data,r=Qn.empty(),i=new kt(Yt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Er(t.key,r,new Yn(i.toArray()),ss.none())}}function WH(t,e,n){t instanceof ds?function(i,s,o){let a=i.value.clone(),u=FA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(i,s,o){if(!kh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=FA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(gR(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jc(t,e,n,r){return t instanceof ds?function(s,o,a,u){if(!kh(s.precondition,o))return a;let l=s.value.clone(),h=LA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Er?function(s,o,a,u){if(!kh(s.precondition,o))return a;let l=LA(s.fieldTransforms,u,o),h=o.data;return h.setAll(gR(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return kh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=lR(r.transform,i||null);s!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,s))}return n||null}function kA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mo(r,i,(s,o)=>GH(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ds=class extends qo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Er=class extends qo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function gR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function FA(t,e,n){let r=new Map;ot(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qH(o,a,n[i]))}return r}function LA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,HH(s,o,e))}return r}var qh=class extends qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tv=class extends qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Dv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&WH(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Jc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=aR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=pR(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Et())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(n,r)=>kA(n,r))&&Mo(this.baseMutations,e.baseMutations,(n,r)=>kA(n,r))}},Sv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ot(e.mutations.length===r.length);let i=function(){return VH}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Av=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Be,he;function KH(t){switch(t){default:return oe();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function QH(t){if(t===void 0)return as("GRPC error has no .code"),x.UNKNOWN;switch(t){case Be.OK:return x.OK;case Be.CANCELLED:return x.CANCELLED;case Be.UNKNOWN:return x.UNKNOWN;case Be.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Be.INTERNAL:return x.INTERNAL;case Be.UNAVAILABLE:return x.UNAVAILABLE;case Be.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Be.NOT_FOUND:return x.NOT_FOUND;case Be.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Be.ABORTED:return x.ABORTED;case Be.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Be.DATA_LOSS:return x.DATA_LOSS;default:return oe()}}(he=Be||(Be={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var DY=new q_([4294967295,4294967295],0);var Rv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function xv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JH(t,e){return xv(t,e.toTimestamp())}function No(t){return ot(!!t),Le.fromTimestamp(function(n){let r=ci(n);return new Ct(r.seconds,r.nanos)}(t))}function mR(t,e){return Nv(t,e).canonicalString()}function Nv(t,e){let n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XH(t){let e=He.fromString(t);return ot(oq(e)),e}function Mv(t,e){return mR(t.databaseId,e.path)}function ZH(t){let e=XH(t);return e.length===4?He.emptyPath():tq(e)}function eq(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tq(t){return ot(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VA(t,e,n){return{name:Mv(t,e),fields:n.value.mapValue.fields}}function nq(t,e){let n;if(e instanceof ds)n={update:VA(t,e.key,e.value)};else if(e instanceof qh)n={delete:Mv(t,e.key)};else if(e instanceof Er)n={update:VA(t,e.key,e.data),updateMask:sq(e.fieldMask)};else{if(!(e instanceof Tv))return oe();n={verify:Mv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof $o)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof us)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ls)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ho)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JH(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function rq(t,e){return t&&t.length>0?(ot(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?No(i.updateTime):No(s);return o.isEqual(Le.min())&&(o=No(s)),new bv(o,i.transformResults||[])}(n,e))):[]}function iq(t){let e=ZH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ot(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=yR(p);return m instanceof ui&&ZA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new Uo(Ro(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,_w(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,I=p.values||[];return new Vo(I,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,I=p.values||[];return new Vo(I,m)}(n.endAt)),NH(e,i,o,s,a,"F",u,l)}function yR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ro(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ro(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ro(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ro(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(r=>yR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function Ro(t){return Yt.fromServerFormat(t.fieldPath)}function sq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Pv=class{constructor(e){this.ct=e}};function aq(t){let e=iq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cv(e,e.limit,"L"):e}var Gh=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Qe(e.integerValue));else if("doubleValue"in e){let r=Qe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Xc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=ci(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Po(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?YA(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):oe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ne.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Gh.bt=new Gh;var Ov=class{constructor(){this._n=new kv}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(cs.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},kv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(He.comparator)).toArray()}};var SY=new Uint8Array(0);var Kn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);var eu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Fv=class{constructor(){this.changes=new li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lo.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Lv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Vv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Jc(r.mutation,i,Yn.empty(),Ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Et()){let i=rs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Mh();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Et()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Hh(),o=Yc(),a=function(){return Yc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Er)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Jc(h.mutation,l,h.mutation.getFieldMask(),Ct.now())):o.set(l.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Lv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Yc(),i=new Jt((o,a)=>o-a),s=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Yn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Et()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=aR();h.forEach(m=>{if(!s.has(m)){let I=pR(n.get(m),r.get(m));I!==null&&p.set(m,I),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(rs()),a=-1,u=s;return o.next(l=>M.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Et())).next(h=>({batchId:a,changes:oR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Mh();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{let l=function(p,m){return new jo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Lo.newInvalidDocument(h)))});let a=Mh();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Jc(h.mutation,l,Yn.empty(),Ct.now()),Cw(n,l)&&(a=a.insert(u,l))}),a})}};var Uv=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:No(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:aq(i.bundledQuery),readTime:No(i.readTime)}}(n)),M.resolve()}};var jv=class{constructor(){this.overlays=new Jt(ne.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=rs();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=rs(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Jt((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=rs(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=rs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Av(n,r));let s=this.hr.get(n);s===void 0&&(s=Et(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var tu=class{constructor(){this.Pr=new kt($e.Ir),this.Tr=new kt($e.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new $e(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new $e(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new ne(new He([])),r=new $e(n,e),i=new $e(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ne(new He([])),r=new $e(n,e),i=new $e(n,e+1),s=Et();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new $e(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||De(e.pr,n.pr)}static Er(e,n){return De(e.pr,n.pr)||ne.comparator(e.key,n.key)}};var Bv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new kt($e.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Dv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new $e(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new $e(n,0),i=new $e(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(De);return n.forEach(i=>{let s=new $e(i,0),o=new $e(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;ne.isDocumentKey(s)||(s=s.child(""));let o=new $e(new ne(s),0),a=new kt(De);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ot(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{let s=new $e(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new $e(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $v=class{constructor(e){this.vr=e,this.docs=function(){return new Jt(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Lo.newInvalidDocument(n))}getEntries(e,n){let r=Hh();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lo.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Hh(),o=n.path,a=new ne(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||wH(vH(h),r)<=0||(i.has(h.key)||Cw(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Hv(this)}getSize(e){return M.resolve(this.size)}},Hv=class extends Fv{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var qv=class{constructor(e){this.persistence=e,this.Mr=new li(n=>Iw(n),Ew),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new tu,this.targetCount=0,this.Lr=eu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}};var Gv=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new CH(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qv(this),this.indexManager=new Ov,this.remoteDocumentCache=function(i){return new $v(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Pv(n),this.$r=new Uv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Bv(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Wv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Wv=class extends cv{constructor(e){super(),this.currentSequenceNumber=e}},zv=class t{constructor(e){this.persistence=e,this.zr=new tu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{let i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Kv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Et(),i=Et();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Qv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yv=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return tS()?8:EH(Ke())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Qv;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Wc()<=te.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",zc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(Wc()<=te.DEBUG&&j("QueryEngine","Query:",zc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Wc()<=te.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",zc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(n))):M.resolve())}ji(e,n){if(PA(n))return M.resolve(null);let r=is(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cv(n,null,"F"),r=is(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Et(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,Cv(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return PA(n)||i.isEqual(Le.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?M.resolve(null):(Wc()<=te.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zc(n)),this.es(e,o,n,_H(i,-1)).next(a=>a))})}Zi(e,n){let r=new kt(kH(e));return n.forEach((i,s)=>{Cw(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Wc()<=te.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",zc(n)),this.zi.getDocumentsMatchingQuery(e,n,cs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jv=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Jt(De),this.rs=new li(s=>Iw(s),Ew),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vv(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function cq(t,e,n,r){return new Jv(t,e,n,r)}function _R(t,e){return w(this,null,function*(){let n=Ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=Et();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function uq(t,e){let n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),I=M.resolve();return m.forEach(S=>{I=I.next(()=>h.getEntry(u,S)).next(R=>{let N=l.docVersions.get(S);ot(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Et();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lq(t){let e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function dq(t,e){let n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Wh=class{constructor(){this.activeTargetIds=BH()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xv=class{constructor(){this.no=new Wh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Wh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Zv=class{io(e){}shutdown(){}};var zh=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ph=null;function J_(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}var hq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ew=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var It="WebChannelConnection",tw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=J_(),u=this.vo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fh("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=hq[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=J_();return new Promise((o,a)=>{let u=new G_;u.setWithCredentials(!0),u.listenOnce(z_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gc.NO_ERROR:let h=u.getResponseJson();j(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Gc.TIMEOUT:j(It,`RPC '${e}' ${s} timed out`),a(new H(x.DEADLINE_EXCEEDED,"Request time out"));break;case Gc.HTTP_ERROR:let p=u.getStatus();if(j(It,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let S=function(N){let L=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(L)>=0?L:x.UNKNOWN}(I.status);a(new H(S,I.message))}else a(new H(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new H(x.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{j(It,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(It,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=J_(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Y_(),a=Q_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new W_({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");j(It,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,I=!1,S=new ew({lo:N=>{I?j(It,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(j(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(It,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},ho:()=>p.close()}),R=(N,L,J)=>{N.listen(L,K=>{try{J(K)}catch(me){setTimeout(()=>{throw me},0)}})};return R(p,Ao.EventType.OPEN,()=>{I||(j(It,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),R(p,Ao.EventType.CLOSE,()=>{I||(I=!0,j(It,`RPC '${e}' stream ${i} transport closed`),S.po())}),R(p,Ao.EventType.ERROR,N=>{I||(I=!0,Fh(It,`RPC '${e}' stream ${i} transport errored:`,N),S.po(new H(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,Ao.EventType.MESSAGE,N=>{var L;if(!I){let J=N.data[0];ot(!!J);let K=J,me=K.error||((L=K[0])===null||L===void 0?void 0:L.error);if(me){j(It,`RPC '${e}' stream ${i} received error:`,me);let ut=me.status,_e=function(_){let E=Be[_];if(E!==void 0)return QH(E)}(ut),C=me.message;_e===void 0&&(_e=x.INTERNAL,C="Unknown error status: "+ut+" with message "+me.message),I=!0,S.po(new H(_e,C)),p.close()}else j(It,`RPC '${e}' stream ${i} received:`,J),S.yo(J)}}),R(a,K_.STAT_EVENT,N=>{N.stat===xh.PROXY?j(It,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===xh.NOPROXY&&j(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}};function X_(){return typeof document<"u"?document:null}function sf(t){return new Rv(t,!0)}var Kh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var nw=class{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Kh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return w(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return w(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return w(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new H(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>w(this,null,function*(){this.state=0,this.start()}))}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var rw=class extends nw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=rq(e.writeResults,e.commitTime),r=No(e.commitTime);return this.listener.A_(r,n)}return ot(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=eq(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>nq(this.serializer,r))};this.i_(n)}};var iw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new H(x.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Nv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(x.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Nv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(x.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},sw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(as(n),this.y_=!1):j("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var ow=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>w(this,null,function*(){iu(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Ae(u);l.M_.add(4),yield ru(l),l.N_.set("Unknown"),l.M_.delete(4),yield of(l)})}(this))}))}),this.N_=new sw(r,i)}};function of(t){return w(this,null,function*(){if(iu(t))for(let e of t.x_)yield e(!0)})}function ru(t){return w(this,null,function*(){for(let e of t.x_)yield e(!1)})}function iu(t){return Ae(t).M_.size===0}function vR(t,e,n){return w(this,null,function*(){if(!rf(e))throw e;t.M_.add(1),yield ru(t),t.N_.set("Offline"),n||(n=()=>lq(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield of(t)}))})}function wR(t,e){return e().catch(n=>vR(t,n,e))}function af(t){return w(this,null,function*(){let e=Ae(t),n=di(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;fq(e);)try{let i=yield dq(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,pq(e,i)}catch(i){yield vR(e,i)}IR(e)&&ER(e)})}function fq(t){return iu(t)&&t.v_.length<10}function pq(t,e){t.v_.push(e);let n=di(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function IR(t){return iu(t)&&!di(t).Zo()&&t.v_.length>0}function ER(t){di(t).start()}function gq(t){return w(this,null,function*(){di(t).V_()})}function mq(t){return w(this,null,function*(){let e=di(t);for(let n of t.v_)e.d_(n.mutations)})}function yq(t,e,n){return w(this,null,function*(){let r=t.v_.shift(),i=Sv.from(r,e,n);yield wR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield af(t)})}function _q(t,e){return w(this,null,function*(){e&&di(t).E_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return KH(o)&&o!==x.ABORTED}(i.code)){let s=r.v_.shift();di(r).t_(),yield wR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield af(r)}})}(t,e)),IR(t)&&ER(t)})}function UA(t,e){return w(this,null,function*(){let n=Ae(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=iu(n);n.M_.add(3),yield ru(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield of(n)})}function vq(t,e){return w(this,null,function*(){let n=Ae(t);e?(n.M_.delete(2),yield of(n)):e||(n.M_.add(2),yield ru(n),n.N_.set("Unknown"))})}function di(t){return t.k_||(t.k_=function(n,r,i){let s=Ae(n);return s.f_(),new rw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:gq.bind(null,t),Ao:_q.bind(null,t),R_:mq.bind(null,t),A_:yq.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.k_.t_(),yield af(t)):(yield t.k_.stop(),t.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var aw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function CR(t,e){if(as("AsyncQueue",`${e}: ${t}`),rf(t))return new H(x.UNAVAILABLE,`${e}: ${t}`);throw t}var cw=class{constructor(){this.queries=new li(e=>iR(e),rR),this.onlineState="Unknown",this.z_=new Set}};function wq(t){t.z_.forEach(e=>{e.next()})}var jA,BA;(BA=jA||(jA={})).J_="default",BA.Cache="cache";var uw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new li(a=>iR(a),rR),this.Da=new Map,this.Ca=new Set,this.va=new Jt(ne.comparator),this.Fa=new Map,this.Ma=new tu,this.xa={},this.Oa=new Map,this.Na=eu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Iq(t,e,n){return w(this,null,function*(){let r=Tq(t);try{let i=yield function(o,a){let u=Ae(o),l=Ct.now(),h=a.reduce((I,S)=>I.add(S.key),Et()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=Hh(),R=Et();return u.os.getEntries(I,h).next(N=>{S=N,S.forEach((L,J)=>{J.isValidDocument()||(R=R.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(N=>{p=N;let L=[];for(let J of a){let K=zH(J,p.get(J.key).overlayedDocument);K!=null&&L.push(new Er(J.key,K,JA(K.value.mapValue),ss.exists(!0)))}return u.mutationQueue.addMutationBatch(I,l,L,a)}).next(N=>{m=N;let L=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(I,N.batchId,L)})}).then(()=>({batchId:m.batchId,changes:oR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Jt(De)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield cf(r,i.changes),yield af(r.remoteStore)}catch(i){let s=CR(i,"Failed to persist write");n.reject(s)}})}function $A(t,e,n){let r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Ae(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(a)&&(l=!0)}),l&&wq(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Eq(t,e){return w(this,null,function*(){let n=Ae(t),r=e.batch.batchId;try{let i=yield uq(n.localStore,e);TR(n,r,null),bR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield cf(n,i)}catch(i){yield zA(i)}})}function Cq(t,e,n){return w(this,null,function*(){let r=Ae(t);try{let i=yield function(o,a){let u=Ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ot(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);TR(r,e,n),bR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield cf(r,i)}catch(i){yield zA(i)}})}function bR(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function TR(t,e,n){let r=Ae(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function cf(t,e,n){return w(this,null,function*(){let r=Ae(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let h=Kv.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return w(this,null,function*(){let h=Ae(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.qi,I=>h.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>M.forEach(m.Qi,I=>h.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!rf(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let I=h.ns.get(m),S=I.snapshotVersion,R=I.withLastLimboFreeSnapshotVersion(S);h.ns=h.ns.insert(m,R)}}})}(r.localStore,s))})}function bq(t,e){return w(this,null,function*(){let n=Ae(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield _R(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new H(x.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cf(n,r.us)}})}function Tq(t){let e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cq.bind(null,e),e}var Qh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return cq(this.persistence,new Yv,e.initialUser,this.serializer)}createPersistence(e){return new Gv(zv.Hr,this.serializer)}createSharedClientState(e){return new Xv}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var lw=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$A(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bq.bind(null,this.syncEngine),yield vq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new cw}()}createDatastore(e){let n=sf(e.databaseInfo.databaseId),r=function(s){return new tw(s)}(e.databaseInfo);return function(s,o,a,u){return new iw(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ow(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$A(this.syncEngine,n,0),function(){return zh.D()?new zh:new Zv}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new uw(i,s,o,a,u,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e;yield function(r){return w(this,null,function*(){let i=Ae(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ru(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var dw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=it.UNAUTHENTICATED,this.clientId=Vh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=CR(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Z_(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield _R(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function HA(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Sq(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>UA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>UA(e.remoteStore,i)),t._onlineComponents=e})}function Dq(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Sq(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Z_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Dq(n))throw n;Fh("Error using user provided cache. Falling back to memory cache: "+n),yield Z_(t,new Qh)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Z_(t,new Qh);return t._offlineComponents})}function Aq(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield HA(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield HA(t,new lw))),t._onlineComponents})}function Rq(t){return Aq(t).then(e=>e.syncEngine)}function DR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var qA=new Map;function SR(t,e,n){if(!n)throw new H(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xq(t,e,n,r){if(e===!0&&r===!0)throw new H(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GA(t){if(!ne.isDocumentKey(t))throw new H(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function WA(t){if(ne.isDocumentKey(t))throw new H(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function AR(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=bw(t);throw new H(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Go=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ev;switch(r.type){case"firstParty":return new iv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=qA.get(n);r&&(j("ComponentProvider","Removing Datastore"),qA.delete(n),r.terminate())}(this),Promise.resolve()}};function RR(t,e,n,r={}){var i;let s=(t=AR(t,Go))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=it.MOCK_USER;else{a=rh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new H(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new it(l)}t._authCredentials=new tv(new Lh(a,u))}}var hw=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ir=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},oi=class t extends hw{constructor(e,n,r){super(e,n,MH(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new ne(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xR(t,e,...n){if(t=rt(t),SR("collection","path",e),t instanceof Go){let r=He.fromString(e,...n);return WA(r),new oi(t,null,r)}{if(!(t instanceof Ir||t instanceof oi))throw new H(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return WA(r),new oi(t.firestore,null,r)}}function NR(t,e,...n){if(t=rt(t),arguments.length===1&&(e=Vh.newId()),SR("doc","path",e),t instanceof Go){let r=He.fromString(e,...n);return GA(r),new Ir(t,null,new ne(r))}{if(!(t instanceof Ir||t instanceof oi))throw new H(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return GA(r),new Ir(t.firestore,t instanceof oi?t.converter:null,new ne(r))}}var fw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Kh(this,"async_queue_retry"),this.hu=()=>{let n=X_();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=X_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=X_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new wr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return w(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!rf(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw as("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=aw.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&oe()}verifyOperationInProgress(){}du(){return w(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Jh=class extends Go{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new fw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||PR(this),this._firestoreClient.terminate()}};function MR(t,e){let n=typeof t=="object"?t:Zr(),r=typeof t=="string"?t:e||"(default)",i=Qi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=nh("firestore");s&&RR(i,...s)}return i}function Nq(t){return t._firestoreClient||PR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function PR(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new lv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new dw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Xh=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ai.fromBase64String(e))}catch(n){throw new H(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zh=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ef=class{constructor(e){this._methodName=e}};var tf=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var Mq=/^__.*__$/,pw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new ds(e,this.data,n,this.fieldTransforms)}};function OR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}var gw=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return nf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(OR(this.fu)&&Mq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},mw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sf(e)}Fu(e,n,r,i=!1){return new gw({fu:e,methodName:n,vu:r,path:Yt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Pq(t){let e=t._freezeSettings(),n=sf(t._databaseId);return new mw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Oq(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);VR("Data must be an object, but it was:",o,r);let a=FR(r,o),u,l;if(s.merge)u=new Yn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=kq(e,p,n);if(!o.contains(m))throw new H(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Vq(h,m)||h.push(m)}u=new Yn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new pw(new Qn(a),u,l)}function kR(t,e){if(LR(t=rt(t)))return VR("Unsupported field value:",e,t),FR(t,e);if(t instanceof ef)return function(r,i){if(!OR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=kR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $H(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ct.fromDate(r);return{timestampValue:xv(i.serializer,s)}}if(r instanceof Ct){let s=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xv(i.serializer,s)}}if(r instanceof tf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xh)return{bytesValue:YH(i.serializer,r._byteString)};if(r instanceof Ir){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mR(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${bw(r)}`)}(t,e)}function FR(t,e){let n={};return KA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nu(t,(r,i)=>{let s=kR(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function LR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof tf||t instanceof Xh||t instanceof Ir||t instanceof ef)}function VR(t,e,n){if(!LR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=bw(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function kq(t,e,n){if((e=rt(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return Lq(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}var Fq=new RegExp("[~\\*/\\[\\]]");function Lq(t,e,n){if(e.search(Fq)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zh(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(x.INVALID_ARGUMENT,a+t+u)}function Vq(t,e){return t.some(n=>n.isEqual(e))}function Uq(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function UR(t,e){let n=AR(t.firestore,Jh),r=NR(t),i=Uq(t.converter,e);return jq(n,[Oq(Pq(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ss.exists(!1))]).then(()=>r)}function jq(t,e){return function(r,i){let s=new wr;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return Iq(yield Rq(r),i,s)})),s.promise}(Nq(t),e)}(function(e,n=!0){(function(i){Wo=i})(Gn),qn(new Lt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Jh(new nv(r.getProvider("auth-internal")),new ov(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dv(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xe(SA,"4.6.2",e),xe(SA,"4.6.2","esm2017")})();var Cr=class{constructor(e){return e}},jR="firestore",Tw=class{constructor(){return Ji(jR)}};var Dw=new $("angularfire2.firestore-instances");function Bq(t,e){let n=To(jR,t,e);return n&&new Cr(n)}function $q(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Cr(r)}}var Hq={provide:Tw,deps:[[new ke,Dw]]},qq={provide:Cr,useFactory:Bq,deps:[[new ke,Dw],En]},Gq=(()=>{class t{constructor(){xe("angularfire",pr.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Ye({providers:[qq,Hq]})}return t})();function BR(t,...e){return{ngModule:Gq,providers:[{provide:Dw,useFactory:$q(t),multi:!0,deps:[ce,ft,ti,gr,[new ke,ns],[new ke,ei],...e]}]}}var uf=Qt(UR,!0);var lf=Qt(xR,!0);var $R=Qt(MR,!0);var qR=(()=>{let e=class e{constructor(r,i,s,o,a){this.firestore=r,this.auth=i,this.renderer=s,this.document=o,this.router=a,this.userEmail="",this.userPassword="",this.loginsCollection=[],this.countLogins=0}ngOnInit(){this.renderer.addClass(this.document.body,"login-background")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"login-background")}hardcodeLogin(){return w(this,null,function*(){this.userEmail="elon@x.com",this.userPassword="123456",yield this.login()})}login(){return w(this,null,function*(){try{let r=yield EA(this.auth,this.userEmail,this.userPassword);console.log("User logged in:",r.user?.email),r.user&&(yield this.logUserLogin(r.user),this.router.navigate(["/home"]))}catch(r){console.error("Login error:",r)}})}logUserLogin(r){return w(this,null,function*(){let i=lf(this.firestore,"logins");try{yield uf(i,{uid:r.uid,email:r.email,loginTime:new Date}),console.log("User login logged to Firestore")}catch(s){console.error("Error logging user login to Firestore:",s)}})}};e.\u0275fac=function(i){return new(i||e)(U(Cr),U(Cn),U(an),U(et),U(Ot))},e.\u0275cmp=Nt({type:e,selectors:[["app-login"]],standalone:!0,features:[cn],decls:24,vars:2,consts:[[1,"container-full-height","col-sm-12","col-md-8","col-lg-6","mx-auto"],[1,"login-container"],[1,"text-center","mb-4"],["src","../../assets/game-center-logo.png","alt","App Logo",1,"logo",2,"max-width","100px"],[3,"ngSubmit"],[1,"form-group","text-center"],["for","email",1,"input-label"],["type","email","id","email","name","userEmail","aria-describedby","emailHelp","placeholder","Enter email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","text-center","mt-2"],["for","password",1,"input-label"],["type","password","id","password","name","userPassword","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","mt-3","text-center"],[1,"row","justify-content-center"],[1,"col-auto"],["type","submit",1,"css-button-3d--blue","mr-2"],["type","button","routerLink","/register",1,"css-button-shadow--grey"],[1,"mt-2","text-center"],["type","button",1,"css-button-shadow--green",3,"click"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,"img",3),Z(),Q(4,"form",4),ze("ngSubmit",function(a){return s.login(),a.preventDefault()}),Q(5,"div",5)(6,"label",6),je(7,"Email"),Z(),Q(8,"input",7),Fi("ngModelChange",function(a){return oo(s.userEmail,a)||(s.userEmail=a),a}),Z()(),Q(9,"div",8)(10,"label",9),je(11,"Password"),Z(),Q(12,"input",10),Fi("ngModelChange",function(a){return oo(s.userPassword,a)||(s.userPassword=a),a}),Z()(),Q(13,"div",11)(14,"div",12)(15,"div",13)(16,"button",14),je(17,"Login"),Z()(),Q(18,"div",13)(19,"button",15),je(20,"Register"),Z()()()(),Q(21,"div",16)(22,"button",17),ze("click",function(){return s.hardcodeLogin()}),je(23,"Hardcoded user"),Z()()()()()),i&2&&(We(8),ki("ngModel",s.userEmail),We(4),ki("ngModel",s.userPassword))},dependencies:[Xd,Jd,wo,Kd,Qd,Sc,Dc,Tc,Ui,D0,v0],styles:[".container-full-height[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:50rem;max-width:auto;background-color:#202020dc;border-radius:2%}.login-container[_ngcontent-%COMP%]{width:auto;max-width:700px;padding:20px;box-shadow:0 4px 6px #0000001a}.input-label[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#f3f3f3;font-size:1.5rem}.f-password[_ngcontent-%COMP%]{text-decoration:none}.css-button-3d--blue[_ngcontent-%COMP%]{min-width:130px;height:40px;color:#fff;padding:5px 10px;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;display:inline-block;outline:none;border-radius:5px;border:none;background:#3d348b;box-shadow:0 5px #2c0b8e}.css-button-3d--blue[_ngcontent-%COMP%]:hover{box-shadow:0 3px #2c0b8e;top:1px}.css-button-3d--blue[_ngcontent-%COMP%]:active{box-shadow:0 0 #2c0b8e;top:5px}.css-button-shadow--grey[_ngcontent-%COMP%]{min-width:130px;height:40px;color:#fff;padding:5px 10px;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;display:inline-block;outline:none;border-radius:5px;border:none;background-color:#6c757d;box-shadow:0 3px 1px -2px #25252520,0 2px 2px #2121215a,0 1px 5px #3333335d}.css-button-shadow--grey[_ngcontent-%COMP%]:active{box-shadow:0 4px 2px -3px #2a2a2a4e,0 4px 5px 1px #3a3a3a65,0 2px 7px 1px #4a4a4a72}.css-button-shadow--green[_ngcontent-%COMP%]{min-width:130px;height:40px;color:#fff;padding:5px 10px;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;display:inline-block;outline:none;border-radius:5px;border:none;background-color:#29b564;box-shadow:0 3px 1px -2px #1f8c4d,0 2px 2px #1f8c4d,0 1px 5px #1f8c4d}.css-button-shadow--green[_ngcontent-%COMP%]:active{box-shadow:0 4px 2px -3px #14723b,0 4px 5px 1px #14723b,0 2px 7px 1px #14723b}"]});let t=e;return t})();var at=typeof window<"u"&&window||{},iX=at.document,sX=at.location,oX=at.gc?()=>at.gc():()=>null,aX=at.performance?at.performance:null,cX=at.Event,uX=at.MouseEvent,lX=at.KeyboardEvent,dX=at.EventTarget,hX=at.History,fX=at.Location,pX=at.EventListener;var hi;function GR(){let t=at.document.createElement("span");t.innerText="testing bs version",t.classList.add("d-none"),t.classList.add("pl-1"),at.document.head.appendChild(t);let e=at.getComputedStyle(t).paddingLeft;return e&&parseFloat(e)?(at.document.head.removeChild(t),"bs4"):(at.document.head.removeChild(t),"bs5")}function Wq(){return hi||(hi=GR()),hi==="bs4"}function zq(){return hi||(hi=GR()),hi==="bs5"}function WR(){return{isBs4:Wq(),isBs5:zq()}}var df=class{constructor(){this.length=0,this.asArray=[]}get(e){if(this.length===0||e<0||e>=this.length)return;let n=this.head;for(let r=0;r<e;r++)n=n?.next;return n?.value}add(e,n=this.length){if(n<0||n>this.length)throw new Error("Position is out of the list");let r={value:e,next:void 0,previous:void 0};if(this.length===0)this.head=r,this.tail=r,this.current=r;else if(n===0&&this.head)r.next=this.head,this.head.previous=r,this.head=r;else if(n===this.length&&this.tail)this.tail.next=r,r.previous=this.tail,this.tail=r;else{let i=this.getNode(n-1),s=i?.next;i&&s&&(i.next=r,s.previous=r,r.previous=i,r.next=s)}this.length++,this.createInternalArrayRepresentation()}remove(e=0){if(this.length===0||e<0||e>=this.length)throw new Error("Position is out of the list");if(e===0&&this.head)this.head=this.head.next,this.head?this.head.previous=void 0:this.tail=void 0;else if(e===this.length-1&&this.tail?.previous)this.tail=this.tail.previous,this.tail.next=void 0;else{let n=this.getNode(e);n?.next&&n.previous&&(n.next.previous=n.previous,n.previous.next=n.next)}this.length--,this.createInternalArrayRepresentation()}set(e,n){if(this.length===0||e<0||e>=this.length)throw new Error("Position is out of the list");let r=this.getNode(e);r&&(r.value=n,this.createInternalArrayRepresentation())}toArray(){return this.asArray}findAll(e){let n=this.head,r=[];if(!n)return r;for(let i=0;i<this.length;i++){if(!n)return r;e(n.value,i)&&r.push({index:i,value:n.value}),n=n.next}return r}push(...e){return e.forEach(n=>{this.add(n)}),this.length}pop(){if(this.length===0)return;let e=this.tail;return this.remove(this.length-1),e?.value}unshift(...e){return e.reverse(),e.forEach(n=>{this.add(n,0)}),this.length}shift(){if(this.length===0)return;let e=this.head?.value;return this.remove(),e}forEach(e){let n=this.head;for(let r=0;r<this.length;r++){if(!n)return;e(n.value,r),n=n.next}}indexOf(e){let n=this.head,r=-1;for(let i=0;i<this.length;i++){if(!n)return r;if(n.value===e){r=i;break}n=n.next}return r}some(e){let n=this.head,r=!1;for(;n&&!r;){if(e(n.value)){r=!0;break}n=n.next}return r}every(e){let n=this.head,r=!0;for(;n&&r;)e(n.value)||(r=!1),n=n.next;return r}toString(){return"[Linked List]"}find(e){let n=this.head;for(let r=0;r<this.length;r++){if(!n)return;if(e(n.value,r))return n.value;n=n.next}}findIndex(e){let n=this.head;for(let r=0;r<this.length;r++){if(!n)return-1;if(e(n.value,r))return r;n=n.next}return-1}getNode(e){if(this.length===0||e<0||e>=this.length)throw new Error("Position is out of the list");let n=this.head;for(let r=0;r<e;r++)n=n?.next;return n}createInternalArrayRepresentation(){let e=[],n=this.head;for(;n;)e.push(n.value),n=n.next;this.asArray=e}};var gX=typeof console>"u"||!("warn"in console);var zR=["*"],Kq=t=>({display:t});function Qq(t,e){if(t&1){let n=za();Q(0,"li",7),ze("click",function(){let i=qa(n).index,s=Fn(2);return Ga(s.selectSlide(i))}),Z()}if(t&2){let n=e.$implicit;wn("active",n.active===!0)}}function Yq(t,e){if(t&1&&(hd(0),Q(1,"ol",5),Gr(2,Qq,1,2,"li",6),Z(),fd()),t&2){let n=Fn();We(2),Gt("ngForOf",n.indicatorsSlides())}}function Jq(t,e){if(t&1){let n=za();Q(0,"button",9),ze("click",function(){let i=qa(n).index,s=Fn(2);return Ga(s.selectSlide(i))}),Z()}if(t&2){let n=e.$implicit,r=e.index,i=Fn(2);wn("active",n.active===!0),kn("data-bs-target","#carousel"+i.currentId)("data-bs-slide-to",r)}}function Xq(t,e){if(t&1&&(hd(0),Q(1,"div",5),Gr(2,Jq,1,4,"button",8),Z(),fd()),t&2){let n=Fn();We(2),Gt("ngForOf",n.indicatorsSlides())}}function Zq(t,e){if(t&1){let n=za();Q(0,"a",10),ze("click",function(){qa(n);let i=Fn();return Ga(i.previousSlide())}),Ze(1,"span",11),Q(2,"span",12),je(3,"Previous"),Z()()}if(t&2){let n=Fn();wn("disabled",n.checkDisabledClass("prev")),kn("data-bs-target","#carousel"+n.currentId)}}function eG(t,e){if(t&1){let n=za();Q(0,"a",13),ze("click",function(){qa(n);let i=Fn();return Ga(i.nextSlide())}),Ze(1,"span",14),Q(2,"span",12),je(3,"Next"),Z()()}if(t&2){let n=Fn();wn("disabled",n.checkDisabledClass("next")),kn("data-bs-target","#carousel"+n.currentId)}}var tG=(()=>{let e=class e{constructor(){this.interval=5e3,this.noPause=!1,this.noWrap=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nG(t,e){let n=t.length;for(;n--;)if(e(t[n],n,t))return n;return-1}function rG(t,e){let n=[],r=Math.ceil(t.length/e),i=0;for(;i<r;){let s=t.splice(0,i===r-1&&e<t.length?t.length:e);n.push(s),i++}return n}function iG(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}var Vt=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.NEXT=1]="NEXT",t[t.PREV=2]="PREV",t}(Vt||{}),sG=1,Sw=(()=>{let e=class e{set activeSlide(r){this.multilist||(iG(r)&&(this.customActiveSlide=r),this._slides.length&&r!==this._currentActiveSlide&&this._select(r))}get activeSlide(){return this._currentActiveSlide||0}get interval(){return this._interval}set interval(r){this._interval=r,this.restartTimer()}get slides(){return this._slides.toArray()}get isFirstSlideVisible(){let r=this.getVisibleIndexes();return!r||r instanceof Array&&!r.length?!1:r.includes(0)}get isLastSlideVisible(){let r=this.getVisibleIndexes();return!r||r instanceof Array&&!r.length?!1:r.includes(this._slides.length-1)}get _bsVer(){return WR()}constructor(r,i,s){this.ngZone=i,this.platformId=s,this.noWrap=!1,this.noPause=!1,this.showIndicators=!0,this.pauseOnFocus=!1,this.indicatorsByChunk=!1,this.itemsPerSlide=1,this.singleSlideOffset=!1,this.isAnimated=!1,this.activeSlideChange=new Ge(!1),this.slideRangeChange=new Ge,this.startFromIndex=0,this._interval=5e3,this._slides=new df,this._currentVisibleSlidesIndex=0,this.isPlaying=!1,this.destroyed=!1,this.currentId=0,this.getActive=o=>o.active,this.makeSlidesConsistent=o=>{o.forEach((a,u)=>a.item.order=u)},Object.assign(this,r),this.currentId=sG++}ngAfterViewInit(){setTimeout(()=>{this.singleSlideOffset&&(this.indicatorsByChunk=!1),this.multilist&&(this._chunkedSlides=rG(this.mapSlidesAndIndexes(),this.itemsPerSlide),this.selectInitialSlides()),this.customActiveSlide&&!this.multilist&&this._select(this.customActiveSlide)},0)}ngOnDestroy(){this.destroyed=!0}addSlide(r){this._slides.add(r),this.multilist&&this._slides.length<=this.itemsPerSlide&&(r.active=!0),!this.multilist&&this.isAnimated&&(r.isAnimated=!0),!this.multilist&&this._slides.length===1&&(this._currentActiveSlide=void 0,this.customActiveSlide||(this.activeSlide=0),this.play()),this.multilist&&this._slides.length>this.itemsPerSlide&&this.play()}removeSlide(r){let i=this._slides.indexOf(r);if(this._currentActiveSlide===i){let s;this._slides.length>1&&(s=this.isLast(i)?this.noWrap?i-1:0:i),this._slides.remove(i),setTimeout(()=>{this._select(s)},0)}else{this._slides.remove(i);let s=this.getCurrentSlideIndex();setTimeout(()=>{this._currentActiveSlide=s,this.activeSlideChange.emit(this._currentActiveSlide)},0)}}nextSlideFromInterval(r=!1){this.move(Vt.NEXT,r)}nextSlide(r=!1){this.isPlaying&&this.restartTimer(),this.move(Vt.NEXT,r)}previousSlide(r=!1){this.isPlaying&&this.restartTimer(),this.move(Vt.PREV,r)}getFirstVisibleIndex(){return this.slides.findIndex(this.getActive)}getLastVisibleIndex(){return nG(this.slides,this.getActive)}move(r,i=!1){let s=this.getFirstVisibleIndex(),o=this.getLastVisibleIndex();this.noWrap&&(r===Vt.NEXT&&this.isLast(o)||r===Vt.PREV&&s===0)||(this.multilist?this.moveMultilist(r):this.activeSlide=this.findNextSlideIndex(r,i)||0)}keydownPress(r){if(r.keyCode===13||r.key==="Enter"||r.keyCode===32||r.key==="Space"){this.nextSlide(),r.preventDefault();return}if(r.keyCode===37||r.key==="LeftArrow"){this.previousSlide();return}if(r.keyCode===39||r.key==="RightArrow"){this.nextSlide();return}}onMouseLeave(){this.pauseOnFocus||this.play()}onMouseUp(){this.pauseOnFocus||this.play()}pauseFocusIn(){this.pauseOnFocus&&(this.isPlaying=!1,this.resetTimer())}pauseFocusOut(){this.play()}selectSlide(r){this.isPlaying&&this.restartTimer(),this.multilist?this.selectSlideRange(this.indicatorsByChunk?r*this.itemsPerSlide:r):this.activeSlide=this.indicatorsByChunk?r*this.itemsPerSlide:r}play(){this.isPlaying||(this.isPlaying=!0,this.restartTimer())}pause(){this.noPause||(this.isPlaying=!1,this.resetTimer())}getCurrentSlideIndex(){return this._slides.findIndex(this.getActive)}isLast(r){return r+1>=this._slides.length}isFirst(r){return r===0}indicatorsSlides(){return this.slides.filter((r,i)=>!this.indicatorsByChunk||i%this.itemsPerSlide===0)}selectInitialSlides(){let r=this.startFromIndex<=this._slides.length?this.startFromIndex:0;if(this.hideSlides(),this.singleSlideOffset){if(this._slidesWithIndexes=this.mapSlidesAndIndexes(),this._slides.length-r<this.itemsPerSlide){let i=this._slidesWithIndexes.slice(0,r);this._slidesWithIndexes=[...this._slidesWithIndexes,...i].slice(i.length).slice(0,this.itemsPerSlide)}else this._slidesWithIndexes=this._slidesWithIndexes.slice(r,r+this.itemsPerSlide);this._slidesWithIndexes.forEach(i=>i.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes)}else this.selectRangeByNestedIndex(r);this.slideRangeChange.emit(this.getVisibleIndexes())}findNextSlideIndex(r,i){let s=0;if(!(!i&&this.isLast(this.activeSlide)&&r!==Vt.PREV&&this.noWrap)){switch(r){case Vt.NEXT:if(typeof this._currentActiveSlide>"u"){s=0;break}if(!this.isLast(this._currentActiveSlide)){s=this._currentActiveSlide+1;break}s=!i&&this.noWrap?this._currentActiveSlide:0;break;case Vt.PREV:if(typeof this._currentActiveSlide>"u"){s=0;break}if(this._currentActiveSlide>0){s=this._currentActiveSlide-1;break}if(!i&&this.noWrap){s=this._currentActiveSlide;break}s=this._slides.length-1;break;default:throw new Error("Unknown direction")}return s}}mapSlidesAndIndexes(){return this.slides.slice().map((r,i)=>({index:i,item:r}))}selectSlideRange(r){if(!this.isIndexInRange(r)){if(this.hideSlides(),!this.singleSlideOffset)this.selectRangeByNestedIndex(r);else{let i=this.isIndexOnTheEdges(r)?r:r-this.itemsPerSlide+1,s=this.isIndexOnTheEdges(r)?r+this.itemsPerSlide:r+1;this._slidesWithIndexes=this.mapSlidesAndIndexes().slice(i,s),this.makeSlidesConsistent(this._slidesWithIndexes),this._slidesWithIndexes.forEach(o=>o.item.active=!0)}this.slideRangeChange.emit(this.getVisibleIndexes())}}selectRangeByNestedIndex(r){if(!this._chunkedSlides)return;let i=this._chunkedSlides.map((s,o)=>({index:o,list:s})).find(s=>s.list.find(o=>o.index===r)!==void 0);i&&(this._currentVisibleSlidesIndex=i.index,this._chunkedSlides[i.index].forEach(s=>{s.item.active=!0}))}isIndexOnTheEdges(r){return r+1-this.itemsPerSlide<=0||r+this.itemsPerSlide<=this._slides.length}isIndexInRange(r){return this.singleSlideOffset&&this._slidesWithIndexes?this._slidesWithIndexes.map(s=>s.index).indexOf(r)>=0:r<=this.getLastVisibleIndex()&&r>=this.getFirstVisibleIndex()}hideSlides(){this.slides.forEach(r=>r.active=!1)}isVisibleSlideListLast(){return this._chunkedSlides?this._currentVisibleSlidesIndex===this._chunkedSlides.length-1:!1}isVisibleSlideListFirst(){return this._currentVisibleSlidesIndex===0}moveSliderByOneItem(r){let i,s,o,a;if(this.noWrap){i=this.getFirstVisibleIndex(),s=this.getLastVisibleIndex(),o=r===Vt.NEXT?i:s,a=r!==Vt.NEXT?i-1:this.isLast(s)?0:s+1;let l=this._slides.get(o);l&&(l.active=!1);let h=this._slides.get(a);h&&(h.active=!0);let p=this.mapSlidesAndIndexes().filter(m=>m.item.active);this.makeSlidesConsistent(p),this.singleSlideOffset&&(this._slidesWithIndexes=p),this.slideRangeChange.emit(this.getVisibleIndexes());return}if(!this._slidesWithIndexes||!this._slidesWithIndexes[0])return;let u;if(i=this._slidesWithIndexes[0].index,s=this._slidesWithIndexes[this._slidesWithIndexes.length-1].index,r===Vt.NEXT){this._slidesWithIndexes.shift(),u=this.isLast(s)?0:s+1;let l=this._slides.get(u);l&&this._slidesWithIndexes.push({index:u,item:l})}else{this._slidesWithIndexes.pop(),u=this.isFirst(i)?this._slides.length-1:i-1;let l=this._slides.get(u);l&&(this._slidesWithIndexes=[{index:u,item:l},...this._slidesWithIndexes])}this.hideSlides(),this._slidesWithIndexes.forEach(l=>l.item.active=!0),this.makeSlidesConsistent(this._slidesWithIndexes),this.slideRangeChange.emit(this._slidesWithIndexes.map(l=>l.index))}moveMultilist(r){this.singleSlideOffset?this.moveSliderByOneItem(r):(this.hideSlides(),this.noWrap?this._currentVisibleSlidesIndex=r===Vt.NEXT?this._currentVisibleSlidesIndex+1:this._currentVisibleSlidesIndex-1:r===Vt.NEXT?this._currentVisibleSlidesIndex=this.isVisibleSlideListLast()?0:this._currentVisibleSlidesIndex+1:this.isVisibleSlideListFirst()?this._currentVisibleSlidesIndex=this._chunkedSlides?this._chunkedSlides.length-1:0:this._currentVisibleSlidesIndex=this._currentVisibleSlidesIndex-1,this._chunkedSlides&&this._chunkedSlides[this._currentVisibleSlidesIndex].forEach(i=>i.item.active=!0),this.slideRangeChange.emit(this.getVisibleIndexes()))}getVisibleIndexes(){if(!this.singleSlideOffset&&this._chunkedSlides)return this._chunkedSlides[this._currentVisibleSlidesIndex].map(r=>r.index);if(this._slidesWithIndexes)return this._slidesWithIndexes.map(r=>r.index)}_select(r){if(isNaN(r)){this.pause();return}if(!this.multilist&&typeof this._currentActiveSlide<"u"){let s=this._slides.get(this._currentActiveSlide);typeof s<"u"&&(s.active=!1)}let i=this._slides.get(r);typeof i<"u"&&(this._currentActiveSlide=r,i.active=!0,this.activeSlide=r,this.activeSlideChange.emit(r))}restartTimer(){this.resetTimer();let r=+this.interval;!isNaN(r)&&r>0&&Nm(this.platformId)&&(this.currentInterval=this.ngZone.runOutsideAngular(()=>window.setInterval(()=>{let i=+this.interval;this.ngZone.run(()=>{this.isPlaying&&!isNaN(this.interval)&&i>0&&this.slides.length?this.nextSlideFromInterval():this.pause()})},r)))}get multilist(){return this.itemsPerSlide>1}resetTimer(){this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0)}checkDisabledClass(r){return r==="prev"?this.activeSlide===0&&this.noWrap&&!this.multilist||this.isFirstSlideVisible&&this.noWrap&&this.multilist:this.isLast(this.activeSlide)&&this.noWrap&&!this.multilist||this.isLastSlideVisible&&this.noWrap&&this.multilist}};e.\u0275fac=function(i){return new(i||e)(U(tG),U(ce),U(on))},e.\u0275cmp=Nt({type:e,selectors:[["carousel"]],inputs:{noWrap:"noWrap",noPause:"noPause",showIndicators:"showIndicators",pauseOnFocus:"pauseOnFocus",indicatorsByChunk:"indicatorsByChunk",itemsPerSlide:"itemsPerSlide",singleSlideOffset:"singleSlideOffset",isAnimated:"isAnimated",activeSlide:"activeSlide",startFromIndex:"startFromIndex",interval:"interval"},outputs:{activeSlideChange:"activeSlideChange",slideRangeChange:"slideRangeChange"},ngContentSelectors:zR,decls:7,vars:8,consts:[["tabindex","0",1,"carousel","slide",3,"mouseenter","mouseleave","mouseup","keydown","focusin","focusout","id"],[4,"ngIf"],[1,"carousel-inner",3,"ngStyle"],["class","left carousel-control carousel-control-prev","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],["class","right carousel-control carousel-control-next","href","javascript:void(0);","tabindex","0","role","button",3,"disabled","click",4,"ngIf"],[1,"carousel-indicators"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],["type","button","aria-current","true",3,"active","click",4,"ngFor","ngForOf"],["type","button","aria-current","true",3,"click"],["href","javascript:void(0);","tabindex","0","role","button",1,"left","carousel-control","carousel-control-prev",3,"click"],["aria-hidden","true",1,"icon-prev","carousel-control-prev-icon"],[1,"sr-only","visually-hidden"],["href","javascript:void(0);","tabindex","0","role","button",1,"right","carousel-control","carousel-control-next",3,"click"],["aria-hidden","true",1,"icon-next","carousel-control-next-icon"]],template:function(i,s){i&1&&(ym(),Q(0,"div",0),ze("mouseenter",function(){return s.pause()})("mouseleave",function(){return s.onMouseLeave()})("mouseup",function(){return s.onMouseUp()})("keydown",function(a){return s.keydownPress(a)})("focusin",function(){return s.pauseFocusIn()})("focusout",function(){return s.pauseFocusOut()}),Gr(1,Yq,3,1,"ng-container",1)(2,Xq,3,1,"ng-container",1),Q(3,"div",2),_m(4),Z(),Gr(5,Zq,4,3,"a",3)(6,eG,4,3,"a",4),Z()),i&2&&(Gt("id","carousel"+s.currentId),We(),Gt("ngIf",!s._bsVer.isBs5&&s.showIndicators&&s.slides.length>1),We(),Gt("ngIf",s._bsVer.isBs5&&s.showIndicators&&s.slides.length>1),We(),Gt("ngStyle",iD(6,Kq,s.multilist?"flex":"block")),We(2),Gt("ngIf",s.slides.length>1),We(),Gt("ngIf",s.slides.length>1))},dependencies:[Id,ED,CD],encapsulation:2});let t=e;return t})(),KR=(()=>{let e=class e{constructor(r){this.active=!1,this.itemWidth="100%",this.order=0,this.isAnimated=!1,this.addClass=!0,this.multilist=!1,this.carousel=r}ngOnInit(){this.carousel.addSlide(this),this.itemWidth=`${100/this.carousel.itemsPerSlide}%`,this.multilist=this.carousel?.itemsPerSlide>1}ngOnDestroy(){this.carousel.removeSlide(this)}};e.\u0275fac=function(i){return new(i||e)(U(Sw))},e.\u0275cmp=Nt({type:e,selectors:[["slide"]],hostVars:15,hostBindings:function(i,s){i&2&&(kn("aria-hidden",!s.active),dd("width",s.itemWidth)("order",s.order),wn("multilist-margin",s.multilist)("active",s.active)("carousel-animation",s.isAnimated)("item",s.addClass)("carousel-item",s.addClass))},inputs:{active:"active"},ngContentSelectors:zR,decls:2,vars:2,consts:[[1,"item"]],template:function(i,s){i&1&&(ym(),Q(0,"div",0),_m(1),Z()),i&2&&wn("active",s.active)},styles:[".carousel-animation[_nghost-%COMP%]{transition:opacity .6s ease,visibility .6s ease;float:left}.carousel-animation.active[_nghost-%COMP%]{opacity:1;visibility:visible}.carousel-animation[_nghost-%COMP%]:not(.active){display:block;position:absolute;opacity:0;visibility:hidden}.multilist-margin[_nghost-%COMP%]{margin-right:auto}.carousel-item[_nghost-%COMP%]{perspective:1000px}"]});let t=e;return t})(),QR=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Je({type:e}),e.\u0275inj=Ye({imports:[Ui]});let t=e;return t})();function aG(t,e){if(t&1&&(Q(0,"slide",4)(1,"div",5),Ze(2,"img",6),Q(3,"div",7)(4,"h4",8),je(5),Z(),Q(6,"p",9),je(7),Z()()()()),t&2){let n=e.$implicit,r=e.index;Gt("active",r===0),We(2),vm("src",n.imageUrl,Xg),We(3),pd(n.title),We(2),pd(n.text)}}var YR=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i,this.cards=[{imageUrl:"../../assets/a-game.png",title:"Card Title 1",text:"Some quick example text to build on the card title and make up the bulk of the card's content."},{imageUrl:"../../assets/a-game.png",title:"Card Title 2",text:"Este es el titulo de la segunda carta"}]}logout(){return w(this,null,function*(){try{yield CA(this.auth),console.log("User logged out successfully"),this.router.navigate(["/login"])}catch(r){console.error("Logout error:",r)}})}};e.\u0275fac=function(i){return new(i||e)(U(Cn),U(Ot))},e.\u0275cmp=Nt({type:e,selectors:[["app-home"]],standalone:!0,features:[cn],decls:6,vars:1,consts:[[1,"home"],["type","submit",1,"css-button-3d--blue","mt-3","ms-3",3,"click"],[1,"container"],[3,"active",4,"ngFor","ngForOf"],[3,"active"],[1,"card","mx-auto"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-text"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"button",1),ze("click",function(){return s.logout()}),je(2,"Login"),Z(),Q(3,"div",2)(4,"carousel"),Gr(5,aG,8,4,"slide",3),Z()()()),i&2&&(We(5),Gt("ngForOf",s.cards))},dependencies:[Ui,Id,QR,KR,Sw],styles:['.home[_ngcontent-%COMP%]{height:100vh;width:100vw;background-color:#8a2be2;background-image:url("./media/about-me-background-YHGABRFI.jpg")}p[_ngcontent-%COMP%]{color:#e9e8e8}.carousel-item[_ngcontent-%COMP%]:not(.active){filter:blur(4px);transition:filter .5s ease-in-out}.carousel-item.active[_ngcontent-%COMP%]{filter:none}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.card[_ngcontent-%COMP%]{max-width:350px;min-width:200px;box-shadow:0 4px 8px #0000001a;background-color:#000000a6;min-height:500px}@media (min-width: 768px){.card[_ngcontent-%COMP%]{max-width:500px}}.carousel[_ngcontent-%COMP%]{width:100%;max-width:600px}.card-img-top[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:contain;object-position:center}.card-title[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#f3f3f3}.css-button-3d--blue[_ngcontent-%COMP%]{min-width:130px;height:40px;color:#fff;padding:5px 10px;font-weight:700;cursor:pointer;transition:all .3s ease;position:relative;display:inline-block;outline:none;border-radius:5px;border:none;background:#ca2727;box-shadow:0 5px #a72020}.css-button-3d--blue[_ngcontent-%COMP%]:hover{box-shadow:0 3px #b22323;top:1px}.css-button-3d--blue[_ngcontent-%COMP%]:active{box-shadow:0 0 #a01717;top:5px}']});let t=e;return t})();var JR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Nt({type:e,selectors:[["app-about-me"]],standalone:!0,features:[cn],decls:17,vars:0,consts:[[1,"hero-section"],[1,"container"],[1,"row"],[1,"col-md-6"],["src","../../assets/about-me.png","alt","About me picture",1,"about-pic"],[1,"col-md-6","about-text-bg"],[1,"row","social-networks"],[1,"col-6"],["href","https://www.linkedin.com","target","_blank"],[1,"bi","bi-linkedin"],["href","https://www.github.com","target","_blank"],[1,"bi","bi-github"]],template:function(i,s){i&1&&(Q(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Ze(4,"img",4),Z(),Q(5,"div",5)(6,"h1"),je(7,"Alex Stocki"),Z(),Q(8,"p"),je(9,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita, quo aliquid, ex quis aut architecto consequuntur voluptates non soluta debitis sequi, atque provident inventore. Accusantium facilis tenetur eum nam cupiditate."),Z(),Q(10,"div",6)(11,"div",7)(12,"a",8),Ze(13,"i",9),Z()(),Q(14,"div",7)(15,"a",10),Ze(16,"i",11),Z()()()()()()())},styles:['.about-pic[_ngcontent-%COMP%]{width:auto;height:450px;align-self:flex-start}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;max-width:1200px;padding:0 20px;margin-top:50px;margin-bottom:50px}.hero-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;color:#fff;text-align:center;background:url("./media/about-me-background-YHGABRFI.jpg");background-repeat:repeat;background-size:cover;width:100vw;height:100vh}.hero-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:20px}.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;font-weight:700}.hero-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:1rem;margin-bottom:1rem}p[_ngcontent-%COMP%]{text-align:start}.about-text-bg[_ngcontent-%COMP%]{background-color:#00000080;padding:20px}.social-networks[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{text-align:end}.social-networks[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{text-align:start}.bi[_ngcontent-%COMP%]{font-size:1.8rem;color:#e3e3e3}']});let t=e;return t})();var XR=(()=>{let e=class e{constructor(r,i,s,o,a){this.auth=r,this.firestore=i,this.renderer=s,this.document=o,this.router=a,this.userEmail="",this.userPassword="",this.renderer.addClass(this.document.body,"register-background")}ngOnDestroy(){this.renderer.removeClass(this.document.body,"register-background")}register(){return w(this,null,function*(){try{let r=yield wA(this.auth,this.userEmail,this.userPassword);console.log("User registered:",r.user?.email),r.user&&(yield this.saveUserData(r.user),this.router.navigate(["/home"]))}catch(r){console.error("Registration error:",r)}})}saveUserData(r){return w(this,null,function*(){let i=lf(this.firestore,"users");try{yield uf(i,{uid:r.uid,email:r.email,createdAt:new Date}),console.log("User data saved to Firestore")}catch(s){console.error("Error saving user data to Firestore:",s)}})}};e.\u0275fac=function(i){return new(i||e)(U(Cn),U(Cr),U(an),U(et),U(Ot))},e.\u0275cmp=Nt({type:e,selectors:[["app-register"]],standalone:!0,features:[cn],decls:18,vars:2,consts:[[1,"container-full-height","col-sm-12","col-md-8","col-lg-6","mx-auto"],[1,"login-container"],[1,"text-center","mb-4"],["src","../../assets/game-center-logo.png","alt","App Logo",1,"logo",2,"max-width","100px"],[3,"ngSubmit"],[1,"form-group","text-center"],["for","email",1,"input-label"],["type","email","id","email","name","userEmail","aria-describedby","emailHelp","placeholder","Enter email","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","text-center","mt-2"],["for","password",1,"input-label"],["type","password","id","password","name","userPassword","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","mt-3","text-center"],[1,"row","justify-content-center"],[1,"col-auto"],["type","submit",1,"css-button-3d--blue","mr-2"]],template:function(i,s){i&1&&(Q(0,"div",0)(1,"div",1)(2,"div",2),Ze(3,"img",3),Z(),Q(4,"form",4),ze("ngSubmit",function(a){return s.register(),a.preventDefault()}),Q(5,"div",5)(6,"label",6),je(7,"Email"),Z(),Q(8,"input",7),Fi("ngModelChange",function(a){return oo(s.userEmail,a)||(s.userEmail=a),a}),Z()(),Q(9,"div",8)(10,"label",9),je(11,"Password"),Z(),Q(12,"input",10),Fi("ngModelChange",function(a){return oo(s.userPassword,a)||(s.userPassword=a),a}),Z()(),Q(13,"div",11)(14,"div",12)(15,"div",13)(16,"button",14),je(17,"Register"),Z()()()()()()()),i&2&&(We(8),ki("ngModel",s.userEmail),We(4),ki("ngModel",s.userPassword))},dependencies:[Xd,Jd,wo,Kd,Qd,Sc,Dc,Tc]});let t=e;return t})();var ZR=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"home",component:YR},{path:"login",component:qR},{path:"register",component:XR},{path:"about",component:JR}];var ex="@firebase/database",tx="1.0.5";var TI="";function cG(t){TI=t}var kw=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Io(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Fw=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Bn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Px=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kw(e)}}catch{}return new Fw},fs=Px("localStorage"),Lw=Px("sessionStorage");var Yo=new $n("@firebase/database"),uG=function(){let t=1;return function(){return t++}}(),Ox=function(t){let e=cS(t),n=new Zd;n.update(e);let r=n.digest();return eh.encodeByteArray(r)},yu=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yu.apply(null,r):typeof r=="object"?e+=nt(r):e+=r,e+=" "}return e},ps=null,nx=!0,lG=function(t,e){O(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Yo.logLevel=te.VERBOSE,ps=Yo.log.bind(Yo),e&&Lw.set("logging_enabled",!0)):typeof t=="function"?ps=t:(ps=null,Lw.remove("logging_enabled"))},bt=function(...t){if(nx===!0&&(nx=!1,ps===null&&Lw.get("logging_enabled")===!0&&lG(!0)),ps){let e=yu.apply(null,t);ps(e)}},_u=function(t){return function(...e){bt(t,...e)}},Vw=function(...t){let e="FIREBASE INTERNAL ERROR: "+yu(...t);Yo.error(e)},Tr=function(...t){let e=`FIREBASE FATAL ERROR: ${yu(...t)}`;throw Yo.error(e),new Error(e)},Xt=function(...t){let e="FIREBASE WARNING: "+yu(...t);Yo.warn(e)},dG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hG=function(t){if(jn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Xo="[MIN_NAME]",gs="[MAX_NAME]",sa=function(t,e){if(t===e)return 0;if(t===Xo||e===gs)return-1;if(e===Xo||t===gs)return 1;{let n=rx(t),r=rx(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fG=function(t,e){return t===e?0:t<e?-1:1},su=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nt(e))},DI=function(t){if(typeof t!="object"||t===null)return nt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=nt(e[r]),n+=":",n+=DI(t[e[r]]);return n+="}",n},Fx=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function hn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Lx=function(t){O(!kx(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),p="";for(u=0;u<64;u+=8){let m=parseInt(h.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},pG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var mG=new RegExp("^-?(0*)\\d{1,10}$"),yG=-2147483648,_G=2147483647,rx=function(t){if(mG.test(t)){let e=Number(t);if(e>=yG&&e<=_G)return e}return null},vu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},vG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Uw=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var jw=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xt(e)}},du=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),ff="5",Vx="v",Ux="s",jx="r",Bx="f",$x=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hx="ls",qx="p",Bw="ac",Gx="websocket",Wx="long_polling";var pf=class{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function wG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function zx(t,e,n){O(typeof e=="string","typeof type must == string"),O(typeof n=="object","typeof params must == object");let r;if(e===Gx)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Wx)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wG(t)&&(n.ns=t.namespace);let i=[];return hn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var $w=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Bn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return J0(this.counters_)}};var Aw={},Rw={};function SI(t){let e=t.toString();return Aw[e]||(Aw[e]=new $w),Aw[e]}function IG(t,e){let n=t.toString();return Rw[n]||(Rw[n]=e()),Rw[n]}var Hw=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&vu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var ix="start",EG="close",CG="pLPCommand",bG="pRTLPCB",Kx="id",Qx="pw",Yx="ser",TG="cb",DG="seg",SG="ts",AG="d",RG="dframe",Jx=1870,Xx=30,xG=Jx-Xx,NG=25e3,MG=3e4,qw=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_u(e),this.stats_=SI(n),this.urlFn=u=>(this.appCheckToken&&(u[Bw]=this.appCheckToken),zx(n,Wx,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Hw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(MG)),hG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gw((...s)=>{let[o,a,u,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ix)this.id=a,this.password=u;else if(o===EG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[ix]="t",r[Yx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[TG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Vx]=ff,this.transportSessionId&&(r[Ux]=this.transportSessionId),this.lastSessionId&&(r[Hx]=this.lastSessionId),this.applicationId&&(r[qx]=this.applicationId),this.appCheckToken&&(r[Bw]=this.appCheckToken),typeof location<"u"&&location.hostname&&$x.test(location.hostname)&&(r[jx]=Bx);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return jn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pG()&&!gG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=nt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Ly(n),i=Fx(r,xG);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(jn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[RG]="t",r[Kx]=e,r[Qx]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=nt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Gw=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,jn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=uG(),window[CG+this.uniqueCallbackIdentifier]=e,window[bG+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){bt("frame writing exception"),a.stack&&bt(a.stack),bt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Kx]=this.myID,e[Qx]=this.myPW,e[Yx]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Xx+r.length<=Jx;){let o=this.pendingSegs.shift();r=r+"&"+DG+i+"="+o.seg+"&"+SG+i+"="+o.ts+"&"+AG+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(NG)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){jn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var PG=16384,OG=45e3,gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);var ou=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_u(this.connId),this.stats_=SI(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Vx]=ff,!jn()&&typeof location<"u"&&location.hostname&&$x.test(location.hostname)&&(a[jx]=Bx),r&&(a[Ux]=r),i&&(a[Hx]=i),s&&(a[Bw]=s),o&&(a[qx]=o),zx(n,Gx,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fs.set("previous_websocket_failure",!0);try{let i;if(jn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ff}/${TI}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new gf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&gf!==null&&!t.forceDisallow_}static previouslyFailed(){return fs.isInMemoryStorage||fs.get("previous_websocket_failure")===!0}markConnectionHealthy(){fs.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Io(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(O(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=nt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Fx(r,PG);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(OG))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),kG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[qw,ou]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ou&&ou.isAvailable(),i=r&&!ou.previouslyFailed();if(n.webSocketOnly&&(r||Xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ou];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),FG=6e4,LG=5e3,VG=10*1024,UG=100*1024,xw="t",sx="d",jG="s",ox="r",BG="e",ax="o",cx="a",ux="n",lx="p",$G="h",Ww=class{constructor(e,n,r,i,s,o,a,u,l,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_u("c:"+this.id+":"),this.transportManager_=new kG(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xw in e){let n=e[xw];n===cx?this.upgradeIfSecondaryHealthy_():n===ox?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ax&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=su("t",e),r=su("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ux,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=su("t",e),r=su("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=su(xw,e);if(sx in e){let r=e[sx];if(n===$G){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===ux){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jG?this.onConnectionShutdown_(r):n===ox?this.onReset_(r):n===BG?Vw("Server Error: "+r):n===ax?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vw("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ff!==r&&Xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),lu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(LG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lx,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var mf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var yf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var _f=class t extends yf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var dx=32,hx=768,Te=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ee(){return new Te("")}function fe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pi(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Te(t.pieces_,e)}function Zx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function HG(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function eN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tN(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Te(e,0)}function ct(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Te)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Te(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function ln(t,e){let n=fe(t),r=fe(e);if(n===null)return e;if(n===r)return ln(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nN(t,e){if(pi(t)!==pi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(pi(t)>pi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var zw=class{constructor(e,n){this.errorPrefix_=n,this.parts_=eN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Pc(this.parts_[r]);rN(this)}};function qG(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Pc(e),rN(t)}function GG(t){let e=t.parts_.pop();t.byteLength_-=Pc(e),t.parts_.length>0&&(t.byteLength_-=1)}function rN(t){if(t.byteLength_>hx)throw new Error(t.errorPrefix_+"has a key path longer than "+hx+" bytes ("+t.byteLength_+").");if(t.parts_.length>dx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dx+") or object contains a cycle "+hs(t))}function hs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Kw=class t extends yf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}};var au=1e3,WG=60*5*1e3,fx=30*1e3,zG=1.3,KG=3e4,QG="server_kill",px=3,AI=(()=>{class t extends mf{constructor(n,r,i,s,o,a,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=_u("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=au,this.maxReconnectDelay_=WG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!jn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kw.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&_f.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(nt(o)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new $i,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),O(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,u=>{let l=u.d,h=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(h,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Bn(n,"w")){let i=qi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||sS(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=iS(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),O(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+nt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Vw("Unrecognized action received from server: "+nt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=au,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=au,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KG&&(this.reconnectDelay_=au),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zG)}this.onConnectStatus_(!1)}establishConnection_(){return w(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},h=function(m){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,I]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=I&&I.token,u=new Ww(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,S=>{Xt(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(QG)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Xt(m),l())}}})}interrupt(n){bt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){bt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Nc(this.interruptReasons_)&&(this.reconnectDelay_=au,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>DI(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Te(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){bt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=px&&(this.reconnectDelay_=fx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){bt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=px&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";jn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+TI.replace(/\./g,"-")]=1,xc()?n["framework.cordova"]=1:ih()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=_f.getInstance().currentlyOnline();return Nc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),pe=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Zo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new pe(Xo,e),i=new pe(Xo,n);return this.compare(r,i)!==0}minPost(){return pe.MIN}};var hf,vf=class extends Zo{static get __EMPTY_NODE(){return hf}static set __EMPTY_NODE(e){hf=e}compare(e,n){return sa(e.name,n.name)}isDefinedOn(e){throw Hi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return pe.MIN}maxPost(){return new pe(gs,hf)}makePost(e,n){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new pe(e,hf)}toString(){return".key"}},Jo=new vf;var Ko=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},bn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??dn.EMPTY_NODE,this.right=o??dn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return dn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return dn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Qw=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new bn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},dn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ko(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ko(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ko(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ko(this.root_,null,this.comparator_,!0,e)}};dn.EMPTY_NODE=new Qw;function YG(t,e){return sa(t.name,e.name)}function RI(t,e){return sa(t,e)}var Yw;function JG(t){Yw=t}var iN=function(t){return typeof t=="number"?"number:"+Lx(t):"string:"+t},sN=function(t){if(t.isLeafNode()){let e=t.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bn(e,".sv"),"Priority must be a string or number.")}else O(t===Yw||t.isEmpty(),"priority of unexpected type.");O(t===Yw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var gx,ea=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),sN(this.priorityNode_)}static set __childrenNodeConstructor(n){gx=n}static get __childrenNodeConstructor(){return gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ue(n)?this:fe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=fe(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(O(i!==".priority"||pi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+iN(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Lx(this.value_):n+=this.value_,this.lazyHash_=Ox(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(O(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return O(s>=0,"Unknown leaf type: "+r),O(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),oN,aN;function XG(t){oN=t}function ZG(t){aN=t}var Jw=class extends Zo{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?sa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return pe.MIN}maxPost(){return new pe(gs,new ea("[PRIORITY-POST]",aN))}makePost(e,n){let r=oN(e);return new pe(n,new ea("[PRIORITY-POST]",r))}toString(){return".priority"}},Dt=new Jw;var eW=Math.log(2),Xw=class{constructor(e){let n=s=>parseInt(Math.log(s)/eW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wf=function(t,e,n,r){t.sort(e);let i=function(u,l){let h=l-u,p,m;if(h===0)return null;if(h===1)return p=t[u],m=n?n(p):p,new bn(m,p.node,bn.BLACK,null,null);{let I=parseInt(h/2,10)+u,S=i(u,I),R=i(I+1,l);return p=t[I],m=n?n(p):p,new bn(m,p.node,bn.BLACK,S,R)}},s=function(u){let l=null,h=null,p=t.length,m=function(S,R){let N=p-S,L=p;p-=S;let J=i(N+1,L),K=t[N],me=n?n(K):K;I(new bn(me,K.node,R,null,J))},I=function(S){l?(l.left=S,l=S):(h=S,l=S)};for(let S=0;S<u.count;++S){let R=u.nextBitIsOne(),N=Math.pow(2,u.count-(S+1));R?m(N,bn.BLACK):(m(N,bn.BLACK),m(N,bn.RED))}return h},o=new Xw(t.length),a=s(o);return new dn(r||e,a)};var Nw,zo={},ta=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return O(zo&&Dt,"ChildrenNode.ts has not been loaded"),Nw=Nw||new t({".priority":zo},{".priority":Dt}),Nw}get(e){let n=qi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof dn?n:null}hasIndex(e){return Bn(this.indexSet_,e.toString())}addIndex(e,n){O(e!==Jo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(pe.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=wf(r,e.getCompare()):a=zo;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let h=Object.assign({},this.indexes_);return h[u]=a,new t(h,l)}addToIndexes(e,n){let r=Mc(this.indexes_,(i,s)=>{let o=qi(this.indexSet_,s);if(O(o,"Missing index implementation for "+s),i===zo)if(o.isDefinedOn(e.node)){let a=[],u=n.getIterator(pe.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),wf(a,o.getCompare())}else return zo;else{let a=n.get(e.name),u=i;return a&&(u=u.remove(new pe(e.name,a))),u.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Mc(this.indexes_,i=>{if(i===zo)return i;{let s=n.get(e.name);return s?i.remove(new pe(e.name,s)):i}});return new t(r,this.indexSet_)}};var cu,Me=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sN(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cu||(cu=new t(new dn(RI),null,ta.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?cu:r}}getChild(n){let r=fe(n);return r===null?this:this.getImmediateChild(r).getChild(Re(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(O(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new pe(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?cu:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=fe(n);if(i===null)return r;{O(fe(n)!==".priority"||pi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Re(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Dt,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+iN(this.getPriority().val())+":"),this.forEachChild(Dt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Ox(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new pe(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new pe(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new pe(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,pe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,pe.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===wu?-1:0}withIndex(n){if(n===Jo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Jo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Dt),s=r.getIterator(Dt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Jo?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Zw=class extends Me{constructor(){super(new dn(RI),Me.EMPTY_NODE,ta.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Me.EMPTY_NODE}isEmpty(){return!1}},wu=new Zw;Object.defineProperties(pe,{MIN:{value:new pe(Xo,Me.EMPTY_NODE)},MAX:{value:new pe(gs,wu)}});vf.__EMPTY_NODE=Me.EMPTY_NODE;ea.__childrenNodeConstructor=Me;JG(wu);ZG(wu);var tW=!0;function Tt(t,e=null){if(t===null)return Me.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ea(n,Tt(e))}if(!(t instanceof Array)&&tW){let n=[],r=!1;if(hn(t,(o,a)=>{if(o.substring(0,1)!=="."){let u=Tt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new pe(o,u)))}}),n.length===0)return Me.EMPTY_NODE;let s=wf(n,YG,o=>o.name,RI);if(r){let o=wf(n,Dt.getCompare());return new Me(s,Tt(e),new ta({".priority":o},{".priority":Dt}))}else return new Me(s,Tt(e),ta.Default)}else{let n=Me.EMPTY_NODE;return hn(t,(r,i)=>{if(Bn(t,r)&&r.substring(0,1)!=="."){let s=Tt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Tt(e))}}XG(Tt);var eI=class extends Zo{constructor(e){super(),this.indexPath_=e,O(!ue(e)&&fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?sa(e.name,n.name):s}makePost(e,n){let r=Tt(e),i=Me.EMPTY_NODE.updateChild(this.indexPath_,r);return new pe(n,i)}maxPost(){let e=Me.EMPTY_NODE.updateChild(this.indexPath_,wu);return new pe(gs,e)}toString(){return eN(this.indexPath_,0).join("/")}};var tI=class extends Zo{compare(e,n){let r=e.node.compareTo(n.node);return r===0?sa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return pe.MIN}maxPost(){return pe.MAX}makePost(e,n){let r=Tt(e);return new pe(n,r)}toString(){return".value"}},nW=new tI;function rW(t){return{type:"value",snapshotNode:t}}function iW(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function sW(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function mx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function oW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var nI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xo}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function yx(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Dt?n="$priority":t.index_===nW?n="$value":t.index_===Jo?n="$key":(O(t.index_ instanceof eI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=nt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+nt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=nt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+nt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _x(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dt&&(e.i=t.index_.toString()),e}var rI=class t extends mf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_u("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let u=yx(e._queryParams);this.restRequest_(s+".json",u,(l,h)=>{let p=h;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),qi(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=yx(e._queryParams),r=e._path.toString(),i=new $i;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wi(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Io(a.responseText)}catch{Xt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&Xt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var iI=class{constructor(){this.rootNode_=Me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function If(){return{value:null,children:new Map}}function cN(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=fe(e);t.children.has(r)||t.children.set(r,If());let i=t.children.get(r);e=Re(e),cN(i,e,n)}}function sI(t,e,n){t.value!==null?n(e,t.value):aW(t,(r,i)=>{let s=new Te(e.toString()+"/"+r);sI(i,s,n)})}function aW(t,e){t.children.forEach((n,r)=>{e(r,n)})}var oI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&hn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var vx=10*1e3,cW=30*1e3,uW=5*60*1e3,aI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new oI(e);let r=vx+(cW-vx)*Math.random();lu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;hn(e,(i,s)=>{s>0&&Bn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),lu(this.reportStats_.bind(this),Math.floor(Math.random()*2*uW))}};var br=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(br||{});function uN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var cI=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=br.ACK_USER_WRITE,this.source=uN()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Te(e));return new t(Ee(),n,this.revert)}}else return O(fe(this.path)===e,"operationForChild called for unrelated child."),new t(Re(this.path),this.affectedTree,this.revert)}};var na=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=br.OVERWRITE}operationForChild(e){return ue(this.path)?new t(this.source,Ee(),this.snap.getImmediateChild(e)):new t(this.source,Re(this.path),this.snap)}};var Ef=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=br.MERGE}operationForChild(e){if(ue(this.path)){let n=this.children.subtree(new Te(e));return n.isEmpty()?null:n.value?new na(this.source,Ee(),n.value):new t(this.source,Ee(),n)}else return O(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var pu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;let n=fe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function lW(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(oW(o.childName,o.snapshotNode))}),uu(t,i,"child_removed",e,r,n),uu(t,i,"child_added",e,r,n),uu(t,i,"child_moved",s,r,n),uu(t,i,"child_changed",e,r,n),uu(t,i,"value",e,r,n),i}function uu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,u)=>hW(t,a,u)),o.forEach(a=>{let u=dW(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,t.query_))})})}function dW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hW(t,e,n){if(e.childName==null||n.childName==null)throw Hi("Should only compare child_ events.");let r=new pe(e.childName,e.snapshotNode),i=new pe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function hN(t,e){return{eventCache:t,serverCache:e}}function hu(t,e,n,r){return hN(new pu(e,n,r),t.serverCache)}function fN(t,e,n,r){return hN(t.eventCache,new pu(e,n,r))}function uI(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ms(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Mw,fW=()=>(Mw||(Mw=new dn(fG)),Mw),Ut=class t{constructor(e,n=fW()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return hn(e,(r,i)=>{n=n.set(new Te(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ee(),value:this.value};if(ue(e))return null;{let r=fe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Re(e),n);return s!=null?{path:ct(new Te(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{let n=fe(e),r=this.children.get(n);return r!==null?r.subtree(Re(e)):new t(null)}}set(e,n){if(ue(e))return new t(n,this.children);{let r=fe(e),s=(this.children.get(r)||new t(null)).set(Re(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=fe(e),r=this.children.get(n);if(r){let i=r.remove(Re(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ue(e))return this.value;{let n=fe(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(ue(e))return n;{let r=fe(e),s=(this.children.get(r)||new t(null)).setTree(Re(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ee(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ct(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ee(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ue(e))return null;{let s=fe(e),o=this.children.get(s);return o?o.findOnPath_(Re(e),ct(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ee(),n)}foreachOnPath_(e,n,r){if(ue(e))return this;{this.value&&r(n,this.value);let i=fe(e),s=this.children.get(i);return s?s.foreachOnPath_(Re(e),ct(n,i),r):new t(null)}}foreach(e){this.foreach_(Ee(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ct(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Dn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Ut(null))}};function fu(t,e,n){if(ue(e))return new Dn(new Ut(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ln(i,e);return s=s.updateChild(o,n),new Dn(t.writeTree_.set(i,s))}else{let i=new Ut(n),s=t.writeTree_.setTree(e,i);return new Dn(s)}}}function wx(t,e,n){let r=t;return hn(n,(i,s)=>{r=fu(r,ct(e,i),s)}),r}function Ix(t,e){if(ue(e))return Dn.empty();{let n=t.writeTree_.setTree(e,new Ut(null));return new Dn(n)}}function lI(t,e){return ys(t,e)!=null}function ys(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ln(n.path,e)):null}function Ex(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dt,(r,i)=>{e.push(new pe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new pe(r,i.value))}),e}function fi(t,e){if(ue(e))return t;{let n=ys(t,e);return n!=null?new Dn(new Ut(n)):new Dn(t.writeTree_.subtree(e))}}function dI(t){return t.writeTree_.isEmpty()}function ra(t,e){return pN(Ee(),t.writeTree_,e)}function pN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(O(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=pN(ct(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ct(t,".priority"),r)),n}}function gN(t,e){return wN(e,t)}function pW(t,e,n,r,i){O(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=fu(t.visibleWrites,e,n)),t.lastWriteId=r}function gW(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function mW(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&yW(a,r.path)?i=!1:Tn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return _W(t),!0;if(r.snap)t.visibleWrites=Ix(t.visibleWrites,r.path);else{let a=r.children;hn(a,u=>{t.visibleWrites=Ix(t.visibleWrites,ct(r.path,u))})}return!0}else return!1}function yW(t,e){if(t.snap)return Tn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Tn(ct(t.path,n),e))return!0;return!1}function _W(t){t.visibleWrites=mN(t.allWrites,vW,Ee()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function vW(t){return t.visible}function mN(t,e,n){let r=Dn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Tn(n,o)?(a=ln(n,o),r=fu(r,a,s.snap)):Tn(o,n)&&(a=ln(o,n),r=fu(r,Ee(),s.snap.getChild(a)));else if(s.children){if(Tn(n,o))a=ln(n,o),r=wx(r,a,s.children);else if(Tn(o,n))if(a=ln(o,n),ue(a))r=wx(r,Ee(),s.children);else{let u=qi(s.children,fe(a));if(u){let l=u.getChild(Re(a));r=fu(r,Ee(),l)}}}else throw Hi("WriteRecord should have .snap or .children")}}return r}function yN(t,e,n,r,i){if(!r&&!i){let s=ys(t.visibleWrites,e);if(s!=null)return s;{let o=fi(t.visibleWrites,e);if(dI(o))return n;if(n==null&&!lI(o,Ee()))return null;{let a=n||Me.EMPTY_NODE;return ra(o,a)}}}else{let s=fi(t.visibleWrites,e);if(!i&&dI(s))return n;if(!i&&n==null&&!lI(s,Ee()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Tn(l.path,e)||Tn(e,l.path))},a=mN(t.allWrites,o,e),u=n||Me.EMPTY_NODE;return ra(a,u)}}}function wW(t,e,n){let r=Me.EMPTY_NODE,i=ys(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Dt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=fi(t.visibleWrites,e);return n.forEachChild(Dt,(o,a)=>{let u=ra(fi(s,new Te(o)),a);r=r.updateImmediateChild(o,u)}),Ex(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=fi(t.visibleWrites,e);return Ex(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function IW(t,e,n,r,i){O(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ct(e,n);if(lI(t.visibleWrites,s))return null;{let o=fi(t.visibleWrites,s);return dI(o)?i.getChild(n):ra(o,i.getChild(n))}}function EW(t,e,n,r){let i=ct(e,n),s=ys(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=fi(t.visibleWrites,i);return ra(o,r.getNode().getImmediateChild(n))}else return null}function CW(t,e){return ys(t.visibleWrites,e)}function bW(t,e,n,r,i,s,o){let a,u=fi(t.visibleWrites,e),l=ys(u,Ee());if(l!=null)a=l;else if(n!=null)a=ra(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),I=m.getNext();for(;I&&h.length<i;)p(I,r)!==0&&h.push(I),I=m.getNext();return h}else return[]}function TW(){return{visibleWrites:Dn.empty(),allWrites:[],lastWriteId:-1}}function hI(t,e,n,r){return yN(t.writeTree,t.treePath,e,n,r)}function _N(t,e){return wW(t.writeTree,t.treePath,e)}function Cx(t,e,n,r){return IW(t.writeTree,t.treePath,e,n,r)}function Cf(t,e){return CW(t.writeTree,ct(t.treePath,e))}function DW(t,e,n,r,i,s){return bW(t.writeTree,t.treePath,e,n,r,i,s)}function xI(t,e,n){return EW(t.writeTree,t.treePath,e,n)}function vN(t,e){return wN(ct(t.treePath,e),t.writeTree)}function wN(t,e){return{treePath:t,writeTree:e}}var fI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;O(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),O(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,mx(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,sW(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,iW(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,mx(r,e.snapshotNode,i.oldSnap));else throw Hi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var pI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},IN=new pI,gu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xI(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ms(this.viewCache_),s=DW(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function SW(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function AW(t,e,n,r,i){let s=new fI,o,a;if(n.type===br.OVERWRITE){let l=n;l.source.fromUser?o=gI(t,e,l.path,l.snap,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ue(l.path),o=bf(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===br.MERGE){let l=n;l.source.fromUser?o=xW(t,e,l.path,l.children,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=mI(t,e,l.path,l.children,r,i,a,s))}else if(n.type===br.ACK_USER_WRITE){let l=n;l.revert?o=PW(t,e,l.path,r,i,s):o=NW(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===br.LISTEN_COMPLETE)o=MW(t,e,n.path,r,s);else throw Hi("Unknown operation type: "+n.type);let u=s.getChanges();return RW(e,o,u),{viewCache:o,changes:u}}function RW(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=uI(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(rW(uI(e)))}}function EN(t,e,n,r,i,s){let o=e.eventCache;if(Cf(r,n)!=null)return e;{let a,u;if(ue(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ms(e),h=l instanceof Me?l:Me.EMPTY_NODE,p=_N(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=hI(r,ms(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=fe(n);if(l===".priority"){O(pi(n)===1,"Can't have a priority with additional path components");let h=o.getNode();u=e.serverCache.getNode();let p=Cx(r,n,h,u);p!=null?a=t.filter.updatePriority(h,p):a=o.getNode()}else{let h=Re(n),p;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();let m=Cx(r,n,o.getNode(),u);m!=null?p=o.getNode().getImmediateChild(l).updateChild(h,m):p=o.getNode().getImmediateChild(l)}else p=xI(r,l,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),l,p,h,i,s):a=o.getNode()}}return hu(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function bf(t,e,n,r,i,s,o,a){let u=e.serverCache,l,h=o?t.filter:t.filter.getIndexedFilter();if(ue(n))l=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){let I=u.getNode().updateChild(n,r);l=h.updateFullNode(u.getNode(),I,null)}else{let I=fe(n);if(!u.isCompleteForPath(n)&&pi(n)>1)return e;let S=Re(n),N=u.getNode().getImmediateChild(I).updateChild(S,r);I===".priority"?l=h.updatePriority(u.getNode(),N):l=h.updateChild(u.getNode(),I,N,S,IN,null)}let p=fN(e,l,u.isFullyInitialized()||ue(n),h.filtersNodes()),m=new gu(i,p,s);return EN(t,p,n,i,m,a)}function gI(t,e,n,r,i,s,o){let a=e.eventCache,u,l,h=new gu(i,e,s);if(ue(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=hu(e,l,!0,t.filter.filtersNodes());else{let p=fe(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=hu(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Re(n),I=a.getNode().getImmediateChild(p),S;if(ue(m))S=r;else{let R=h.getCompleteChild(p);R!=null?Zx(m)===".priority"&&R.getChild(tN(m)).isEmpty()?S=R:S=R.updateChild(m,r):S=Me.EMPTY_NODE}if(I.equals(S))u=e;else{let R=t.filter.updateChild(a.getNode(),p,S,m,h,o);u=hu(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function bx(t,e){return t.eventCache.isCompleteForChild(e)}function xW(t,e,n,r,i,s,o){let a=e;return r.foreach((u,l)=>{let h=ct(n,u);bx(e,fe(h))&&(a=gI(t,a,h,l,i,s,o))}),r.foreach((u,l)=>{let h=ct(n,u);bx(e,fe(h))||(a=gI(t,a,h,l,i,s,o))}),a}function Tx(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mI(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;ue(n)?l=r:l=new Ut(null).setTree(n,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){let I=e.serverCache.getNode().getImmediateChild(p),S=Tx(t,I,m);u=bf(t,u,new Te(p),S,i,s,o,a)}}),l.children.inorderTraversal((p,m)=>{let I=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!I){let S=e.serverCache.getNode().getImmediateChild(p),R=Tx(t,S,m);u=bf(t,u,new Te(p),R,i,s,o,a)}}),u}function NW(t,e,n,r,i,s,o){if(Cf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(ue(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return bf(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ue(n)){let l=new Ut(null);return u.getNode().forEachChild(Jo,(h,p)=>{l=l.set(new Te(h),p)}),mI(t,e,n,l,i,s,a,o)}else return e}else{let l=new Ut(null);return r.foreach((h,p)=>{let m=ct(n,h);u.isCompleteForPath(m)&&(l=l.set(h,u.getNode().getChild(m)))}),mI(t,e,n,l,i,s,a,o)}}function MW(t,e,n,r,i){let s=e.serverCache,o=fN(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered());return EN(t,o,n,r,IN,i)}function PW(t,e,n,r,i,s){let o;if(Cf(r,n)!=null)return e;{let a=new gu(r,e,i),u=e.eventCache.getNode(),l;if(ue(n)||fe(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=hI(r,ms(e));else{let p=e.serverCache.getNode();O(p instanceof Me,"serverChildren would be complete if leaf node"),h=_N(r,p)}h=h,l=t.filter.updateFullNode(u,h,s)}else{let h=fe(n),p=xI(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=u.getImmediateChild(h)),p!=null?l=t.filter.updateChild(u,h,p,Re(n),a,s):e.eventCache.getNode().hasChild(h)?l=t.filter.updateChild(u,h,Me.EMPTY_NODE,Re(n),a,s):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=hI(r,ms(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Cf(r,Ee())!=null,hu(e,l,o,t.filter.filtersNodes())}}function OW(t,e){let n=ms(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(fe(e)).isEmpty())?n.getChild(e):null}function Dx(t,e,n,r){e.type===br.MERGE&&e.source.queryId!==null&&(O(ms(t.viewCache_),"We should always have a full cache before handling merges"),O(uI(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=AW(t.processor_,i,e,n,r);return SW(t.processor_,s.viewCache),O(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,kW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function kW(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return lW(t.eventGenerator_,e,n,i)}var Sx;function FW(t){O(!Sx,"__referenceConstructor has already been defined"),Sx=t}function NI(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return O(s!=null,"SyncTree gave us an op for an invalid query."),Dx(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Dx(o,e,n,r));return s}}function MI(t,e){let n=null;for(let r of t.views.values())n=n||OW(r,e);return n}var Ax;function LW(t){O(!Ax,"__referenceConstructor has already been defined"),Ax=t}var Tf=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ut(null),this.pendingWriteTree_=TW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function VW(t,e,n,r,i){return pW(t.pendingWriteTree_,e,n,r,i),i?Sf(t,new na(uN(),e,n)):[]}function Qo(t,e,n=!1){let r=gW(t.pendingWriteTree_,e);if(mW(t.pendingWriteTree_,e)){let s=new Ut(null);return r.snap!=null?s=s.set(Ee(),!0):hn(r.children,o=>{s=s.set(new Te(o),!0)}),Sf(t,new cI(r.path,s,n))}else return[]}function Df(t,e,n){return Sf(t,new na(lN(),e,n))}function UW(t,e,n){let r=Ut.fromObject(n);return Sf(t,new Ef(lN(),e,r))}function jW(t,e,n,r){let i=DN(t,r);if(i!=null){let s=SN(i),o=s.path,a=s.queryId,u=ln(o,e),l=new na(dN(a),u,n);return AN(t,o,l)}else return[]}function BW(t,e,n,r){let i=DN(t,r);if(i){let s=SN(i),o=s.path,a=s.queryId,u=ln(o,e),l=Ut.fromObject(n),h=new Ef(dN(a),u,l);return AN(t,o,h)}else return[]}function CN(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let u=ln(o,e),l=MI(a,u);if(l)return l});return yN(i,e,s,n,!0)}function Sf(t,e){return bN(e,t.syncPointTree_,null,gN(t.pendingWriteTree_,Ee()))}function bN(t,e,n,r){if(ue(t.path))return TN(t,e,n,r);{let i=e.get(Ee());n==null&&i!=null&&(n=MI(i,Ee()));let s=[],o=fe(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){let l=n?n.getImmediateChild(o):null,h=vN(r,o);s=s.concat(bN(a,u,l,h))}return i&&(s=s.concat(NI(i,t,r,n))),s}}function TN(t,e,n,r){let i=e.get(Ee());n==null&&i!=null&&(n=MI(i,Ee()));let s=[];return e.children.inorderTraversal((o,a)=>{let u=n?n.getImmediateChild(o):null,l=vN(r,o),h=t.operationForChild(o);h&&(s=s.concat(TN(h,a,u,l)))}),i&&(s=s.concat(NI(i,t,r,n))),s}function DN(t,e){return t.tagToQueryMap.get(e)}function SN(t){let e=t.indexOf("$");return O(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Te(t.substr(0,e))}}function AN(t,e,n){let r=t.syncPointTree_.get(e);O(r,"Missing sync point for query tag that we're tracking");let i=gN(t.pendingWriteTree_,e);return NI(r,n,i,null)}var yI=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},_I=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ct(this.path_,e);return new t(this.syncTree_,n)}node(){return CN(this.syncTree_,this.path_)}},$W=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Rx=function(t,e,n){if(!t||typeof t!="object")return t;if(O(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return HW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return qW(t[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},HW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:O(!1,"Unexpected server value: "+t)}},qW=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&O(!1,"Unexpected increment value: "+r);let i=e.node();if(O(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},GW=function(t,e,n,r){return PI(e,new _I(n,t),r)},WW=function(t,e,n){return PI(t,new yI(e),n)};function PI(t,e,n){let r=t.getPriority().val(),i=Rx(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=Rx(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ea(a,Tt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ea(i))),o.forEachChild(Dt,(a,u)=>{let l=PI(u,e.getImmediateChild(a),n);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}var mu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function OI(t,e){let n=e instanceof Te?e:new Te(e),r=t,i=fe(n);for(;i!==null;){let s=qi(r.node.children,i)||{children:{},childCount:0};r=new mu(i,r,s),n=Re(n),i=fe(n)}return r}function oa(t){return t.node.value}function RN(t,e){t.node.value=e,vI(t)}function xN(t){return t.node.childCount>0}function zW(t){return oa(t)===void 0&&!xN(t)}function Af(t,e){hn(t.node.children,(n,r)=>{e(new mu(n,t,r))})}function NN(t,e,n,r){n&&!r&&e(t),Af(t,i=>{NN(i,e,!0,r)}),n&&r&&e(t)}function KW(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Iu(t){return new Te(t.parent===null?t.name:Iu(t.parent)+"/"+t.name)}function vI(t){t.parent!==null&&QW(t.parent,t.name,t)}function QW(t,e,n){let r=zW(n),i=Bn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,vI(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,vI(t))}var YW=/[\[\].#$\/\u0000-\u001F\u007F]/,JW=/[\[\].#$\u0000-\u001F\u007F]/,Pw=10*1024*1024,MN=function(t){return typeof t=="string"&&t.length!==0&&!YW.test(t)},XW=function(t){return typeof t=="string"&&t.length!==0&&!JW.test(t)},ZW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XW(t)};var PN=function(t,e,n){let r=n instanceof Te?new zw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+hs(r));if(typeof e=="function")throw new Error(t+"contains a function "+hs(r)+" with contents = "+e.toString());if(kx(e))throw new Error(t+"contains "+e.toString()+" "+hs(r));if(typeof e=="string"&&e.length>Pw/3&&Pc(e)>Pw)throw new Error(t+"contains a string greater than "+Pw+" utf8 bytes "+hs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(hn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!MN(o)))throw new Error(t+" contains an invalid key ("+o+") "+hs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qG(r,o),PN(t,a,r),GG(r)}),i&&s)throw new Error(t+' contains ".value" child '+hs(r)+" in addition to actual children.")}};var e4=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!MN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ZW(n))throw new Error(aS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var wI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function t4(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!nN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function _s(t,e,n){t4(t,n),n4(t,r=>Tn(r,e)||Tn(e,r))}function n4(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(r4(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function r4(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();ps&&bt("event: "+n.toString()),vu(r)}}}var i4="repo_interrupt",s4=25,II=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=If(),this.transactionQueueTree_=new mu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function o4(t,e,n){if(t.stats_=SI(t.repoInfo_),t.forceRestClient_||vG())t.server_=new rI(t.repoInfo_,(r,i,s,o)=>{xx(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Nx(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new AI(t.repoInfo_,e,(r,i,s,o)=>{xx(t,r,i,s,o)},r=>{Nx(t,r)},r=>{c4(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=IG(t.repoInfo_,()=>new aI(t.stats_,t.server_)),t.infoData_=new iI,t.infoSyncTree_=new Tf({startListening:(r,i,s,o)=>{let a=[],u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Df(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kI(t,"connected",!1),t.serverSyncTree_=new Tf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{let l=o(a,u);_s(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function a4(t){let n=t.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ON(t){return $W({timestamp:a4(t)})}function xx(t,e,n,r,i){t.dataUpdateCount++;let s=new Te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let u=Mc(n,l=>Tt(l));o=BW(t.serverSyncTree_,s,u,i)}else{let u=Tt(n);o=jW(t.serverSyncTree_,s,u,i)}else if(r){let u=Mc(n,l=>Tt(l));o=UW(t.serverSyncTree_,s,u)}else{let u=Tt(n);o=Df(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=LI(t,s)),_s(t.eventQueue_,a,o)}function Nx(t,e){kI(t,"connected",e),e===!1&&l4(t)}function c4(t,e){hn(e,(n,r)=>{kI(t,n,r)})}function kI(t,e,n){let r=new Te("/.info/"+e),i=Tt(n);t.infoData_.updateSnapshot(r,i);let s=Df(t.infoSyncTree_,r,i);_s(t.eventQueue_,r,s)}function u4(t){return t.nextWriteId_++}function l4(t){kN(t,"onDisconnectEvents");let e=ON(t),n=If();sI(t.onDisconnect_,Ee(),(i,s)=>{let o=GW(i,s,t.serverSyncTree_,e);cN(n,i,o)});let r=[];sI(n,Ee(),(i,s)=>{r=r.concat(Df(t.serverSyncTree_,i,s));let o=p4(t,i);LI(t,o)}),t.onDisconnect_=If(),_s(t.eventQueue_,Ee(),r)}function d4(t){t.persistentConnection_&&t.persistentConnection_.interrupt(i4)}function kN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bt(n,...e)}function FN(t,e,n){return CN(t.serverSyncTree_,e,n)||Me.EMPTY_NODE}function FI(t,e=t.transactionQueueTree_){if(e||Rf(t,e),oa(e)){let n=VN(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&h4(t,Iu(e),n)}else xN(e)&&Af(e,n=>{FI(t,n)})}function h4(t,e,n){let r=n.map(l=>l.currentWriteId),i=FN(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let h=n[l];O(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=ln(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),u=e;t.server_.put(u.toString(),a,l=>{kN(t,"transaction put response",{path:u.toString(),status:l});let h=[];if(l==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Qo(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Rf(t,OI(t.transactionQueueTree_,e)),FI(t,t.transactionQueueTree_),_s(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)vu(p[m])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Xt("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}LI(t,e)}},o)}function LI(t,e){let n=LN(t,e),r=Iu(n),i=VN(t,n);return f4(t,i,r),r}function f4(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=ln(n,u.path),h=!1,p;if(O(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,p=u.abortReason,i=i.concat(Qo(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=s4)h=!0,p="maxretry",i=i.concat(Qo(t.serverSyncTree_,u.currentWriteId,!0));else{let m=FN(t,u.path,o);u.currentInputSnapshot=m;let I=e[a].update(m.val());if(I!==void 0){PN("transaction failed: Data returned ",I,u.path);let S=Tt(I);typeof I=="object"&&I!=null&&Bn(I,".priority")||(S=S.updatePriority(m.getPriority()));let N=u.currentWriteId,L=ON(t),J=WW(S,m,L);u.currentOutputSnapshotRaw=S,u.currentOutputSnapshotResolved=J,u.currentWriteId=u4(t),o.splice(o.indexOf(N),1),i=i.concat(VW(t.serverSyncTree_,u.path,J,u.currentWriteId,u.applyLocally)),i=i.concat(Qo(t.serverSyncTree_,N,!0))}else h=!0,p="nodata",i=i.concat(Qo(t.serverSyncTree_,u.currentWriteId,!0))}_s(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Rf(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)vu(r[a]);FI(t,t.transactionQueueTree_)}function LN(t,e){let n,r=t.transactionQueueTree_;for(n=fe(e);n!==null&&oa(r)===void 0;)r=OI(r,n),e=Re(e),n=fe(e);return r}function VN(t,e){let n=[];return UN(t,e,n),n.sort((r,i)=>r.order-i.order),n}function UN(t,e,n){let r=oa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Af(e,i=>{UN(t,i,n)})}function Rf(t,e){let n=oa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,RN(e,n.length>0?n:void 0)}Af(e,r=>{Rf(t,r)})}function p4(t,e){let n=Iu(LN(t,e)),r=OI(t.transactionQueueTree_,e);return KW(r,i=>{Ow(t,i)}),Ow(t,r),NN(r,i=>{Ow(t,i)}),n}function Ow(t,e){let n=oa(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(O(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(O(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Qo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?RN(e,void 0):n.length=s+1,_s(t.eventQueue_,Iu(e),i);for(let o=0;o<r.length;o++)vu(r[o])}}function g4(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function m4(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xt(`Invalid query segment '${n}' in query '${t}'`)}return e}var Mx=function(t,e){let n=y4(t),r=n.namespace;n.domain==="firebase.com"&&Tr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Tr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dG();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Te(n.pathString)}},y4=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=g4(t.substring(h,p)));let m=m4(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let I=e.slice(0,l);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{let S=e.indexOf(".");r=e.substring(0,S).toLowerCase(),n=e.substring(S+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var EI=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ue(this._path)?null:Zx(this._path)}get ref(){return new ia(this._repo,this._path)}get _queryIdentifier(){let e=_x(this._queryParams),n=DI(e);return n==="{}"?"default":n}get _queryObject(){return _x(this._queryParams)}isEqual(e){if(e=rt(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=nN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+HG(this._path)}};var ia=class t extends EI{constructor(e,n){super(e,n,new nI,!1)}get parent(){let e=tN(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};FW(ia);LW(ia);var _4="FIREBASE_DATABASE_EMULATOR_HOST",CI={},v4=!1;function w4(t,e,n,r){t.repoInfo_=new pf(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function I4(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Tr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Mx(s,i),a=o.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[_4]),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=Mx(s,i),a=o.repoInfo):u=!o.repoInfo.secure;let h=i&&u?new du(du.OWNER):new jw(t.name,t.options,e);e4("Invalid Firebase Database URL",o),ue(o.path)||Tr("Database URL must point to the root of a Firebase Database (not including a child path).");let p=C4(a,t,h,new Uw(t.name,n));return new bI(p,t)}function E4(t,e){let n=CI[e];(!n||n[t.key]!==t)&&Tr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),d4(t),delete n[t.key]}function C4(t,e,n,r){let i=CI[e.name];i||(i={},CI[e.name]=i);let s=i[t.toURLString()];return s&&Tr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new II(t,v4,n,r),i[t.toURLString()]=s,s}var bI=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(o4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ia(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(E4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Tr("Cannot call "+e+" on a deleted database.")}};function jN(t=Zr(),e){let n=Qi(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=nh("database");r&&BN(n,...r)}return n}function BN(t,e,n,r={}){t=rt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Tr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Tr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new du(du.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:rh(r.mockUserToken,t.app.options.projectId);s=new du(o)}w4(i,e,n,s)}function b4(t){cG(Gn),qn(new Lt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return I4(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),xe(ex,tx,t),xe(ex,tx,"esm2017")}AI.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};AI.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};b4();var Eu=class{constructor(e){return e}},$N="database",VI=class{constructor(){return Ji($N)}};var UI=new $("angularfire2.database-instances");function T4(t,e){let n=To($N,t,e);return n&&new Eu(n)}function D4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Eu(r)}}var S4={provide:VI,deps:[[new ke,UI]]},A4={provide:Eu,useFactory:T4,deps:[[new ke,UI],En]},R4=(()=>{class t{constructor(){xe("angularfire",pr.full,"rtdb")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Je({type:t});static \u0275inj=Ye({providers:[A4,S4]})}return t})();function HN(t,...e){return{ngModule:R4,providers:[{provide:UI,useFactory:D4(t),multi:!0,deps:[ce,ft,ti,gr,[new ke,ns],[new ke,ei],...e]}]}}var qN=Qt(jN,!0);var GN={production:!0,firebaseConfig:{apiKey:"your-api-key",authDomain:"your-project-id.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project-id.appspot.com",messagingSenderId:"your-sender-id",appId:"your-app-id"}};var WN={providers:[I0(ZR),Zs(CS(()=>bS(GN.firebaseConfig))),Zs(vA(()=>IA())),Zs(BR(()=>$R())),Zs(HN(()=>qN()))]};var zN=(()=>{let e=class e{constructor(){this.title="game-center"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Nt({type:e,selectors:[["app-root"]],standalone:!0,features:[cn],decls:1,vars:0,template:function(i,s){i&1&&Ze(0,"router-outlet")},dependencies:[vy]});let t=e;return t})();MD(zN,WN).catch(t=>console.error(t));
